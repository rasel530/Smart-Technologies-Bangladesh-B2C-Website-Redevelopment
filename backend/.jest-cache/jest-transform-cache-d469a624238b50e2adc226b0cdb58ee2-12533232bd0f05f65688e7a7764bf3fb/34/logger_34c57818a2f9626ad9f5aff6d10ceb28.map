{"version":3,"names":["winston","require","zlib","fs","path","configService","LoggerService","constructor","config","getLoggingConfig","isProduction","logBuffer","bufferSize","bufferTimeout","samplingRate","logCount","performanceMetrics","totalLogs","totalLogTime","averageLogTime","logger","createLogger","startBufferFlushInterval","logFormat","format","combine","timestamp","errors","stack","json","transports","push","Console","colorize","simple","level","file","fileTransport","File","filename","maxsize","maxFiles","tailable","zippedArchive","on","oldFilename","newFilename","compressLogFile","logLevel","info","service","version","environment","get","instanceId","process","env","INSTANCE_ID","exitOnError","filePath","gzipPath","readStream","createReadStream","writeStream","createWriteStream","gzip","createGzip","pipe","unlink","err","console","error","shouldSampleLog","measureLogPerformance","logFunction","args","startTime","hrtime","bigint","result","apply","endTime","duration","Number","addToBuffer","message","meta","logEntry","Date","toISOString","length","flushBuffer","logsToFlush","forEach","log","setInterval","requestLogger","req","res","next","start","now","logData","method","url","originalUrl","ip","userAgent","requestId","id","generateRequestId","originalSend","send","data","responseData","statusCode","call","errorLogger","errorId","generateErrorId","errorData","body","headers","status","logAuth","event","userId","details","authData","logDatabase","operation","table","dbData","affected","logPayment","paymentData","paymentMethod","amount","currency","transactionId","logOrder","orderId","orderData","total","logSecurity","securityData","reason","warn","logPerformance","perfData","memory","memoryUsage","loggerMetrics","logBusiness","businessData","Math","random","toString","substr","getLogger","child","context","stream","write","trim","debug","logStructured","structuredData","logQuery","query","params","queryData","logCache","key","hit","cacheData","logExternal","externalData","getPerformanceMetrics","cleanup","loggerService","module","exports"],"sources":["logger.js"],"sourcesContent":["const winston = require('winston');\r\nconst zlib = require('zlib');\r\nconst fs = require('fs');\r\nconst path = require('path');\r\nconst { configService } = require('./config');\r\n\r\nclass LoggerService {\r\n  constructor() {\r\n    this.config = configService.getLoggingConfig();\r\n    this.isProduction = configService.isProduction();\r\n    this.logBuffer = [];\r\n    this.bufferSize = 100; // Buffer up to 100 log entries\r\n    this.bufferTimeout = 5000; // Flush buffer every 5 seconds\r\n    this.samplingRate = 0.1; // 10% sampling rate for high-volume scenarios\r\n    this.logCount = 0;\r\n    this.performanceMetrics = {\r\n      totalLogs: 0,\r\n      totalLogTime: 0,\r\n      averageLogTime: 0\r\n    };\r\n    \r\n    this.logger = this.createLogger();\r\n    this.startBufferFlushInterval();\r\n  }\r\n\r\n  createLogger() {\r\n    const logFormat = winston.format.combine(\r\n      winston.format.timestamp(),\r\n      winston.format.errors({ stack: true }),\r\n      winston.format.json()\r\n    );\r\n\r\n    const transports = [];\r\n\r\n    // Console transport for development with reduced verbosity in production\r\n    if (!this.isProduction) {\r\n      transports.push(\r\n        new winston.transports.Console({\r\n          format: winston.format.combine(\r\n            winston.format.colorize(),\r\n            winston.format.simple()\r\n          )\r\n        })\r\n      );\r\n    } else {\r\n      // Production console transport with minimal output\r\n      transports.push(\r\n        new winston.transports.Console({\r\n          level: 'error', // Only errors in production console\r\n          format: winston.format.combine(\r\n            winston.format.timestamp(),\r\n            winston.format.json()\r\n          )\r\n        })\r\n      );\r\n    }\r\n\r\n    // File transport with rotation and compression for production\r\n    if (this.config.file) {\r\n      const fileTransport = new winston.transports.File({\r\n        filename: this.config.file,\r\n        format: logFormat,\r\n        maxsize: 10 * 1024 * 1024, // 10MB as specified\r\n        maxFiles: 5, // 5 files as specified\r\n        tailable: true,\r\n        zippedArchive: this.isProduction // Enable compression in production\r\n      });\r\n\r\n      // Add compression for existing files in production\r\n      if (this.isProduction) {\r\n        fileTransport.on('rotate', (oldFilename, newFilename) => {\r\n          this.compressLogFile(oldFilename);\r\n        });\r\n      }\r\n\r\n      transports.push(fileTransport);\r\n    }\r\n\r\n    // Environment-aware log levels\r\n    const logLevel = this.isProduction ? 'info' : this.config.level;\r\n\r\n    return winston.createLogger({\r\n      level: logLevel,\r\n      format: this.isProduction ? \r\n        winston.format.combine(\r\n          winston.format.timestamp(),\r\n          winston.format.json(),\r\n          winston.format((info) => {\r\n            // Add structured metadata\r\n            info.service = 'smart-ecommerce-api';\r\n            info.version = '1.0.0';\r\n            info.environment = configService.get('NODE_ENV');\r\n            info.instanceId = process.env.INSTANCE_ID || 'default';\r\n            return info;\r\n          })()\r\n        ) : this.config.format,\r\n      transports,\r\n      exitOnError: false\r\n    });\r\n  }\r\n\r\n  // Compress log file with gzip\r\n  compressLogFile(filePath) {\r\n    if (!this.isProduction) return;\r\n    \r\n    const gzipPath = `${filePath}.gz`;\r\n    const readStream = fs.createReadStream(filePath);\r\n    const writeStream = fs.createWriteStream(gzipPath);\r\n    const gzip = zlib.createGzip();\r\n\r\n    readStream\r\n      .pipe(gzip)\r\n      .pipe(writeStream)\r\n      .on('finish', () => {\r\n        fs.unlink(filePath, (err) => {\r\n          if (err) console.error('Error deleting original log file:', err);\r\n        });\r\n      });\r\n  }\r\n\r\n  // Log sampling for high-traffic scenarios\r\n  shouldSampleLog(level) {\r\n    if (!this.isProduction) return true;\r\n    \r\n    // Always log errors and warnings\r\n    if (level === 'error' || level === 'warn') return true;\r\n    \r\n    // Sample info and debug logs\r\n    this.logCount++;\r\n    return this.logCount % 10 === 0; // 10% sampling\r\n  }\r\n\r\n  // Performance monitoring for logging operations\r\n  measureLogPerformance(logFunction, ...args) {\r\n    const startTime = process.hrtime.bigint();\r\n    const result = logFunction.apply(this, args);\r\n    const endTime = process.hrtime.bigint();\r\n    \r\n    const duration = Number(endTime - startTime) / 1000000; // Convert to milliseconds\r\n    this.performanceMetrics.totalLogs++;\r\n    this.performanceMetrics.totalLogTime += duration;\r\n    this.performanceMetrics.averageLogTime = this.performanceMetrics.totalLogTime / this.performanceMetrics.totalLogs;\r\n    \r\n    return result;\r\n  }\r\n\r\n  // Log buffering mechanism\r\n  addToBuffer(level, message, meta) {\r\n    const logEntry = {\r\n      level,\r\n      message,\r\n      meta,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    \r\n    this.logBuffer.push(logEntry);\r\n    \r\n    // Flush buffer if it's full or if it's an error\r\n    if (this.logBuffer.length >= this.bufferSize || level === 'error') {\r\n      this.flushBuffer();\r\n    }\r\n  }\r\n\r\n  // Flush buffered logs\r\n  flushBuffer() {\r\n    if (this.logBuffer.length === 0) return;\r\n    \r\n    const logsToFlush = [...this.logBuffer];\r\n    this.logBuffer = [];\r\n    \r\n    logsToFlush.forEach(log => {\r\n      this.logger.log(log.level, log.message, log.meta);\r\n    });\r\n  }\r\n\r\n  // Start buffer flush interval\r\n  startBufferFlushInterval() {\r\n    setInterval(() => {\r\n      this.flushBuffer();\r\n    }, this.bufferTimeout);\r\n  }\r\n\r\n  // Request logging middleware with performance monitoring\r\n  requestLogger() {\r\n    return (req, res, next) => {\r\n      const start = Date.now();\r\n      \r\n      // Only log requests in production if sampling allows\r\n      if (!this.shouldSampleLog('info')) {\r\n        return next();\r\n      }\r\n      \r\n      // Log request with performance timing\r\n      this.measureLogPerformance(() => {\r\n        const logData = {\r\n          method: req.method,\r\n          url: req.originalUrl,\r\n          ip: req.ip,\r\n          userAgent: req.get('User-Agent'),\r\n          requestId: req.id || this.generateRequestId(),\r\n          timestamp: new Date().toISOString()\r\n        };\r\n        \r\n        if (this.isProduction) {\r\n          this.addToBuffer('info', 'HTTP Request', logData);\r\n        } else {\r\n          this.logger.info('HTTP Request', logData);\r\n        }\r\n      });\r\n\r\n      // Capture response\r\n      const originalSend = res.send;\r\n      res.send = (data) => {\r\n        const duration = Date.now() - start;\r\n        \r\n        this.measureLogPerformance(() => {\r\n          const responseData = {\r\n            method: req.method,\r\n            url: req.originalUrl,\r\n            statusCode: res.statusCode,\r\n            duration: `${duration}ms`,\r\n            requestId: req.id || this.generateRequestId(),\r\n            timestamp: new Date().toISOString()\r\n          };\r\n          \r\n          if (this.isProduction) {\r\n            this.addToBuffer('info', 'HTTP Response', responseData);\r\n          } else {\r\n            this.logger.info('HTTP Response', responseData);\r\n          }\r\n        });\r\n\r\n        return originalSend.call(res, data);\r\n      };\r\n\r\n      next();\r\n    };\r\n  }\r\n\r\n  // Error logging middleware with enhanced metadata\r\n  errorLogger() {\r\n    return (err, req, res, next) => {\r\n      const errorId = this.generateErrorId();\r\n      \r\n      this.measureLogPerformance(() => {\r\n        const errorData = {\r\n          errorId,\r\n          message: err.message,\r\n          stack: this.isProduction ? 'Hidden in production' : err.stack,\r\n          method: req.method,\r\n          url: req.originalUrl,\r\n          ip: req.ip,\r\n          userAgent: req.get('User-Agent'),\r\n          requestId: req.id || this.generateRequestId(),\r\n          timestamp: new Date().toISOString(),\r\n          body: this.isProduction ? {} : req.body,\r\n          headers: this.isProduction ? {} : req.headers,\r\n          service: 'smart-ecommerce-api',\r\n          version: '1.0.0',\r\n          environment: configService.get('NODE_ENV')\r\n        };\r\n        \r\n        if (this.isProduction) {\r\n          this.addToBuffer('error', 'Application Error', errorData);\r\n        } else {\r\n          this.logger.error('Application Error', errorData);\r\n        }\r\n      });\r\n\r\n      // Don't send error details in production\r\n      if (this.isProduction) {\r\n        res.status(500).json({\r\n          error: 'Internal server error',\r\n          errorId\r\n        });\r\n      } else {\r\n        next(err);\r\n      }\r\n    };\r\n  }\r\n\r\n  // Authentication logging with sampling\r\n  logAuth(event, userId, details = {}) {\r\n    if (!this.shouldSampleLog('info')) return;\r\n    \r\n    this.measureLogPerformance(() => {\r\n      const authData = {\r\n        event,\r\n        userId,\r\n        ip: details.ip,\r\n        userAgent: details.userAgent,\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV'),\r\n        ...details\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('info', 'Authentication Event', authData);\r\n      } else {\r\n        this.logger.info('Authentication Event', authData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Database logging with performance monitoring\r\n  logDatabase(operation, table, details = {}) {\r\n    if (!this.shouldSampleLog('info')) return;\r\n    \r\n    this.measureLogPerformance(() => {\r\n      const dbData = {\r\n        operation,\r\n        table,\r\n        duration: details.duration,\r\n        affected: details.affected,\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV'),\r\n        ...details\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('info', 'Database Operation', dbData);\r\n      } else {\r\n        this.logger.info('Database Operation', dbData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Payment logging with enhanced metadata\r\n  logPayment(event, details = {}) {\r\n    // Always log payment events (no sampling)\r\n    this.measureLogPerformance(() => {\r\n      const paymentData = {\r\n        event,\r\n        paymentMethod: details.paymentMethod,\r\n        amount: details.amount,\r\n        currency: details.currency,\r\n        status: details.status,\r\n        transactionId: details.transactionId,\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV'),\r\n        ...details\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('info', 'Payment Event', paymentData);\r\n      } else {\r\n        this.logger.info('Payment Event', paymentData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Order logging with sampling\r\n  logOrder(event, orderId, details = {}) {\r\n    if (!this.shouldSampleLog('info')) return;\r\n    \r\n    this.measureLogPerformance(() => {\r\n      const orderData = {\r\n        event,\r\n        orderId,\r\n        userId: details.userId,\r\n        total: details.total,\r\n        status: details.status,\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV'),\r\n        ...details\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('info', 'Order Event', orderData);\r\n      } else {\r\n        this.logger.info('Order Event', orderData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Security logging (always logged)\r\n  logSecurity(event, details = {}) {\r\n    this.measureLogPerformance(() => {\r\n      const securityData = {\r\n        event,\r\n        ip: details.ip,\r\n        userAgent: details.userAgent,\r\n        reason: details.reason,\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV'),\r\n        ...details\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('warn', 'Security Event', securityData);\r\n      } else {\r\n        this.logger.warn('Security Event', securityData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Performance logging with metrics\r\n  logPerformance(operation, duration, details = {}) {\r\n    this.measureLogPerformance(() => {\r\n      const perfData = {\r\n        operation,\r\n        duration: `${duration}ms`,\r\n        memory: process.memoryUsage(),\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV'),\r\n        loggerMetrics: this.performanceMetrics,\r\n        ...details\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('info', 'Performance Metric', perfData);\r\n      } else {\r\n        this.logger.info('Performance Metric', perfData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Business logic logging with sampling\r\n  logBusiness(event, details = {}) {\r\n    if (!this.shouldSampleLog('info')) return;\r\n    \r\n    this.measureLogPerformance(() => {\r\n      const businessData = {\r\n        event,\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV'),\r\n        ...details\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('info', 'Business Event', businessData);\r\n      } else {\r\n        this.logger.info('Business Event', businessData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Generate unique request ID\r\n  generateRequestId() {\r\n    return `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n\r\n  // Generate unique error ID\r\n  generateErrorId() {\r\n    return `err_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n\r\n  // Get logger instance\r\n  getLogger() {\r\n    return this.logger;\r\n  }\r\n\r\n  // Create child logger with context\r\n  child(context) {\r\n    return this.logger.child(context);\r\n  }\r\n\r\n  // Stream for Morgan HTTP logger\r\n  stream() {\r\n    return {\r\n      write: (message) => {\r\n        if (this.shouldSampleLog('info')) {\r\n          if (this.isProduction) {\r\n            this.addToBuffer('info', message.trim());\r\n          } else {\r\n            this.logger.info(message.trim());\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  // Log levels with performance monitoring and sampling\r\n  debug(message, meta = {}) {\r\n    if (!this.shouldSampleLog('debug')) return;\r\n    \r\n    this.measureLogPerformance(() => {\r\n      if (this.isProduction) {\r\n        this.addToBuffer('debug', message, meta);\r\n      } else {\r\n        this.logger.debug(message, meta);\r\n      }\r\n    });\r\n  }\r\n\r\n  info(message, meta = {}) {\r\n    if (!this.shouldSampleLog('info')) return;\r\n    \r\n    this.measureLogPerformance(() => {\r\n      if (this.isProduction) {\r\n        this.addToBuffer('info', message, meta);\r\n      } else {\r\n        this.logger.info(message, meta);\r\n      }\r\n    });\r\n  }\r\n\r\n  warn(message, meta = {}) {\r\n    this.measureLogPerformance(() => {\r\n      if (this.isProduction) {\r\n        this.addToBuffer('warn', message, meta);\r\n      } else {\r\n        this.logger.warn(message, meta);\r\n      }\r\n    });\r\n  }\r\n\r\n  error(message, meta = {}) {\r\n    this.measureLogPerformance(() => {\r\n      if (this.isProduction) {\r\n        this.addToBuffer('error', message, meta);\r\n      } else {\r\n        this.logger.error(message, meta);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Enhanced structured logging with metadata\r\n  logStructured(level, message, data = {}) {\r\n    this.measureLogPerformance(() => {\r\n      const structuredData = {\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV'),\r\n        instanceId: process.env.INSTANCE_ID || 'default',\r\n        timestamp: new Date().toISOString(),\r\n        ...data\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer(level, message, structuredData);\r\n      } else {\r\n        this.logger.log(level, message, structuredData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Query logging with sampling\r\n  logQuery(query, params = [], duration = null) {\r\n    if (!this.shouldSampleLog('debug')) return;\r\n    \r\n    this.measureLogPerformance(() => {\r\n      const queryData = {\r\n        query,\r\n        params,\r\n        duration: duration ? `${duration}ms` : null,\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV')\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('debug', 'Database Query', queryData);\r\n      } else {\r\n        this.logger.debug('Database Query', queryData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Cache logging with sampling\r\n  logCache(operation, key, hit = null, duration = null) {\r\n    if (!this.shouldSampleLog('debug')) return;\r\n    \r\n    this.measureLogPerformance(() => {\r\n      const cacheData = {\r\n        operation,\r\n        key,\r\n        hit,\r\n        duration: duration ? `${duration}ms` : null,\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV')\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('debug', 'Cache Operation', cacheData);\r\n      } else {\r\n        this.logger.debug('Cache Operation', cacheData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // External service logging\r\n  logExternal(service, operation, details = {}) {\r\n    this.measureLogPerformance(() => {\r\n      const externalData = {\r\n        service,\r\n        operation,\r\n        duration: details.duration,\r\n        status: details.status,\r\n        timestamp: new Date().toISOString(),\r\n        service: 'smart-ecommerce-api',\r\n        version: '1.0.0',\r\n        environment: configService.get('NODE_ENV'),\r\n        ...details\r\n      };\r\n      \r\n      if (this.isProduction) {\r\n        this.addToBuffer('info', 'External Service Call', externalData);\r\n      } else {\r\n        this.logger.info('External Service Call', externalData);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Get performance metrics\r\n  getPerformanceMetrics() {\r\n    return {\r\n      ...this.performanceMetrics,\r\n      bufferSize: this.logBuffer.length,\r\n      isProduction: this.isProduction\r\n    };\r\n  }\r\n\r\n  // Cleanup with buffer flush\r\n  cleanup() {\r\n    this.flushBuffer();\r\n    this.logger.info('Logger cleanup completed');\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nconst loggerService = new LoggerService();\r\n\r\nmodule.exports = {\r\n  LoggerService,\r\n  loggerService\r\n};"],"mappings":"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","ignoreList":[]}