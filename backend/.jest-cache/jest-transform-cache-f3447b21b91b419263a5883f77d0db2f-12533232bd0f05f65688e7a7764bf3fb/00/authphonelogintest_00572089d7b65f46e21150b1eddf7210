f68593e993a0b88b22ba328358735308
// Mock services
_getJestObj().mock('../services/emailService');
_getJestObj().mock('../services/phoneValidationService');
_getJestObj().mock('../services/passwordService');
_getJestObj().mock('../services/config', () => ({
  configService: {
    getSecurityConfig: () => ({
      bcryptRounds: 12,
      passwordMinLength: 8,
      passwordMaxLength: 128
    }),
    getPasswordPolicyConfig: () => ({
      bcryptRounds: 12,
      passwordMinLength: 8,
      passwordMaxLength: 128,
      minStrengthScore: 2
    })
  }
}));
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const request = require('supertest');
const express = require('express');
const {
  PrismaClient
} = require('@prisma/client');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const authRoutes = require('../routes/auth');
const {
  emailService
} = require('../services/emailService');
const {
  phoneValidationService
} = require('../services/phoneValidationService');
const {
  passwordService
} = require('../services/passwordService');
const app = express();
app.use(express.json());
app.use('/auth', authRoutes);
describe('Auth Phone Login Tests', () => {
  let prisma;
  let testUser;
  beforeAll(async () => {
    prisma = new PrismaClient();

    // Create a test user with both email and phone
    const hashedPassword = await bcrypt.hash('TestPassword123!', 10);
    testUser = await prisma.user.create({
      data: {
        email: 'test@example.com',
        phone: '+8801712345678',
        password: hashedPassword,
        firstName: 'Test',
        lastName: 'User',
        role: 'CUSTOMER',
        status: 'ACTIVE'
      }
    });
  });
  afterAll(async () => {
    // Clean up test data
    if (testUser) {
      await prisma.user.delete({
        where: {
          id: testUser.id
        }
      });
    }
    await prisma.$disconnect();
  });
  beforeEach(() => {
    jest.clearAllMocks();
  });
  describe('POST /auth/login', () => {
    describe('Email Login', () => {
      it('should login successfully with valid email and password', async () => {
        const response = await request(app).post('/auth/login').send({
          identifier: 'test@example.com',
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(200);
        expect(response.body.message).toBe('Login successful');
        expect(response.body.user.email).toBe('test@example.com');
        expect(response.body.loginType).toBe('email');
        expect(response.body.token).toBeDefined();
      });
      it('should reject login with invalid email', async () => {
        const response = await request(app).post('/auth/login').send({
          identifier: 'invalid@example.com',
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(401);
        expect(response.body.error).toBe('Invalid credentials');
      });
      it('should reject login with invalid email format', async () => {
        emailService.validateEmail.mockReturnValue(false);
        const response = await request(app).post('/auth/login').send({
          identifier: 'invalid-email',
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(400);
        expect(response.body.error).toBe('Invalid email format');
      });
    });
    describe('Phone Login', () => {
      it('should login successfully with valid phone and password', async () => {
        phoneValidationService.validateForUseCase.mockReturnValue({
          isValid: true,
          normalizedPhone: '+8801712345678',
          type: 'mobile',
          operator: 'Grameenphone',
          canLogin: true
        });
        const response = await request(app).post('/auth/login').send({
          identifier: '01712345678',
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(200);
        expect(response.body.message).toBe('Login successful');
        expect(response.body.user.phone).toBe('+8801712345678');
        expect(response.body.loginType).toBe('phone');
        expect(response.body.token).toBeDefined();
      });
      it('should reject login with invalid phone format', async () => {
        phoneValidationService.validateForUseCase.mockReturnValue({
          isValid: false,
          error: 'Invalid phone format',
          errorBn: 'অবৈধ ফোন ফরম্যাট',
          code: 'INVALID_FORMAT'
        });
        const response = await request(app).post('/auth/login').send({
          identifier: '12345',
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(400);
        expect(response.body.error).toBe('Invalid phone format');
      });
      it('should reject login with non-mobile phone', async () => {
        phoneValidationService.validateForUseCase.mockReturnValue({
          isValid: false,
          error: 'Only mobile numbers can be used for login',
          errorBn: 'শুধুমাত্রমাত্র মোবাইল নম্বর দিয়ে লগিন করা যায়',
          code: 'MOBILE_ONLY'
        });
        const response = await request(app).post('/auth/login').send({
          identifier: '0212345678',
          // Landline
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(400);
        expect(response.body.error).toBe('Invalid phone format');
      });
    });
    describe('Password Validation', () => {
      it('should reject login with wrong password', async () => {
        const response = await request(app).post('/auth/login').send({
          identifier: 'test@example.com',
          password: 'WrongPassword123!'
        });
        expect(response.status).toBe(401);
        expect(response.body.error).toBe('Invalid credentials');
      });
    });
    describe('User Status Validation', () => {
      it('should reject login for pending user', async () => {
        // Create a pending user
        const pendingUser = await prisma.user.create({
          data: {
            email: 'pending@example.com',
            password: await bcrypt.hash('TestPassword123!', 10),
            firstName: 'Pending',
            lastName: 'User',
            role: 'CUSTOMER',
            status: 'PENDING'
          }
        });
        const response = await request(app).post('/auth/login').send({
          identifier: 'pending@example.com',
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(403);
        expect(response.body.error).toBe('Account not verified');
        expect(response.body.requiresVerification).toBe(true);
        expect(response.body.verificationType).toBe('email');

        // Clean up
        await prisma.user.delete({
          where: {
            id: pendingUser.id
          }
        });
      });
    });
    describe('Input Validation', () => {
      it('should reject login with missing identifier', async () => {
        const response = await request(app).post('/auth/login').send({
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(400);
        expect(response.body.error).toBe('Validation failed');
      });
      it('should reject login with missing password', async () => {
        const response = await request(app).post('/auth/login').send({
          identifier: 'test@example.com'
        });
        expect(response.status).toBe(400);
        expect(response.body.error).toBe('Validation failed');
      });
      it('should reject login with empty identifier', async () => {
        const response = await request(app).post('/auth/login').send({
          identifier: '',
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(400);
        expect(response.body.error).toBe('Validation failed');
      });
    });
    describe('JWT Token Generation', () => {
      it('should generate valid JWT token', async () => {
        const response = await request(app).post('/auth/login').send({
          identifier: 'test@example.com',
          password: 'TestPassword123!'
        });
        expect(response.status).toBe(200);
        expect(response.body.token).toBeDefined();

        // Verify token
        const decoded = jwt.verify(response.body.token, process.env.JWT_SECRET || 'test-secret');
        expect(decoded.userId).toBe(testUser.id);
        expect(decoded.email).toBe(testUser.email);
        expect(decoded.role).toBe(testUser.role);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJjb25maWdTZXJ2aWNlIiwiZ2V0U2VjdXJpdHlDb25maWciLCJiY3J5cHRSb3VuZHMiLCJwYXNzd29yZE1pbkxlbmd0aCIsInBhc3N3b3JkTWF4TGVuZ3RoIiwiZ2V0UGFzc3dvcmRQb2xpY3lDb25maWciLCJtaW5TdHJlbmd0aFNjb3JlIiwiamVzdCIsInJlcXVpcmUiLCJyZXF1ZXN0IiwiZXhwcmVzcyIsIlByaXNtYUNsaWVudCIsImJjcnlwdCIsImp3dCIsImF1dGhSb3V0ZXMiLCJlbWFpbFNlcnZpY2UiLCJwaG9uZVZhbGlkYXRpb25TZXJ2aWNlIiwicGFzc3dvcmRTZXJ2aWNlIiwiYXBwIiwidXNlIiwianNvbiIsImRlc2NyaWJlIiwicHJpc21hIiwidGVzdFVzZXIiLCJiZWZvcmVBbGwiLCJoYXNoZWRQYXNzd29yZCIsImhhc2giLCJ1c2VyIiwiY3JlYXRlIiwiZGF0YSIsImVtYWlsIiwicGhvbmUiLCJwYXNzd29yZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicm9sZSIsInN0YXR1cyIsImFmdGVyQWxsIiwiZGVsZXRlIiwid2hlcmUiLCJpZCIsIiRkaXNjb25uZWN0IiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInJlc3BvbnNlIiwicG9zdCIsInNlbmQiLCJpZGVudGlmaWVyIiwiZXhwZWN0IiwidG9CZSIsImJvZHkiLCJtZXNzYWdlIiwibG9naW5UeXBlIiwidG9rZW4iLCJ0b0JlRGVmaW5lZCIsImVycm9yIiwidmFsaWRhdGVFbWFpbCIsIm1vY2tSZXR1cm5WYWx1ZSIsInZhbGlkYXRlRm9yVXNlQ2FzZSIsImlzVmFsaWQiLCJub3JtYWxpemVkUGhvbmUiLCJ0eXBlIiwib3BlcmF0b3IiLCJjYW5Mb2dpbiIsImVycm9yQm4iLCJjb2RlIiwicGVuZGluZ1VzZXIiLCJyZXF1aXJlc1ZlcmlmaWNhdGlvbiIsInZlcmlmaWNhdGlvblR5cGUiLCJkZWNvZGVkIiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJ1c2VySWQiXSwic291cmNlcyI6WyJhdXRoLXBob25lLWxvZ2luLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCB7IFByaXNtYUNsaWVudCB9ID0gcmVxdWlyZSgnQHByaXNtYS9jbGllbnQnKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcblxyXG4vLyBNb2NrIHNlcnZpY2VzXHJcbmplc3QubW9jaygnLi4vc2VydmljZXMvZW1haWxTZXJ2aWNlJyk7XHJcbmplc3QubW9jaygnLi4vc2VydmljZXMvcGhvbmVWYWxpZGF0aW9uU2VydmljZScpO1xyXG5qZXN0Lm1vY2soJy4uL3NlcnZpY2VzL3Bhc3N3b3JkU2VydmljZScpO1xyXG5qZXN0Lm1vY2soJy4uL3NlcnZpY2VzL2NvbmZpZycsICgpID0+ICh7XHJcbiAgY29uZmlnU2VydmljZToge1xyXG4gICAgZ2V0U2VjdXJpdHlDb25maWc6ICgpID0+ICh7XHJcbiAgICAgIGJjcnlwdFJvdW5kczogMTIsXHJcbiAgICAgIHBhc3N3b3JkTWluTGVuZ3RoOiA4LFxyXG4gICAgICBwYXNzd29yZE1heExlbmd0aDogMTI4XHJcbiAgICB9KSxcclxuICAgIGdldFBhc3N3b3JkUG9saWN5Q29uZmlnOiAoKSA9PiAoe1xyXG4gICAgICBiY3J5cHRSb3VuZHM6IDEyLFxyXG4gICAgICBwYXNzd29yZE1pbkxlbmd0aDogOCxcclxuICAgICAgcGFzc3dvcmRNYXhMZW5ndGg6IDEyOCxcclxuICAgICAgbWluU3RyZW5ndGhTY29yZTogMlxyXG4gICAgfSlcclxuICB9XHJcbn0pKTtcclxuXHJcbmNvbnN0IGF1dGhSb3V0ZXMgPSByZXF1aXJlKCcuLi9yb3V0ZXMvYXV0aCcpO1xyXG5jb25zdCB7IGVtYWlsU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvZW1haWxTZXJ2aWNlJyk7XHJcbmNvbnN0IHsgcGhvbmVWYWxpZGF0aW9uU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvcGhvbmVWYWxpZGF0aW9uU2VydmljZScpO1xyXG5jb25zdCB7IHBhc3N3b3JkU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvcGFzc3dvcmRTZXJ2aWNlJyk7XHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xyXG5hcHAudXNlKCcvYXV0aCcsIGF1dGhSb3V0ZXMpO1xyXG5cclxuZGVzY3JpYmUoJ0F1dGggUGhvbmUgTG9naW4gVGVzdHMnLCAoKSA9PiB7XHJcbiAgbGV0IHByaXNtYTtcclxuICBsZXQgdGVzdFVzZXI7XHJcblxyXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XHJcbiAgICBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XHJcbiAgICBcclxuICAgIC8vIENyZWF0ZSBhIHRlc3QgdXNlciB3aXRoIGJvdGggZW1haWwgYW5kIHBob25lXHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKCdUZXN0UGFzc3dvcmQxMjMhJywgMTApO1xyXG4gICAgdGVzdFVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcclxuICAgICAgICBwaG9uZTogJys4ODAxNzEyMzQ1Njc4JyxcclxuICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgZmlyc3ROYW1lOiAnVGVzdCcsXHJcbiAgICAgICAgbGFzdE5hbWU6ICdVc2VyJyxcclxuICAgICAgICByb2xlOiAnQ1VTVE9NRVInLFxyXG4gICAgICAgIHN0YXR1czogJ0FDVElWRSdcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcclxuICAgIC8vIENsZWFuIHVwIHRlc3QgZGF0YVxyXG4gICAgaWYgKHRlc3RVc2VyKSB7XHJcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyLmRlbGV0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHRlc3RVc2VyLmlkIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCBwcmlzbWEuJGRpc2Nvbm5lY3QoKTtcclxuICB9KTtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1BPU1QgL2F1dGgvbG9naW4nLCAoKSA9PiB7XHJcbiAgICBkZXNjcmliZSgnRW1haWwgTG9naW4nLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgbG9naW4gc3VjY2Vzc2Z1bGx5IHdpdGggdmFsaWQgZW1haWwgYW5kIHBhc3N3b3JkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgICAucG9zdCgnL2F1dGgvbG9naW4nKVxyXG4gICAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgICBpZGVudGlmaWVyOiAndGVzdEBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnVGVzdFBhc3N3b3JkMTIzISdcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubWVzc2FnZSkudG9CZSgnTG9naW4gc3VjY2Vzc2Z1bCcpO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnVzZXIuZW1haWwpLnRvQmUoJ3Rlc3RAZXhhbXBsZS5jb20nKTtcclxuICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5sb2dpblR5cGUpLnRvQmUoJ2VtYWlsJyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudG9rZW4pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgbG9naW4gd2l0aCBpbnZhbGlkIGVtYWlsJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgICAucG9zdCgnL2F1dGgvbG9naW4nKVxyXG4gICAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgICBpZGVudGlmaWVyOiAnaW52YWxpZEBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnVGVzdFBhc3N3b3JkMTIzISdcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQmUoJ0ludmFsaWQgY3JlZGVudGlhbHMnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHJlamVjdCBsb2dpbiB3aXRoIGludmFsaWQgZW1haWwgZm9ybWF0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGVtYWlsU2VydmljZS52YWxpZGF0ZUVtYWlsLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcclxuICAgICAgICAgIC5wb3N0KCcvYXV0aC9sb2dpbicpXHJcbiAgICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICAgIGlkZW50aWZpZXI6ICdpbnZhbGlkLWVtYWlsJyxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6ICdUZXN0UGFzc3dvcmQxMjMhJ1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcclxuICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9CZSgnSW52YWxpZCBlbWFpbCBmb3JtYXQnKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnUGhvbmUgTG9naW4nLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgbG9naW4gc3VjY2Vzc2Z1bGx5IHdpdGggdmFsaWQgcGhvbmUgYW5kIHBhc3N3b3JkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHBob25lVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVGb3JVc2VDYXNlLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICBpc1ZhbGlkOiB0cnVlLFxyXG4gICAgICAgICAgbm9ybWFsaXplZFBob25lOiAnKzg4MDE3MTIzNDU2NzgnLFxyXG4gICAgICAgICAgdHlwZTogJ21vYmlsZScsXHJcbiAgICAgICAgICBvcGVyYXRvcjogJ0dyYW1lZW5waG9uZScsXHJcbiAgICAgICAgICBjYW5Mb2dpbjogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxyXG4gICAgICAgICAgLnBvc3QoJy9hdXRoL2xvZ2luJylcclxuICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogJzAxNzEyMzQ1Njc4JyxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6ICdUZXN0UGFzc3dvcmQxMjMhJ1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcclxuICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5tZXNzYWdlKS50b0JlKCdMb2dpbiBzdWNjZXNzZnVsJyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudXNlci5waG9uZSkudG9CZSgnKzg4MDE3MTIzNDU2NzgnKTtcclxuICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5sb2dpblR5cGUpLnRvQmUoJ3Bob25lJyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudG9rZW4pLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgbG9naW4gd2l0aCBpbnZhbGlkIHBob25lIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBwaG9uZVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlRm9yVXNlQ2FzZS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgcGhvbmUgZm9ybWF0JyxcclxuICAgICAgICAgIGVycm9yQm46ICfgpoXgpqzgp4jgpqcg4Kar4KeL4KaoIOCmq+CmsOCmruCnjeCmr+CmvuCmnycsXHJcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9GT1JNQVQnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgICAucG9zdCgnL2F1dGgvbG9naW4nKVxyXG4gICAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgICBpZGVudGlmaWVyOiAnMTIzNDUnLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogJ1Rlc3RQYXNzd29yZDEyMyEnXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdJbnZhbGlkIHBob25lIGZvcm1hdCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGxvZ2luIHdpdGggbm9uLW1vYmlsZSBwaG9uZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBwaG9uZVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlRm9yVXNlQ2FzZS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ09ubHkgbW9iaWxlIG51bWJlcnMgY2FuIGJlIHVzZWQgZm9yIGxvZ2luJyxcclxuICAgICAgICAgIGVycm9yQm46ICfgprbgp4Hgpqfgp4Hgpq7gpr7gpqTgp43gprDgpq7gpr7gpqTgp43gprAg4Kau4KeL4Kas4Ka+4KaH4KayIOCmqOCmruCnjeCmrOCmsCDgpqbgpr/gpq/gprzgp4cg4Kay4KaX4Ka/4KaoIOCmleCmsOCmviDgpq/gpr7gpq/gprwnLFxyXG4gICAgICAgICAgY29kZTogJ01PQklMRV9PTkxZJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxyXG4gICAgICAgICAgLnBvc3QoJy9hdXRoL2xvZ2luJylcclxuICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogJzAyMTIzNDU2NzgnLCAvLyBMYW5kbGluZVxyXG4gICAgICAgICAgICBwYXNzd29yZDogJ1Rlc3RQYXNzd29yZDEyMyEnXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdJbnZhbGlkIHBob25lIGZvcm1hdCcpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdQYXNzd29yZCBWYWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIHJlamVjdCBsb2dpbiB3aXRoIHdyb25nIHBhc3N3b3JkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgICAucG9zdCgnL2F1dGgvbG9naW4nKVxyXG4gICAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgICBpZGVudGlmaWVyOiAndGVzdEBleGFtcGxlLmNvbScsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnV3JvbmdQYXNzd29yZDEyMyEnXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDEpO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdJbnZhbGlkIGNyZWRlbnRpYWxzJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ1VzZXIgU3RhdHVzIFZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGxvZ2luIGZvciBwZW5kaW5nIHVzZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgcGVuZGluZyB1c2VyXHJcbiAgICAgICAgY29uc3QgcGVuZGluZ1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBlbWFpbDogJ3BlbmRpbmdAZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogYXdhaXQgYmNyeXB0Lmhhc2goJ1Rlc3RQYXNzd29yZDEyMyEnLCAxMCksXHJcbiAgICAgICAgICAgIGZpcnN0TmFtZTogJ1BlbmRpbmcnLFxyXG4gICAgICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxyXG4gICAgICAgICAgICByb2xlOiAnQ1VTVE9NRVInLFxyXG4gICAgICAgICAgICBzdGF0dXM6ICdQRU5ESU5HJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxyXG4gICAgICAgICAgLnBvc3QoJy9hdXRoL2xvZ2luJylcclxuICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogJ3BlbmRpbmdAZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogJ1Rlc3RQYXNzd29yZDEyMyEnXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDMpO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdBY2NvdW50IG5vdCB2ZXJpZmllZCcpO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnJlcXVpcmVzVmVyaWZpY2F0aW9uKS50b0JlKHRydWUpO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnZlcmlmaWNhdGlvblR5cGUpLnRvQmUoJ2VtYWlsJyk7XHJcblxyXG4gICAgICAgIC8vIENsZWFuIHVwXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnVzZXIuZGVsZXRlKHtcclxuICAgICAgICAgIHdoZXJlOiB7IGlkOiBwZW5kaW5nVXNlci5pZCB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0lucHV0IFZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGxvZ2luIHdpdGggbWlzc2luZyBpZGVudGlmaWVyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXHJcbiAgICAgICAgICAucG9zdCgnL2F1dGgvbG9naW4nKVxyXG4gICAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgICBwYXNzd29yZDogJ1Rlc3RQYXNzd29yZDEyMyEnXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdWYWxpZGF0aW9uIGZhaWxlZCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGxvZ2luIHdpdGggbWlzc2luZyBwYXNzd29yZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxyXG4gICAgICAgICAgLnBvc3QoJy9hdXRoL2xvZ2luJylcclxuICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogJ3Rlc3RAZXhhbXBsZS5jb20nXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0JlKCdWYWxpZGF0aW9uIGZhaWxlZCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGxvZ2luIHdpdGggZW1wdHkgaWRlbnRpZmllcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxyXG4gICAgICAgICAgLnBvc3QoJy9hdXRoL2xvZ2luJylcclxuICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogJycsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnVGVzdFBhc3N3b3JkMTIzISdcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQmUoJ1ZhbGlkYXRpb24gZmFpbGVkJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ0pXVCBUb2tlbiBHZW5lcmF0aW9uJywgKCkgPT4ge1xyXG4gICAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHZhbGlkIEpXVCB0b2tlbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxyXG4gICAgICAgICAgLnBvc3QoJy9hdXRoL2xvZ2luJylcclxuICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogJ3Rlc3RAZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogJ1Rlc3RQYXNzd29yZDEyMyEnXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xyXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnRva2VuKS50b0JlRGVmaW5lZCgpO1xyXG5cclxuICAgICAgICAvLyBWZXJpZnkgdG9rZW5cclxuICAgICAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeShyZXNwb25zZS5ib2R5LnRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd0ZXN0LXNlY3JldCcpO1xyXG4gICAgICAgIGV4cGVjdChkZWNvZGVkLnVzZXJJZCkudG9CZSh0ZXN0VXNlci5pZCk7XHJcbiAgICAgICAgZXhwZWN0KGRlY29kZWQuZW1haWwpLnRvQmUodGVzdFVzZXIuZW1haWwpO1xyXG4gICAgICAgIGV4cGVjdChkZWNvZGVkLnJvbGUpLnRvQmUodGVzdFVzZXIucm9sZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pOyJdLCJtYXBwaW5ncyI6IkFBTUE7QUFDQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsMEJBQTBCLENBQUM7QUFDckNELFdBQUEsR0FBS0MsSUFBSSxDQUFDLG9DQUFvQyxDQUFDO0FBQy9DRCxXQUFBLEdBQUtDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQztBQUN4Q0QsV0FBQSxHQUFLQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsT0FBTztFQUNyQ0MsYUFBYSxFQUFFO0lBQ2JDLGlCQUFpQixFQUFFQSxDQUFBLE1BQU87TUFD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