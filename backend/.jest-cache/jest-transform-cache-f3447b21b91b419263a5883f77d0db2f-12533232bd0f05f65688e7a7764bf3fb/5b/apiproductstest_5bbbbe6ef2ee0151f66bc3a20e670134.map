{"version":3,"names":["request","require","app","TEST_CONFIG","createTestUser","createTestAdmin","createTestCategory","createTestBrand","createTestProduct","cleanupTestData","makeAuthenticatedRequest","validateResponseStructure","prisma","describe","testUser","adminUser","testCategory","testBrand","testProduct","beforeEach","category","brand","afterEach","it","response","get","expect","status","toBe","body","toHaveProperty","pagination","products","Array","isArray","length","product","Promise","all","name","toBeLessThanOrEqual","page","limit","id","forEach","searchMatches","some","toLowerCase","includes","nameEn","shortDescription","price","parseFloat","regularPrice","toBeGreaterThanOrEqual","sortOptions","sortBy","nameBn","toBeGreaterThan","fakeId","slug","productData","sku","categoryId","brandId","salePrice","costPrice","stockQuantity","lowStockThreshold","description","warrantyPeriod","warrantyType","token","post","send","incompleteData","invalidData","updateData","anotherProduct","productToDelete","deletedProduct","findUnique","where","toBeNull","productWithOrder","createTestOrder","isFeatured","bdProductData","bdtProduct","maliciousQuery","encodeURIComponent","productCount","count","xssPayload","toContain","not","promises","fill","map","responses","rateLimitedResponse","find","res","toBeDefined"],"sources":["api-products.test.js"],"sourcesContent":["/**\r\n * Product Management API Endpoint Tests\r\n * \r\n * This test suite covers all product management endpoints including:\r\n * - Get all products with filtering and pagination\r\n * - Get product by ID\r\n * - Get product by slug\r\n * - Create product (admin only)\r\n * - Update product (admin only)\r\n * - Delete product (admin only)\r\n * - Get featured products\r\n * - Input validation\r\n * - Authorization checks\r\n * - Error handling\r\n */\r\n\r\nconst request = require('supertest');\r\nconst { app } = require('../index');\r\nconst { \r\n  TEST_CONFIG, \r\n  createTestUser, \r\n  createTestAdmin,\r\n  createTestCategory,\r\n  createTestBrand,\r\n  createTestProduct,\r\n  cleanupTestData,\r\n  makeAuthenticatedRequest,\r\n  validateResponseStructure,\r\n  prisma \r\n} = require('./api-test-utils');\r\n\r\ndescribe('Product Management API Endpoints', () => {\r\n  let testUser, adminUser, testCategory, testBrand, testProduct;\r\n\r\n  beforeEach(async () => {\r\n    // Clean up before each test\r\n    await cleanupTestData();\r\n    \r\n    // Create test data\r\n    testUser = await createTestUser();\r\n    adminUser = await createTestAdmin();\r\n    testCategory = await createTestCategory();\r\n    testBrand = await createTestBrand();\r\n    testProduct = await createTestProduct({ \r\n      category: testCategory, \r\n      brand: testBrand \r\n    });\r\n  });\r\n\r\n  afterEach(async () => {\r\n    // Clean up after each test\r\n    await cleanupTestData();\r\n  });\r\n\r\n  describe('GET /api/v1/products', () => {\r\n    /**\r\n     * Test successful retrieval of all products\r\n     */\r\n    it('should retrieve all products successfully', async () => {\r\n      const response = await request(app)\r\n        .get('/api/v1/products');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('products');\r\n      expect(response.body).toHaveProperty('pagination');\r\n      \r\n      // Verify pagination structure\r\n      expect(response.body.pagination).toHaveProperty('page');\r\n      expect(response.body.pagination).toHaveProperty('limit');\r\n      expect(response.body.pagination).toHaveProperty('total');\r\n      expect(response.body.pagination).toHaveProperty('pages');\r\n      \r\n      // Verify product data structure\r\n      const products = response.body.products;\r\n      expect(Array.isArray(products)).toBe(true);\r\n      \r\n      if (products.length > 0) {\r\n        const product = products[0];\r\n        expect(product).toHaveProperty('id');\r\n        expect(product).toHaveProperty('name');\r\n        expect(product).toHaveProperty('nameEn');\r\n        expect(product).toHaveProperty('slug');\r\n        expect(product).toHaveProperty('sku');\r\n        expect(product).toHaveProperty('regularPrice');\r\n        expect(product).toHaveProperty('salePrice');\r\n        expect(product).toHaveProperty('status');\r\n        expect(product).toHaveProperty('category');\r\n        expect(product).toHaveProperty('brand');\r\n        expect(product).toHaveProperty('images');\r\n        expect(product).toHaveProperty('_count');\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Test pagination parameters\r\n     */\r\n    it('should respect pagination parameters', async () => {\r\n      // Create additional products\r\n      await Promise.all([\r\n        createTestProduct({ name: 'Product 1' }),\r\n        createTestProduct({ name: 'Product 2' }),\r\n        createTestProduct({ name: 'Product 3' })\r\n      ]);\r\n\r\n      const response = await request(app)\r\n        .get('/api/v1/products?page=1&limit=2');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.products.length).toBeLessThanOrEqual(2);\r\n      expect(response.body.pagination.page).toBe(1);\r\n      expect(response.body.pagination.limit).toBe(2);\r\n    });\r\n\r\n    /**\r\n     * Test category filtering\r\n     */\r\n    it('should filter products by category', async () => {\r\n      const response = await request(app)\r\n        .get(`/api/v1/products?category=${testCategory.id}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      const products = response.body.products;\r\n      \r\n      if (products.length > 0) {\r\n        products.forEach(product => {\r\n          expect(product.category.id).toBe(testCategory.id);\r\n        });\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Test brand filtering\r\n     */\r\n    it('should filter products by brand', async () => {\r\n      const response = await request(app)\r\n        .get(`/api/v1/products?brand=${testBrand.id}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      const products = response.body.products;\r\n      \r\n      if (products.length > 0) {\r\n        products.forEach(product => {\r\n          expect(product.brand.id).toBe(testBrand.id);\r\n        });\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Test search functionality\r\n     */\r\n    it('should search products by name and description', async () => {\r\n      const response = await request(app)\r\n        .get('/api/v1/products?search=Test');\r\n\r\n      expect(response.status).toBe(200);\r\n      const products = response.body.products;\r\n      \r\n      if (products.length > 0) {\r\n        const searchMatches = products.some(product => \r\n          product.name.toLowerCase().includes('test'.toLowerCase()) ||\r\n          product.nameEn.toLowerCase().includes('test'.toLowerCase()) ||\r\n          (product.shortDescription && product.shortDescription.toLowerCase().includes('test'.toLowerCase()))\r\n        );\r\n        expect(searchMatches).toBe(true);\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Test price range filtering\r\n     */\r\n    it('should filter products by price range', async () => {\r\n      const response = await request(app)\r\n        .get('/api/v1/products?minPrice=50&maxPrice=150');\r\n\r\n      expect(response.status).toBe(200);\r\n      const products = response.body.products;\r\n      \r\n      if (products.length > 0) {\r\n        products.forEach(product => {\r\n          const price = parseFloat(product.regularPrice);\r\n          expect(price).toBeGreaterThanOrEqual(50);\r\n          expect(price).toBeLessThanOrEqual(150);\r\n        });\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Test status filtering\r\n     */\r\n    it('should filter products by status', async () => {\r\n      // Create inactive product\r\n      await createTestProduct({ status: 'INACTIVE' });\r\n\r\n      const response = await request(app)\r\n        .get('/api/v1/products?status=ACTIVE');\r\n\r\n      expect(response.status).toBe(200);\r\n      const products = response.body.products;\r\n      \r\n      if (products.length > 0) {\r\n        products.forEach(product => {\r\n          expect(product.status).toBe('ACTIVE');\r\n        });\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Test sorting functionality\r\n     */\r\n    it('should sort products by different fields', async () => {\r\n      const sortOptions = ['price', 'name', 'createdAt', 'stockQuantity'];\r\n      \r\n      for (const sortBy of sortOptions) {\r\n        const response = await request(app)\r\n          .get(`/api/v1/products?sortBy=${sortBy}&sortOrder=asc`);\r\n\r\n        expect(response.status).toBe(200);\r\n        expect(response.body.products.length).toBeGreaterThanOrEqual(0);\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Test Bangladesh-specific search in Bengali\r\n     */\r\n    it('should search products by Bengali name', async () => {\r\n      // Create product with Bengali name\r\n      await createTestProduct({ \r\n        nameBn: 'টেস্ট পণ্য',\r\n        nameEn: 'Test Product'\r\n      });\r\n\r\n      const response = await request(app)\r\n        .get('/api/v1/products?search=টেস্ট');\r\n\r\n      expect(response.status).toBe(200);\r\n      const products = response.body.products;\r\n      expect(products.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    /**\r\n     * Test validation of query parameters\r\n     */\r\n    it('should validate query parameters', async () => {\r\n      const response = await request(app)\r\n        .get('/api/v1/products?page=-1&limit=0&minPrice=-50');\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body).toHaveProperty('error', 'Validation failed');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/v1/products/:id', () => {\r\n    /**\r\n     * Test successful retrieval of product by ID\r\n     */\r\n    it('should retrieve product by ID successfully', async () => {\r\n      const response = await request(app)\r\n        .get(`/api/v1/products/${testProduct.id}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('product');\r\n      \r\n      const product = response.body.product;\r\n      expect(product.id).toBe(testProduct.id);\r\n      expect(product).toHaveProperty('name');\r\n      expect(product).toHaveProperty('nameEn');\r\n      expect(product).toHaveProperty('nameBn');\r\n      expect(product).toHaveProperty('slug');\r\n      expect(product).toHaveProperty('sku');\r\n      expect(product).toHaveProperty('shortDescription');\r\n      expect(product).toHaveProperty('description');\r\n      expect(product).toHaveProperty('regularPrice');\r\n      expect(product).toHaveProperty('salePrice');\r\n      expect(product).toHaveProperty('costPrice');\r\n      expect(product).toHaveProperty('stockQuantity');\r\n      expect(product).toHaveProperty('lowStockThreshold');\r\n      expect(product).toHaveProperty('status');\r\n      expect(product).toHaveProperty('warrantyPeriod');\r\n      expect(product).toHaveProperty('warrantyType');\r\n      expect(product).toHaveProperty('category');\r\n      expect(product).toHaveProperty('brand');\r\n      expect(product).toHaveProperty('images');\r\n      expect(product).toHaveProperty('specifications');\r\n      expect(product).toHaveProperty('variants');\r\n      expect(product).toHaveProperty('reviews');\r\n      expect(product).toHaveProperty('avgRating');\r\n      expect(product).toHaveProperty('_count');\r\n    });\r\n\r\n    /**\r\n     * Test retrieval of non-existent product\r\n     */\r\n    it('should return 404 for non-existent product', async () => {\r\n      const fakeId = '550e8400-e29b-41d4-a716-446655440000';\r\n      \r\n      const response = await request(app)\r\n        .get(`/api/v1/products/${fakeId}`);\r\n\r\n      expect(response.status).toBe(404);\r\n      expect(response.body).toHaveProperty('error', 'Product not found');\r\n    });\r\n\r\n    /**\r\n     * Test invalid UUID format\r\n     */\r\n    it('should return validation error for invalid UUID format', async () => {\r\n      const response = await request(app)\r\n        .get('/api/v1/products/invalid-uuid');\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body).toHaveProperty('error', 'Validation failed');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/v1/products/slug/:slug', () => {\r\n    /**\r\n     * Test successful retrieval of product by slug\r\n     */\r\n    it('should retrieve product by slug successfully', async () => {\r\n      const response = await request(app)\r\n        .get(`/api/v1/products/slug/${testProduct.slug}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('product');\r\n      expect(response.body.product.slug).toBe(testProduct.slug);\r\n    });\r\n\r\n    /**\r\n     * Test retrieval of non-existent product by slug\r\n     */\r\n    it('should return 404 for non-existent product slug', async () => {\r\n      const response = await request(app)\r\n        .get('/api/v1/products/slug/non-existent-slug');\r\n\r\n      expect(response.status).toBe(404);\r\n      expect(response.body).toHaveProperty('error', 'Product not found');\r\n    });\r\n\r\n    /**\r\n     * Test invalid slug format\r\n     */\r\n    it('should return validation error for invalid slug format', async () => {\r\n      const response = await request(app)\r\n        .get('/api/v1/products/slug/Invalid Slug With Spaces');\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body).toHaveProperty('error', 'Validation failed');\r\n    });\r\n  });\r\n\r\n  describe('POST /api/v1/products', () => {\r\n    /**\r\n     * Test successful product creation by admin\r\n     */\r\n    it('should allow admin to create product', async () => {\r\n      const productData = {\r\n        name: 'New Test Product',\r\n        nameEn: 'New Test Product English',\r\n        slug: 'new-test-product',\r\n        sku: 'NEW-SKU-001',\r\n        categoryId: testCategory.id,\r\n        brandId: testBrand.id,\r\n        regularPrice: 199.99,\r\n        salePrice: 149.99,\r\n        costPrice: 100.00,\r\n        stockQuantity: 50,\r\n        lowStockThreshold: 5,\r\n        description: 'New product description',\r\n        shortDescription: 'New product short description',\r\n        nameBn: 'নিউ টেস্ট পণ্য',\r\n        warrantyPeriod: 24,\r\n        warrantyType: 'Extended Warranty'\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'POST',\r\n        '/api/v1/products',\r\n        productData,\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(201);\r\n      expect(response.body).toHaveProperty('message', 'Product created successfully');\r\n      expect(response.body).toHaveProperty('product');\r\n      \r\n      const product = response.body.product;\r\n      expect(product.name).toBe(productData.name);\r\n      expect(product.nameEn).toBe(productData.nameEn);\r\n      expect(product.slug).toBe(productData.slug);\r\n      expect(product.sku).toBe(productData.sku);\r\n      expect(parseFloat(product.regularPrice)).toBe(productData.regularPrice);\r\n      expect(parseFloat(product.salePrice)).toBe(productData.salePrice);\r\n      expect(parseFloat(product.costPrice)).toBe(productData.costPrice);\r\n      expect(product.stockQuantity).toBe(productData.stockQuantity);\r\n      expect(product.warrantyPeriod).toBe(productData.warrantyPeriod);\r\n      expect(product.warrantyType).toBe(productData.warrantyType);\r\n    });\r\n\r\n    /**\r\n     * Test unauthorized product creation by regular user\r\n     */\r\n    it('should deny product creation by regular user', async () => {\r\n      const productData = {\r\n        name: 'Unauthorized Product',\r\n        nameEn: 'Unauthorized Product',\r\n        slug: 'unauthorized-product',\r\n        sku: 'UNAUTH-001',\r\n        categoryId: testCategory.id,\r\n        brandId: testBrand.id,\r\n        regularPrice: 99.99,\r\n        costPrice: 50.00,\r\n        stockQuantity: 10\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'POST',\r\n        '/api/v1/products',\r\n        productData,\r\n        testUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(403);\r\n      expect(response.body).toHaveProperty('error', 'Insufficient permissions');\r\n    });\r\n\r\n    /**\r\n     * Test product creation without authentication\r\n     */\r\n    it('should deny product creation without authentication', async () => {\r\n      const productData = {\r\n        name: 'No Auth Product',\r\n        nameEn: 'No Auth Product',\r\n        slug: 'no-auth-product',\r\n        sku: 'NOAUTH-001',\r\n        categoryId: testCategory.id,\r\n        brandId: testBrand.id,\r\n        regularPrice: 99.99,\r\n        costPrice: 50.00,\r\n        stockQuantity: 10\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/products')\r\n        .send(productData);\r\n\r\n      expect(response.status).toBe(401);\r\n      expect(response.body).toHaveProperty('error', 'Access token required');\r\n    });\r\n\r\n    /**\r\n     * Test product creation with duplicate SKU\r\n     */\r\n    it('should prevent creation with duplicate SKU', async () => {\r\n      const productData = {\r\n        name: 'Duplicate SKU Product',\r\n        nameEn: 'Duplicate SKU Product',\r\n        slug: 'duplicate-sku-product',\r\n        sku: testProduct.sku, // Duplicate SKU\r\n        categoryId: testCategory.id,\r\n        brandId: testBrand.id,\r\n        regularPrice: 99.99,\r\n        costPrice: 50.00,\r\n        stockQuantity: 10\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'POST',\r\n        '/api/v1/products',\r\n        productData,\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(409);\r\n      expect(response.body).toHaveProperty('error', 'Product with this SKU already exists');\r\n    });\r\n\r\n    /**\r\n     * Test product creation with duplicate slug\r\n     */\r\n    it('should prevent creation with duplicate slug', async () => {\r\n      const productData = {\r\n        name: 'Duplicate Slug Product',\r\n        nameEn: 'Duplicate Slug Product',\r\n        slug: testProduct.slug, // Duplicate slug\r\n        sku: 'DIFFERENT-SKU',\r\n        categoryId: testCategory.id,\r\n        brandId: testBrand.id,\r\n        regularPrice: 99.99,\r\n        costPrice: 50.00,\r\n        stockQuantity: 10\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'POST',\r\n        '/api/v1/products',\r\n        productData,\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(409);\r\n      expect(response.body).toHaveProperty('error', 'Product with this slug already exists');\r\n    });\r\n\r\n    /**\r\n     * Test validation of required fields\r\n     */\r\n    it('should validate required product fields', async () => {\r\n      const incompleteData = {\r\n        name: 'Incomplete Product'\r\n        // Missing many required fields\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'POST',\r\n        '/api/v1/products',\r\n        incompleteData,\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body).toHaveProperty('error', 'Validation failed');\r\n    });\r\n\r\n    /**\r\n     * Test validation of field formats\r\n     */\r\n    it('should validate field formats and constraints', async () => {\r\n      const invalidData = {\r\n        name: 'A', // Too short\r\n        nameEn: 'A', // Too short\r\n        slug: 'Invalid Slug!', // Invalid characters\r\n        sku: '', // Empty\r\n        categoryId: 'invalid-uuid',\r\n        brandId: 'invalid-uuid',\r\n        regularPrice: -10, // Negative\r\n        costPrice: -5, // Negative\r\n        stockQuantity: -1, // Negative\r\n        warrantyPeriod: -12 // Negative\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'POST',\r\n        '/api/v1/products',\r\n        invalidData,\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body).toHaveProperty('error', 'Validation failed');\r\n    });\r\n  });\r\n\r\n  describe('PUT /api/v1/products/:id', () => {\r\n    /**\r\n     * Test successful product update by admin\r\n     */\r\n    it('should allow admin to update product', async () => {\r\n      const updateData = {\r\n        name: 'Updated Product Name',\r\n        regularPrice: 299.99,\r\n        stockQuantity: 75,\r\n        status: 'INACTIVE'\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'PUT',\r\n        `/api/v1/products/${testProduct.id}`,\r\n        updateData,\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('message', 'Product updated successfully');\r\n      expect(response.body).toHaveProperty('product');\r\n      \r\n      const product = response.body.product;\r\n      expect(product.name).toBe(updateData.name);\r\n      expect(parseFloat(product.regularPrice)).toBe(updateData.regularPrice);\r\n      expect(product.stockQuantity).toBe(updateData.stockQuantity);\r\n      expect(product.status).toBe(updateData.status);\r\n    });\r\n\r\n    /**\r\n     * Test unauthorized product update by regular user\r\n     */\r\n    it('should deny product update by regular user', async () => {\r\n      const updateData = {\r\n        name: 'Hacked Product'\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'PUT',\r\n        `/api/v1/products/${testProduct.id}`,\r\n        updateData,\r\n        testUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(403);\r\n      expect(response.body).toHaveProperty('error', 'Insufficient permissions');\r\n    });\r\n\r\n    /**\r\n     * Test update of non-existent product\r\n     */\r\n    it('should return 404 when updating non-existent product', async () => {\r\n      const fakeId = '550e8400-e29b-41d4-a716-446655440000';\r\n      \r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'PUT',\r\n        `/api/v1/products/${fakeId}`,\r\n        { name: 'Updated' },\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(404);\r\n      expect(response.body).toHaveProperty('error', 'Product not found');\r\n    });\r\n\r\n    /**\r\n     * Test update with conflicting SKU\r\n     */\r\n    it('should prevent update with conflicting SKU', async () => {\r\n      // Create another product\r\n      const anotherProduct = await createTestProduct({ sku: 'DIFFERENT-SKU' });\r\n\r\n      const updateData = {\r\n        sku: anotherProduct.sku // Try to use another product's SKU\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'PUT',\r\n        `/api/v1/products/${testProduct.id}`,\r\n        updateData,\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(409);\r\n      expect(response.body).toHaveProperty('error', 'Product with this SKU already exists');\r\n    });\r\n  });\r\n\r\n  describe('DELETE /api/v1/products/:id', () => {\r\n    /**\r\n     * Test successful product deletion by admin\r\n     */\r\n    it('should allow admin to delete product without orders', async () => {\r\n      const productToDelete = await createTestProduct({ \r\n        name: 'Product to Delete' \r\n      });\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'DELETE',\r\n        `/api/v1/products/${productToDelete.id}`,\r\n        {},\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('message', 'Product deleted successfully');\r\n\r\n      // Verify product is deleted\r\n      const deletedProduct = await prisma.product.findUnique({\r\n        where: { id: productToDelete.id }\r\n      });\r\n      expect(deletedProduct).toBeNull();\r\n    });\r\n\r\n    /**\r\n     * Test deletion prevention for product with orders\r\n     */\r\n    it('should prevent deletion of product with existing orders', async () => {\r\n      // Create product with order\r\n      const productWithOrder = await createTestProduct({ \r\n        name: 'Product with Order' \r\n      });\r\n      await createTestOrder({ product: productWithOrder });\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'DELETE',\r\n        `/api/v1/products/${productWithOrder.id}`,\r\n        {},\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body).toHaveProperty('error', 'Cannot delete product with existing orders');\r\n      expect(response.body).toHaveProperty('suggestion', 'Consider discontinuing the product instead');\r\n    });\r\n\r\n    /**\r\n     * Test unauthorized deletion by regular user\r\n     */\r\n    it('should deny product deletion by regular user', async () => {\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'DELETE',\r\n        `/api/v1/products/${testProduct.id}`,\r\n        {},\r\n        testUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(403);\r\n      expect(response.body).toHaveProperty('error', 'Insufficient permissions');\r\n    });\r\n  });\r\n\r\n  describe('GET /api/v1/products/featured/list', () => {\r\n    /**\r\n     * Test retrieval of featured products\r\n     */\r\n    it('should retrieve featured products successfully', async () => {\r\n      // Create featured product\r\n      await createTestProduct({ \r\n        name: 'Featured Product',\r\n        isFeatured: true \r\n      });\r\n\r\n      const response = await request(app)\r\n        .get('/api/v1/products/featured/list');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body).toHaveProperty('products');\r\n      expect(Array.isArray(response.body.products)).toBe(true);\r\n      \r\n      if (response.body.products.length > 0) {\r\n        const products = response.body.products;\r\n        products.forEach(product => {\r\n          expect(product.isFeatured).toBe(true);\r\n          expect(product.status).toBe('ACTIVE');\r\n        });\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Test that featured products include necessary fields\r\n     */\r\n    it('should include necessary fields in featured products', async () => {\r\n      await createTestProduct({ \r\n        name: 'Featured Product Full',\r\n        isFeatured: true \r\n      });\r\n\r\n      const response = await request(app)\r\n        .get('/api/v1/products/featured/list');\r\n\r\n      expect(response.status).toBe(200);\r\n      \r\n      if (response.body.products.length > 0) {\r\n        const product = response.body.products[0];\r\n        expect(product).toHaveProperty('id');\r\n        expect(product).toHaveProperty('name');\r\n        expect(product).toHaveProperty('slug');\r\n        expect(product).toHaveProperty('regularPrice');\r\n        expect(product).toHaveProperty('salePrice');\r\n        expect(product).toHaveProperty('category');\r\n        expect(product).toHaveProperty('brand');\r\n        expect(product).toHaveProperty('images');\r\n        expect(product).toHaveProperty('_count');\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Product Management Bangladesh-Specific Tests', () => {\r\n    /**\r\n     * Test product with Bangladesh-specific warranty\r\n     */\r\n    it('should handle Bangladesh-specific warranty information', async () => {\r\n      const bdProductData = {\r\n        name: 'Bangladesh Product',\r\n        nameEn: 'Bangladesh Product',\r\n        slug: 'bangladesh-product',\r\n        sku: 'BD-SKU-001',\r\n        categoryId: testCategory.id,\r\n        brandId: testBrand.id,\r\n        regularPrice: 19999.99,\r\n        costPrice: 15000.00,\r\n        stockQuantity: 10,\r\n        warrantyPeriod: 36, // 3 years warranty\r\n        warrantyType: 'Bangladesh Manufacturer Warranty',\r\n        nameBn: 'বাংলাদেশ পণ্য'\r\n      };\r\n\r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'POST',\r\n        '/api/v1/products',\r\n        bdProductData,\r\n        adminUser.token\r\n      );\r\n\r\n      expect(response.status).toBe(201);\r\n      const product = response.body.product;\r\n      expect(product.warrantyPeriod).toBe(bdProductData.warrantyPeriod);\r\n      expect(product.warrantyType).toBe(bdProductData.warrantyType);\r\n      expect(product.nameBn).toBe(bdProductData.nameBn);\r\n    });\r\n\r\n    /**\r\n     * Test product pricing in BDT context\r\n     */\r\n    it('should handle BDT pricing correctly', async () => {\r\n      const bdtProduct = await createTestProduct({ \r\n        regularPrice: 1999.99,\r\n        salePrice: 1799.99\r\n      });\r\n\r\n      const response = await request(app)\r\n        .get(`/api/v1/products/${bdtProduct.id}`);\r\n\r\n      expect(response.status).toBe(200);\r\n      const product = response.body.product;\r\n      expect(parseFloat(product.regularPrice)).toBe(1999.99);\r\n      expect(parseFloat(product.salePrice)).toBe(1799.99);\r\n    });\r\n  });\r\n\r\n  describe('Product Management Security Tests', () => {\r\n    /**\r\n     * Test SQL injection protection\r\n     */\r\n    it('should protect against SQL injection in product search', async () => {\r\n      const maliciousQuery = \"'; DROP TABLE products; --\";\r\n      \r\n      const response = await request(app)\r\n        .get(`/api/v1/products?search=${encodeURIComponent(maliciousQuery)}`);\r\n\r\n      // Should not crash the server\r\n      expect(response.status).toBe(200);\r\n      \r\n      // Verify products table still exists\r\n      const productCount = await prisma.product.count();\r\n      expect(productCount).toBeGreaterThanOrEqual(0);\r\n    });\r\n\r\n    /**\r\n     * Test XSS protection in product data\r\n     */\r\n    it('should sanitize product input to prevent XSS', async () => {\r\n      const xssPayload = '<script>alert(\"xss\")</script>';\r\n      \r\n      const response = await makeAuthenticatedRequest(\r\n        app,\r\n        'POST',\r\n        '/api/v1/products',\r\n        {\r\n          name: xssPayload,\r\n          nameEn: 'Safe Name',\r\n          slug: 'safe-slug',\r\n          sku: 'XSS-001',\r\n          categoryId: testCategory.id,\r\n          brandId: testBrand.id,\r\n          regularPrice: 99.99,\r\n          costPrice: 50.00,\r\n          stockQuantity: 10\r\n        },\r\n        adminUser.token\r\n      );\r\n\r\n      // Should either reject or sanitize input\r\n      expect([201, 400]).toContain(response.status);\r\n      \r\n      if (response.status === 201) {\r\n        // If accepted, should be sanitized\r\n        expect(response.body.product.name).not.toBe(xssPayload);\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Test rate limiting on product creation\r\n     */\r\n    it('should implement rate limiting on product creation', async () => {\r\n      const productData = {\r\n        name: 'Rate Limit Test',\r\n        nameEn: 'Rate Limit Test',\r\n        slug: 'rate-limit-test',\r\n        sku: 'RATE-001',\r\n        categoryId: testCategory.id,\r\n        brandId: testBrand.id,\r\n        regularPrice: 99.99,\r\n        costPrice: 50.00,\r\n        stockQuantity: 10\r\n      };\r\n\r\n      // Make multiple requests\r\n      const promises = Array(10).fill().map(() => \r\n        makeAuthenticatedRequest(\r\n          app,\r\n          'POST',\r\n          '/api/v1/products',\r\n          productData,\r\n          adminUser.token\r\n        )\r\n      );\r\n\r\n      const responses = await Promise.all(promises);\r\n      \r\n      // At least one should be rate limited\r\n      const rateLimitedResponse = responses.find(res => res.status === 429);\r\n      expect(rateLimitedResponse).toBeDefined();\r\n    });\r\n  });\r\n});"],"mappings":"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","ignoreList":[]}