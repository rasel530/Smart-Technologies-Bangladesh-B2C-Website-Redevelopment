8797dbad3e45eb5919da32a15c7b4a57
const express = require('express');
const {
  body,
  validationResult
} = require('express-validator');
const {
  sessionService
} = require('../services/sessionService');
const {
  sessionMiddleware
} = require('../middleware/session');
const {
  authMiddleware
} = require('../middleware/auth');
const {
  loggerService
} = require('../services/logger');
const router = express.Router();

// Validation middleware
const handleValidationErrors = (req, res, next) => {
  const errors = validationResult(req);
  if (!errors.isEmpty()) {
    return res.status(400).json({
      error: 'Validation failed',
      details: errors.array()
    });
  }
  next();
};

// Create new session (login)
router.post('/create', [body('userId').notEmpty().isUUID(), body('loginType').optional().isIn(['password', 'social', 'otp']), body('rememberMe').optional().isBoolean(), body('maxAge').optional().isInt({
  min: 300000,
  max: 30 * 24 * 60 * 60 * 1000
}) // 5 min to 30 days
], handleValidationErrors, async (req, res) => {
  try {
    const {
      userId,
      loginType,
      rememberMe,
      maxAge
    } = req.body;

    // Create new session
    const sessionResult = await sessionService.createSession(userId, req, {
      loginType,
      rememberMe,
      maxAge
    });
    if (!sessionResult.sessionId) {
      return res.status(500).json({
        error: 'Session creation failed',
        message: 'Unable to create session at this time'
      });
    }

    // Set session cookie
    sessionMiddleware.setSessionCookie(res, sessionResult.sessionId, {
      maxAge: sessionResult.maxAge
    });

    // Add session headers
    const sessionHeaders = sessionMiddleware.sessionHeaders(sessionResult);
    Object.keys(sessionHeaders).forEach(key => {
      res.set(key, sessionHeaders[key]);
    });
    res.status(201).json({
      message: 'Session created successfully',
      sessionId: sessionResult.sessionId,
      expiresAt: sessionResult.expiresAt,
      maxAge: sessionResult.maxAge,
      userId
    });
  } catch (error) {
    loggerService.error('Session creation error', error.message);
    res.status(500).json({
      error: 'Session creation failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error'
    });
  }
});

// Validate session
router.get('/validate', sessionMiddleware.required(), async (req, res) => {
  try {
    res.json({
      message: 'Session is valid',
      valid: true,
      session: {
        sessionId: req.sessionId,
        userId: req.userId,
        createdAt: req.session.createdAt,
        lastActivity: req.session.lastActivity,
        expiresAt: req.session.expiresAt,
        loginType: req.session.loginType,
        securityLevel: req.session.securityLevel
      }
    });
  } catch (error) {
    loggerService.error('Session validation error', error.message);
    res.status(500).json({
      error: 'Session validation failed',
      message: 'Unable to validate session at this time'
    });
  }
});

// Refresh session
router.post('/refresh', [body('sessionId').optional().isUUID(), body('maxAge').optional().isInt({
  min: 300000,
  max: 30 * 24 * 60 * 60 * 1000
})], handleValidationErrors, async (req, res) => {
  try {
    // Get session ID from body or current session
    const sessionId = req.body.sessionId || req.sessionId;
    if (!sessionId) {
      return res.status(400).json({
        error: 'Session ID required',
        message: 'Session ID is required to refresh session'
      });
    }
    const refreshResult = await sessionService.refreshSession(sessionId, req, {
      maxAge: req.body.maxAge
    });
    if (!refreshResult.success) {
      return res.status(401).json({
        error: 'Session refresh failed',
        message: refreshResult.reason
      });
    }

    // Update session cookie if this is current session
    if (!req.body.sessionId && req.sessionId === sessionId) {
      sessionMiddleware.setSessionCookie(res, sessionId, {
        maxAge: refreshResult.maxAge
      });
    }

    // Add updated session headers
    const sessionHeaders = sessionMiddleware.sessionHeaders(refreshResult);
    Object.keys(sessionHeaders).forEach(key => {
      res.set(key, sessionHeaders[key]);
    });
    res.json({
      message: 'Session refreshed successfully',
      sessionId: refreshResult.sessionId,
      expiresAt: refreshResult.expiresAt,
      maxAge: refreshResult.maxAge
    });
  } catch (error) {
    loggerService.error('Session refresh error', error.message);
    res.status(500).json({
      error: 'Session refresh failed',
      message: 'Unable to refresh session at this time'
    });
  }
});

// Destroy session (logout)
router.post('/destroy', [body('sessionId').optional().isUUID(), body('allDevices').optional().isBoolean()], handleValidationErrors, authMiddleware.authenticate(), async (req, res) => {
  try {
    const {
      sessionId,
      allDevices
    } = req.body;
    const userId = req.userId;
    if (allDevices) {
      // Destroy all sessions for this user
      const result = await sessionService.destroyAllUserSessions(userId, sessionId);
      if (!result.success) {
        return res.status(500).json({
          error: 'Session destruction failed',
          message: result.reason
        });
      }

      // Clear session cookie
      sessionMiddleware.clearSessionCookie(res);
      res.json({
        message: 'All sessions destroyed successfully',
        destroyedCount: result.destroyedCount,
        allDevices: true
      });
    } else {
      // Destroy specific session
      const targetSessionId = sessionId || req.sessionId;
      if (!targetSessionId) {
        return res.status(400).json({
          error: 'Session ID required',
          message: 'Session ID is required to destroy session'
        });
      }
      const result = await sessionService.destroySession(targetSessionId, 'user_logout');
      if (!result.success) {
        return res.status(500).json({
          error: 'Session destruction failed',
          message: result.reason
        });
      }

      // Clear session cookie if destroying current session
      if (targetSessionId === req.sessionId) {
        sessionMiddleware.clearSessionCookie(res);
      }
      res.json({
        message: 'Session destroyed successfully',
        sessionId: targetSessionId,
        allDevices: false
      });
    }
  } catch (error) {
    loggerService.error('Session destruction error', error.message);
    res.status(500).json({
      error: 'Session destruction failed',
      message: 'Unable to destroy session at this time'
    });
  }
});

// Get user sessions
router.get('/user', authMiddleware.authenticate(), async (req, res) => {
  try {
    const userId = req.userId;
    const result = await sessionService.getUserSessions(userId);
    if (!result.success) {
      return res.status(500).json({
        error: 'Failed to retrieve sessions',
        message: result.reason
      });
    }

    // Mark current session
    const sessionsWithCurrent = result.sessions.map(session => ({
      ...session,
      isCurrent: session.sessionId === req.sessionId
    }));
    res.json({
      message: 'User sessions retrieved successfully',
      sessions: sessionsWithCurrent,
      totalSessions: sessionsWithCurrent.length,
      activeSessions: sessionsWithCurrent.filter(s => s.isActive).length
    });
  } catch (error) {
    loggerService.error('Get user sessions error', error.message);
    res.status(500).json({
      error: 'Failed to retrieve sessions',
      message: 'Unable to retrieve sessions at this time'
    });
  }
});

// Get session statistics
router.get('/stats', authMiddleware.authorize(['ADMIN']), async (req, res) => {
  try {
    const result = await sessionService.getSessionStats();
    if (!result.success) {
      return res.status(500).json({
        error: 'Failed to retrieve session statistics',
        message: result.reason
      });
    }
    res.json({
      message: 'Session statistics retrieved successfully',
      stats: result.stats,
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    loggerService.error('Session stats error', error.message);
    res.status(500).json({
      error: 'Failed to retrieve session statistics',
      message: 'Unable to retrieve session statistics at this time'
    });
  }
});

// Cleanup expired sessions (admin only)
router.post('/cleanup', authMiddleware.authorize(['ADMIN']), async (req, res) => {
  try {
    const result = await sessionService.cleanupExpiredSessions();
    if (!result.success) {
      return res.status(500).json({
        error: 'Session cleanup failed',
        message: result.reason
      });
    }
    res.json({
      message: 'Session cleanup completed successfully',
      cleanedCount: result.cleanedCount,
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    loggerService.error('Session cleanup error', error.message);
    res.status(500).json({
      error: 'Session cleanup failed',
      message: 'Unable to cleanup sessions at this time'
    });
  }
});

// Check session status (without authentication)
router.get('/status', async (req, res) => {
  try {
    const sessionId = sessionMiddleware.getSessionId(req);
    if (!sessionId) {
      return res.json({
        message: 'No session found',
        hasSession: false,
        sessionId: null
      });
    }
    const validation = await sessionService.validateSession(sessionId, req);
    res.json({
      message: validation.valid ? 'Session is valid' : 'Session is invalid',
      hasSession: validation.valid,
      sessionId,
      valid: validation.valid,
      reason: validation.reason || null,
      userId: validation.valid ? validation.userId : null
    });
  } catch (error) {
    loggerService.error('Session status check error', error.message);
    res.status(500).json({
      error: 'Session status check failed',
      message: 'Unable to check session status at this time'
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvZHkiLCJ2YWxpZGF0aW9uUmVzdWx0Iiwic2Vzc2lvblNlcnZpY2UiLCJzZXNzaW9uTWlkZGxld2FyZSIsImF1dGhNaWRkbGV3YXJlIiwibG9nZ2VyU2VydmljZSIsInJvdXRlciIsIlJvdXRlciIsImhhbmRsZVZhbGlkYXRpb25FcnJvcnMiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyb3JzIiwiaXNFbXB0eSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImRldGFpbHMiLCJhcnJheSIsInBvc3QiLCJub3RFbXB0eSIsImlzVVVJRCIsIm9wdGlvbmFsIiwiaXNJbiIsImlzQm9vbGVhbiIsImlzSW50IiwibWluIiwibWF4IiwidXNlcklkIiwibG9naW5UeXBlIiwicmVtZW1iZXJNZSIsIm1heEFnZSIsInNlc3Npb25SZXN1bHQiLCJjcmVhdGVTZXNzaW9uIiwic2Vzc2lvbklkIiwibWVzc2FnZSIsInNldFNlc3Npb25Db29raWUiLCJzZXNzaW9uSGVhZGVycyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5Iiwic2V0IiwiZXhwaXJlc0F0IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiZ2V0IiwicmVxdWlyZWQiLCJ2YWxpZCIsInNlc3Npb24iLCJjcmVhdGVkQXQiLCJsYXN0QWN0aXZpdHkiLCJzZWN1cml0eUxldmVsIiwicmVmcmVzaFJlc3VsdCIsInJlZnJlc2hTZXNzaW9uIiwic3VjY2VzcyIsInJlYXNvbiIsImF1dGhlbnRpY2F0ZSIsImFsbERldmljZXMiLCJyZXN1bHQiLCJkZXN0cm95QWxsVXNlclNlc3Npb25zIiwiY2xlYXJTZXNzaW9uQ29va2llIiwiZGVzdHJveWVkQ291bnQiLCJ0YXJnZXRTZXNzaW9uSWQiLCJkZXN0cm95U2Vzc2lvbiIsImdldFVzZXJTZXNzaW9ucyIsInNlc3Npb25zV2l0aEN1cnJlbnQiLCJzZXNzaW9ucyIsIm1hcCIsImlzQ3VycmVudCIsInRvdGFsU2Vzc2lvbnMiLCJsZW5ndGgiLCJhY3RpdmVTZXNzaW9ucyIsImZpbHRlciIsInMiLCJpc0FjdGl2ZSIsImF1dGhvcml6ZSIsImdldFNlc3Npb25TdGF0cyIsInN0YXRzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY2xlYW51cEV4cGlyZWRTZXNzaW9ucyIsImNsZWFuZWRDb3VudCIsImdldFNlc3Npb25JZCIsImhhc1Nlc3Npb24iLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVTZXNzaW9uIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInNlc3Npb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgYm9keSwgdmFsaWRhdGlvblJlc3VsdCB9ID0gcmVxdWlyZSgnZXhwcmVzcy12YWxpZGF0b3InKTtcclxuY29uc3QgeyBzZXNzaW9uU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvc2Vzc2lvblNlcnZpY2UnKTtcclxuY29uc3QgeyBzZXNzaW9uTWlkZGxld2FyZSB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9zZXNzaW9uJyk7XHJcbmNvbnN0IHsgYXV0aE1pZGRsZXdhcmUgfSA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmUvYXV0aCcpO1xyXG5jb25zdCB7IGxvZ2dlclNlcnZpY2UgfSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL2xvZ2dlcicpO1xyXG5cclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuXHJcbi8vIFZhbGlkYXRpb24gbWlkZGxld2FyZVxyXG5jb25zdCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgY29uc3QgZXJyb3JzID0gdmFsaWRhdGlvblJlc3VsdChyZXEpO1xyXG4gIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXHJcbiAgICAgIGRldGFpbHM6IGVycm9ycy5hcnJheSgpXHJcbiAgICB9KTtcclxuICB9XHJcbiAgbmV4dCgpO1xyXG59O1xyXG5cclxuLy8gQ3JlYXRlIG5ldyBzZXNzaW9uIChsb2dpbilcclxucm91dGVyLnBvc3QoJy9jcmVhdGUnLCBbXHJcbiAgYm9keSgndXNlcklkJykubm90RW1wdHkoKS5pc1VVSUQoKSxcclxuICBib2R5KCdsb2dpblR5cGUnKS5vcHRpb25hbCgpLmlzSW4oWydwYXNzd29yZCcsICdzb2NpYWwnLCAnb3RwJ10pLFxyXG4gIGJvZHkoJ3JlbWVtYmVyTWUnKS5vcHRpb25hbCgpLmlzQm9vbGVhbigpLFxyXG4gIGJvZHkoJ21heEFnZScpLm9wdGlvbmFsKCkuaXNJbnQoeyBtaW46IDMwMDAwMCwgbWF4OiAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDAgfSkgLy8gNSBtaW4gdG8gMzAgZGF5c1xyXG5dLCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB1c2VySWQsIGxvZ2luVHlwZSwgcmVtZW1iZXJNZSwgbWF4QWdlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBDcmVhdGUgbmV3IHNlc3Npb25cclxuICAgIGNvbnN0IHNlc3Npb25SZXN1bHQgPSBhd2FpdCBzZXNzaW9uU2VydmljZS5jcmVhdGVTZXNzaW9uKHVzZXJJZCwgcmVxLCB7XHJcbiAgICAgIGxvZ2luVHlwZSxcclxuICAgICAgcmVtZW1iZXJNZSxcclxuICAgICAgbWF4QWdlXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXNlc3Npb25SZXN1bHQuc2Vzc2lvbklkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdTZXNzaW9uIGNyZWF0aW9uIGZhaWxlZCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byBjcmVhdGUgc2Vzc2lvbiBhdCB0aGlzIHRpbWUnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCBzZXNzaW9uIGNvb2tpZVxyXG4gICAgc2Vzc2lvbk1pZGRsZXdhcmUuc2V0U2Vzc2lvbkNvb2tpZShyZXMsIHNlc3Npb25SZXN1bHQuc2Vzc2lvbklkLCB7XHJcbiAgICAgIG1heEFnZTogc2Vzc2lvblJlc3VsdC5tYXhBZ2VcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFkZCBzZXNzaW9uIGhlYWRlcnNcclxuICAgIGNvbnN0IHNlc3Npb25IZWFkZXJzID0gc2Vzc2lvbk1pZGRsZXdhcmUuc2Vzc2lvbkhlYWRlcnMoc2Vzc2lvblJlc3VsdCk7XHJcbiAgICBPYmplY3Qua2V5cyhzZXNzaW9uSGVhZGVycykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICByZXMuc2V0KGtleSwgc2Vzc2lvbkhlYWRlcnNba2V5XSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdTZXNzaW9uIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uUmVzdWx0LnNlc3Npb25JZCxcclxuICAgICAgZXhwaXJlc0F0OiBzZXNzaW9uUmVzdWx0LmV4cGlyZXNBdCxcclxuICAgICAgbWF4QWdlOiBzZXNzaW9uUmVzdWx0Lm1heEFnZSxcclxuICAgICAgdXNlcklkXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlclNlcnZpY2UuZXJyb3IoJ1Nlc3Npb24gY3JlYXRpb24gZXJyb3InLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdTZXNzaW9uIGNyZWF0aW9uIGZhaWxlZCcsXHJcbiAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gVmFsaWRhdGUgc2Vzc2lvblxyXG5yb3V0ZXIuZ2V0KCcvdmFsaWRhdGUnLCBzZXNzaW9uTWlkZGxld2FyZS5yZXF1aXJlZCgpLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiAnU2Vzc2lvbiBpcyB2YWxpZCcsXHJcbiAgICAgIHZhbGlkOiB0cnVlLFxyXG4gICAgICBzZXNzaW9uOiB7XHJcbiAgICAgICAgc2Vzc2lvbklkOiByZXEuc2Vzc2lvbklkLFxyXG4gICAgICAgIHVzZXJJZDogcmVxLnVzZXJJZCxcclxuICAgICAgICBjcmVhdGVkQXQ6IHJlcS5zZXNzaW9uLmNyZWF0ZWRBdCxcclxuICAgICAgICBsYXN0QWN0aXZpdHk6IHJlcS5zZXNzaW9uLmxhc3RBY3Rpdml0eSxcclxuICAgICAgICBleHBpcmVzQXQ6IHJlcS5zZXNzaW9uLmV4cGlyZXNBdCxcclxuICAgICAgICBsb2dpblR5cGU6IHJlcS5zZXNzaW9uLmxvZ2luVHlwZSxcclxuICAgICAgICBzZWN1cml0eUxldmVsOiByZXEuc2Vzc2lvbi5zZWN1cml0eUxldmVsXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyU2VydmljZS5lcnJvcignU2Vzc2lvbiB2YWxpZGF0aW9uIGVycm9yJywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnU2Vzc2lvbiB2YWxpZGF0aW9uIGZhaWxlZCcsXHJcbiAgICAgIG1lc3NhZ2U6ICdVbmFibGUgdG8gdmFsaWRhdGUgc2Vzc2lvbiBhdCB0aGlzIHRpbWUnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gUmVmcmVzaCBzZXNzaW9uXHJcbnJvdXRlci5wb3N0KCcvcmVmcmVzaCcsIFtcclxuICBib2R5KCdzZXNzaW9uSWQnKS5vcHRpb25hbCgpLmlzVVVJRCgpLFxyXG4gIGJvZHkoJ21heEFnZScpLm9wdGlvbmFsKCkuaXNJbnQoeyBtaW46IDMwMDAwMCwgbWF4OiAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDAgfSlcclxuXSwgaGFuZGxlVmFsaWRhdGlvbkVycm9ycywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCBzZXNzaW9uIElEIGZyb20gYm9keSBvciBjdXJyZW50IHNlc3Npb25cclxuICAgIGNvbnN0IHNlc3Npb25JZCA9IHJlcS5ib2R5LnNlc3Npb25JZCB8fCByZXEuc2Vzc2lvbklkO1xyXG4gICAgXHJcbiAgICBpZiAoIXNlc3Npb25JZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnU2Vzc2lvbiBJRCByZXF1aXJlZCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ1Nlc3Npb24gSUQgaXMgcmVxdWlyZWQgdG8gcmVmcmVzaCBzZXNzaW9uJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZWZyZXNoUmVzdWx0ID0gYXdhaXQgc2Vzc2lvblNlcnZpY2UucmVmcmVzaFNlc3Npb24oc2Vzc2lvbklkLCByZXEsIHtcclxuICAgICAgbWF4QWdlOiByZXEuYm9keS5tYXhBZ2VcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmVmcmVzaFJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdTZXNzaW9uIHJlZnJlc2ggZmFpbGVkJyxcclxuICAgICAgICBtZXNzYWdlOiByZWZyZXNoUmVzdWx0LnJlYXNvblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgc2Vzc2lvbiBjb29raWUgaWYgdGhpcyBpcyBjdXJyZW50IHNlc3Npb25cclxuICAgIGlmICghcmVxLmJvZHkuc2Vzc2lvbklkICYmIHJlcS5zZXNzaW9uSWQgPT09IHNlc3Npb25JZCkge1xyXG4gICAgICBzZXNzaW9uTWlkZGxld2FyZS5zZXRTZXNzaW9uQ29va2llKHJlcywgc2Vzc2lvbklkLCB7XHJcbiAgICAgICAgbWF4QWdlOiByZWZyZXNoUmVzdWx0Lm1heEFnZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgdXBkYXRlZCBzZXNzaW9uIGhlYWRlcnNcclxuICAgIGNvbnN0IHNlc3Npb25IZWFkZXJzID0gc2Vzc2lvbk1pZGRsZXdhcmUuc2Vzc2lvbkhlYWRlcnMocmVmcmVzaFJlc3VsdCk7XHJcbiAgICBPYmplY3Qua2V5cyhzZXNzaW9uSGVhZGVycykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICByZXMuc2V0KGtleSwgc2Vzc2lvbkhlYWRlcnNba2V5XSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdTZXNzaW9uIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBzZXNzaW9uSWQ6IHJlZnJlc2hSZXN1bHQuc2Vzc2lvbklkLFxyXG4gICAgICBleHBpcmVzQXQ6IHJlZnJlc2hSZXN1bHQuZXhwaXJlc0F0LFxyXG4gICAgICBtYXhBZ2U6IHJlZnJlc2hSZXN1bHQubWF4QWdlXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlclNlcnZpY2UuZXJyb3IoJ1Nlc3Npb24gcmVmcmVzaCBlcnJvcicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ1Nlc3Npb24gcmVmcmVzaCBmYWlsZWQnLFxyXG4gICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIHJlZnJlc2ggc2Vzc2lvbiBhdCB0aGlzIHRpbWUnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gRGVzdHJveSBzZXNzaW9uIChsb2dvdXQpXHJcbnJvdXRlci5wb3N0KCcvZGVzdHJveScsIFtcclxuICBib2R5KCdzZXNzaW9uSWQnKS5vcHRpb25hbCgpLmlzVVVJRCgpLFxyXG4gIGJvZHkoJ2FsbERldmljZXMnKS5vcHRpb25hbCgpLmlzQm9vbGVhbigpXHJcbl0sIGhhbmRsZVZhbGlkYXRpb25FcnJvcnMsIGF1dGhNaWRkbGV3YXJlLmF1dGhlbnRpY2F0ZSgpLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBzZXNzaW9uSWQsIGFsbERldmljZXMgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXJJZDtcclxuXHJcbiAgICBpZiAoYWxsRGV2aWNlcykge1xyXG4gICAgICAvLyBEZXN0cm95IGFsbCBzZXNzaW9ucyBmb3IgdGhpcyB1c2VyXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlc3Npb25TZXJ2aWNlLmRlc3Ryb3lBbGxVc2VyU2Vzc2lvbnModXNlcklkLCBzZXNzaW9uSWQpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICBlcnJvcjogJ1Nlc3Npb24gZGVzdHJ1Y3Rpb24gZmFpbGVkJyxcclxuICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5yZWFzb25cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2xlYXIgc2Vzc2lvbiBjb29raWVcclxuICAgICAgc2Vzc2lvbk1pZGRsZXdhcmUuY2xlYXJTZXNzaW9uQ29va2llKHJlcyk7XHJcblxyXG4gICAgICByZXMuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogJ0FsbCBzZXNzaW9ucyBkZXN0cm95ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgICBkZXN0cm95ZWRDb3VudDogcmVzdWx0LmRlc3Ryb3llZENvdW50LFxyXG4gICAgICAgIGFsbERldmljZXM6IHRydWVcclxuICAgICAgfSk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRGVzdHJveSBzcGVjaWZpYyBzZXNzaW9uXHJcbiAgICAgIGNvbnN0IHRhcmdldFNlc3Npb25JZCA9IHNlc3Npb25JZCB8fCByZXEuc2Vzc2lvbklkO1xyXG4gICAgICBcclxuICAgICAgaWYgKCF0YXJnZXRTZXNzaW9uSWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgZXJyb3I6ICdTZXNzaW9uIElEIHJlcXVpcmVkJyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdTZXNzaW9uIElEIGlzIHJlcXVpcmVkIHRvIGRlc3Ryb3kgc2Vzc2lvbidcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2Vzc2lvblNlcnZpY2UuZGVzdHJveVNlc3Npb24odGFyZ2V0U2Vzc2lvbklkLCAndXNlcl9sb2dvdXQnKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgICAgZXJyb3I6ICdTZXNzaW9uIGRlc3RydWN0aW9uIGZhaWxlZCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiByZXN1bHQucmVhc29uXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENsZWFyIHNlc3Npb24gY29va2llIGlmIGRlc3Ryb3lpbmcgY3VycmVudCBzZXNzaW9uXHJcbiAgICAgIGlmICh0YXJnZXRTZXNzaW9uSWQgPT09IHJlcS5zZXNzaW9uSWQpIHtcclxuICAgICAgICBzZXNzaW9uTWlkZGxld2FyZS5jbGVhclNlc3Npb25Db29raWUocmVzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6ICdTZXNzaW9uIGRlc3Ryb3llZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICAgIHNlc3Npb25JZDogdGFyZ2V0U2Vzc2lvbklkLFxyXG4gICAgICAgIGFsbERldmljZXM6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyU2VydmljZS5lcnJvcignU2Vzc2lvbiBkZXN0cnVjdGlvbiBlcnJvcicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ1Nlc3Npb24gZGVzdHJ1Y3Rpb24gZmFpbGVkJyxcclxuICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byBkZXN0cm95IHNlc3Npb24gYXQgdGhpcyB0aW1lJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEdldCB1c2VyIHNlc3Npb25zXHJcbnJvdXRlci5nZXQoJy91c2VyJywgYXV0aE1pZGRsZXdhcmUuYXV0aGVudGljYXRlKCksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlcklkO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2Vzc2lvblNlcnZpY2UuZ2V0VXNlclNlc3Npb25zKHVzZXJJZCk7XHJcblxyXG4gICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHJldHJpZXZlIHNlc3Npb25zJyxcclxuICAgICAgICBtZXNzYWdlOiByZXN1bHQucmVhc29uXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1hcmsgY3VycmVudCBzZXNzaW9uXHJcbiAgICBjb25zdCBzZXNzaW9uc1dpdGhDdXJyZW50ID0gcmVzdWx0LnNlc3Npb25zLm1hcChzZXNzaW9uID0+ICh7XHJcbiAgICAgIC4uLnNlc3Npb24sXHJcbiAgICAgIGlzQ3VycmVudDogc2Vzc2lvbi5zZXNzaW9uSWQgPT09IHJlcS5zZXNzaW9uSWRcclxuICAgIH0pKTtcclxuXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdVc2VyIHNlc3Npb25zIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBzZXNzaW9uczogc2Vzc2lvbnNXaXRoQ3VycmVudCxcclxuICAgICAgdG90YWxTZXNzaW9uczogc2Vzc2lvbnNXaXRoQ3VycmVudC5sZW5ndGgsXHJcbiAgICAgIGFjdGl2ZVNlc3Npb25zOiBzZXNzaW9uc1dpdGhDdXJyZW50LmZpbHRlcihzID0+IHMuaXNBY3RpdmUpLmxlbmd0aFxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dnZXJTZXJ2aWNlLmVycm9yKCdHZXQgdXNlciBzZXNzaW9ucyBlcnJvcicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byByZXRyaWV2ZSBzZXNzaW9ucycsXHJcbiAgICAgIG1lc3NhZ2U6ICdVbmFibGUgdG8gcmV0cmlldmUgc2Vzc2lvbnMgYXQgdGhpcyB0aW1lJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEdldCBzZXNzaW9uIHN0YXRpc3RpY3Ncclxucm91dGVyLmdldCgnL3N0YXRzJywgYXV0aE1pZGRsZXdhcmUuYXV0aG9yaXplKFsnQURNSU4nXSksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXNzaW9uU2VydmljZS5nZXRTZXNzaW9uU3RhdHMoKTtcclxuXHJcbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gcmV0cmlldmUgc2Vzc2lvbiBzdGF0aXN0aWNzJyxcclxuICAgICAgICBtZXNzYWdlOiByZXN1bHQucmVhc29uXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ1Nlc3Npb24gc3RhdGlzdGljcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgc3RhdHM6IHJlc3VsdC5zdGF0cyxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyU2VydmljZS5lcnJvcignU2Vzc2lvbiBzdGF0cyBlcnJvcicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byByZXRyaWV2ZSBzZXNzaW9uIHN0YXRpc3RpY3MnLFxyXG4gICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIHJldHJpZXZlIHNlc3Npb24gc3RhdGlzdGljcyBhdCB0aGlzIHRpbWUnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gQ2xlYW51cCBleHBpcmVkIHNlc3Npb25zIChhZG1pbiBvbmx5KVxyXG5yb3V0ZXIucG9zdCgnL2NsZWFudXAnLCBhdXRoTWlkZGxld2FyZS5hdXRob3JpemUoWydBRE1JTiddKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlc3Npb25TZXJ2aWNlLmNsZWFudXBFeHBpcmVkU2Vzc2lvbnMoKTtcclxuXHJcbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdTZXNzaW9uIGNsZWFudXAgZmFpbGVkJyxcclxuICAgICAgICBtZXNzYWdlOiByZXN1bHQucmVhc29uXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ1Nlc3Npb24gY2xlYW51cCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgY2xlYW5lZENvdW50OiByZXN1bHQuY2xlYW5lZENvdW50LFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dnZXJTZXJ2aWNlLmVycm9yKCdTZXNzaW9uIGNsZWFudXAgZXJyb3InLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdTZXNzaW9uIGNsZWFudXAgZmFpbGVkJyxcclxuICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byBjbGVhbnVwIHNlc3Npb25zIGF0IHRoaXMgdGltZSdcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBDaGVjayBzZXNzaW9uIHN0YXR1cyAod2l0aG91dCBhdXRoZW50aWNhdGlvbilcclxucm91dGVyLmdldCgnL3N0YXR1cycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzZXNzaW9uSWQgPSBzZXNzaW9uTWlkZGxld2FyZS5nZXRTZXNzaW9uSWQocmVxKTtcclxuICAgIFxyXG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiAnTm8gc2Vzc2lvbiBmb3VuZCcsXHJcbiAgICAgICAgaGFzU2Vzc2lvbjogZmFsc2UsXHJcbiAgICAgICAgc2Vzc2lvbklkOiBudWxsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBzZXNzaW9uU2VydmljZS52YWxpZGF0ZVNlc3Npb24oc2Vzc2lvbklkLCByZXEpO1xyXG4gICAgXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6IHZhbGlkYXRpb24udmFsaWQgPyAnU2Vzc2lvbiBpcyB2YWxpZCcgOiAnU2Vzc2lvbiBpcyBpbnZhbGlkJyxcclxuICAgICAgaGFzU2Vzc2lvbjogdmFsaWRhdGlvbi52YWxpZCxcclxuICAgICAgc2Vzc2lvbklkLFxyXG4gICAgICB2YWxpZDogdmFsaWRhdGlvbi52YWxpZCxcclxuICAgICAgcmVhc29uOiB2YWxpZGF0aW9uLnJlYXNvbiB8fCBudWxsLFxyXG4gICAgICB1c2VySWQ6IHZhbGlkYXRpb24udmFsaWQgPyB2YWxpZGF0aW9uLnVzZXJJZCA6IG51bGxcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyU2VydmljZS5lcnJvcignU2Vzc2lvbiBzdGF0dXMgY2hlY2sgZXJyb3InLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdTZXNzaW9uIHN0YXR1cyBjaGVjayBmYWlsZWQnLFxyXG4gICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIGNoZWNrIHNlc3Npb24gc3RhdHVzIGF0IHRoaXMgdGltZSdcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQUVDLElBQUk7RUFBRUM7QUFBaUIsQ0FBQyxHQUFHRixPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDL0QsTUFBTTtFQUFFRztBQUFlLENBQUMsR0FBR0gsT0FBTyxDQUFDLDRCQUE0QixDQUFDO0FBQ2hFLE1BQU07RUFBRUk7QUFBa0IsQ0FBQyxHQUFHSixPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFDOUQsTUFBTTtFQUFFSztBQUFlLENBQUMsR0FBR0wsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQ3hELE1BQU07RUFBRU07QUFBYyxDQUFDLEdBQUdOLE9BQU8sQ0FB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