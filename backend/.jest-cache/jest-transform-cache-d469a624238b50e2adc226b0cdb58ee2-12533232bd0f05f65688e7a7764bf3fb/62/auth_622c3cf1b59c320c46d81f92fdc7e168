2cba78b7c6d2506f1104145e7f799bcc
/* istanbul ignore next */
function cov_1ds5ui4vtd() {
  var path = "E:\\Drive D Backup\\Smart Technologies Bangladesh B2C Website Redevelopment\\backend\\routes\\auth.js";
  var hash = "301a2f3f071aaadabdf6f9b6c6926a967f54a741";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "E:\\Drive D Backup\\Smart Technologies Bangladesh B2C Website Redevelopment\\backend\\routes\\auth.js",
    statementMap: {
      "0": {
        start: {
          line: 1,
          column: 16
        },
        end: {
          line: 1,
          column: 34
        }
      },
      "1": {
        start: {
          line: 2,
          column: 35
        },
        end: {
          line: 2,
          column: 63
        }
      },
      "2": {
        start: {
          line: 3,
          column: 15
        },
        end: {
          line: 3,
          column: 34
        }
      },
      "3": {
        start: {
          line: 4,
          column: 12
        },
        end: {
          line: 4,
          column: 35
        }
      },
      "4": {
        start: {
          line: 5,
          column: 25
        },
        end: {
          line: 5,
          column: 50
        }
      },
      "5": {
        start: {
          line: 7,
          column: 15
        },
        end: {
          line: 7,
          column: 31
        }
      },
      "6": {
        start: {
          line: 8,
          column: 15
        },
        end: {
          line: 8,
          column: 33
        }
      },
      "7": {
        start: {
          line: 11,
          column: 31
        },
        end: {
          line: 20,
          column: 1
        }
      },
      "8": {
        start: {
          line: 12,
          column: 17
        },
        end: {
          line: 12,
          column: 38
        }
      },
      "9": {
        start: {
          line: 13,
          column: 2
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "10": {
        start: {
          line: 14,
          column: 4
        },
        end: {
          line: 17,
          column: 7
        }
      },
      "11": {
        start: {
          line: 19,
          column: 2
        },
        end: {
          line: 19,
          column: 9
        }
      },
      "12": {
        start: {
          line: 23,
          column: 0
        },
        end: {
          line: 101,
          column: 3
        }
      },
      "13": {
        start: {
          line: 30,
          column: 2
        },
        end: {
          line: 100,
          column: 3
        }
      },
      "14": {
        start: {
          line: 31,
          column: 60
        },
        end: {
          line: 31,
          column: 68
        }
      },
      "15": {
        start: {
          line: 34,
          column: 25
        },
        end: {
          line: 41,
          column: 6
        }
      },
      "16": {
        start: {
          line: 43,
          column: 4
        },
        end: {
          line: 48,
          column: 5
        }
      },
      "17": {
        start: {
          line: 44,
          column: 6
        },
        end: {
          line: 47,
          column: 9
        }
      },
      "18": {
        start: {
          line: 51,
          column: 27
        },
        end: {
          line: 51,
          column: 90
        }
      },
      "19": {
        start: {
          line: 52,
          column: 27
        },
        end: {
          line: 52,
          column: 83
        }
      },
      "20": {
        start: {
          line: 55,
          column: 17
        },
        end: {
          line: 74,
          column: 6
        }
      },
      "21": {
        start: {
          line: 77,
          column: 30
        },
        end: {
          line: 77,
          column: 52
        }
      },
      "22": {
        start: {
          line: 78,
          column: 4
        },
        end: {
          line: 80,
          column: 5
        }
      },
      "23": {
        start: {
          line: 79,
          column: 6
        },
        end: {
          line: 79,
          column: 69
        }
      },
      "24": {
        start: {
          line: 82,
          column: 18
        },
        end: {
          line: 86,
          column: 5
        }
      },
      "25": {
        start: {
          line: 88,
          column: 4
        },
        end: {
          line: 92,
          column: 7
        }
      },
      "26": {
        start: {
          line: 95,
          column: 4
        },
        end: {
          line: 95,
          column: 48
        }
      },
      "27": {
        start: {
          line: 96,
          column: 4
        },
        end: {
          line: 99,
          column: 7
        }
      },
      "28": {
        start: {
          line: 104,
          column: 0
        },
        end: {
          line: 168,
          column: 3
        }
      },
      "29": {
        start: {
          line: 108,
          column: 2
        },
        end: {
          line: 167,
          column: 3
        }
      },
      "30": {
        start: {
          line: 109,
          column: 32
        },
        end: {
          line: 109,
          column: 40
        }
      },
      "31": {
        start: {
          line: 112,
          column: 17
        },
        end: {
          line: 114,
          column: 6
        }
      },
      "32": {
        start: {
          line: 116,
          column: 4
        },
        end: {
          line: 120,
          column: 5
        }
      },
      "33": {
        start: {
          line: 117,
          column: 6
        },
        end: {
          line: 119,
          column: 9
        }
      },
      "34": {
        start: {
          line: 123,
          column: 28
        },
        end: {
          line: 123,
          column: 73
        }
      },
      "35": {
        start: {
          line: 124,
          column: 4
        },
        end: {
          line: 128,
          column: 5
        }
      },
      "36": {
        start: {
          line: 125,
          column: 6
        },
        end: {
          line: 127,
          column: 9
        }
      },
      "37": {
        start: {
          line: 131,
          column: 4
        },
        end: {
          line: 134,
          column: 7
        }
      },
      "38": {
        start: {
          line: 137,
          column: 27
        },
        end: {
          line: 137,
          column: 49
        }
      },
      "39": {
        start: {
          line: 138,
          column: 4
        },
        end: {
          line: 140,
          column: 5
        }
      },
      "40": {
        start: {
          line: 139,
          column: 6
        },
        end: {
          line: 139,
          column: 69
        }
      },
      "41": {
        start: {
          line: 142,
          column: 18
        },
        end: {
          line: 146,
          column: 5
        }
      },
      "42": {
        start: {
          line: 148,
          column: 4
        },
        end: {
          line: 159,
          column: 7
        }
      },
      "43": {
        start: {
          line: 162,
          column: 4
        },
        end: {
          line: 162,
          column: 41
        }
      },
      "44": {
        start: {
          line: 163,
          column: 4
        },
        end: {
          line: 166,
          column: 7
        }
      },
      "45": {
        start: {
          line: 171,
          column: 0
        },
        end: {
          line: 185,
          column: 3
        }
      },
      "46": {
        start: {
          line: 172,
          column: 2
        },
        end: {
          line: 184,
          column: 3
        }
      },
      "47": {
        start: {
          line: 175,
          column: 4
        },
        end: {
          line: 177,
          column: 7
        }
      },
      "48": {
        start: {
          line: 179,
          column: 4
        },
        end: {
          line: 179,
          column: 42
        }
      },
      "49": {
        start: {
          line: 180,
          column: 4
        },
        end: {
          line: 183,
          column: 7
        }
      },
      "50": {
        start: {
          line: 188,
          column: 0
        },
        end: {
          line: 250,
          column: 3
        }
      },
      "51": {
        start: {
          line: 189,
          column: 2
        },
        end: {
          line: 249,
          column: 3
        }
      },
      "52": {
        start: {
          line: 190,
          column: 22
        },
        end: {
          line: 190,
          column: 30
        }
      },
      "53": {
        start: {
          line: 192,
          column: 4
        },
        end: {
          line: 196,
          column: 5
        }
      },
      "54": {
        start: {
          line: 193,
          column: 6
        },
        end: {
          line: 195,
          column: 9
        }
      },
      "55": {
        start: {
          line: 199,
          column: 29
        },
        end: {
          line: 199,
          column: 51
        }
      },
      "56": {
        start: {
          line: 200,
          column: 4
        },
        end: {
          line: 202,
          column: 5
        }
      },
      "57": {
        start: {
          line: 201,
          column: 6
        },
        end: {
          line: 201,
          column: 69
        }
      },
      "58": {
        start: {
          line: 204,
          column: 20
        },
        end: {
          line: 204,
          column: 55
        }
      },
      "59": {
        start: {
          line: 207,
          column: 17
        },
        end: {
          line: 217,
          column: 6
        }
      },
      "60": {
        start: {
          line: 219,
          column: 4
        },
        end: {
          line: 223,
          column: 5
        }
      },
      "61": {
        start: {
          line: 220,
          column: 6
        },
        end: {
          line: 222,
          column: 9
        }
      },
      "62": {
        start: {
          line: 226,
          column: 25
        },
        end: {
          line: 226,
          column: 47
        }
      },
      "63": {
        start: {
          line: 227,
          column: 4
        },
        end: {
          line: 229,
          column: 5
        }
      },
      "64": {
        start: {
          line: 228,
          column: 6
        },
        end: {
          line: 228,
          column: 69
        }
      },
      "65": {
        start: {
          line: 231,
          column: 21
        },
        end: {
          line: 235,
          column: 5
        }
      },
      "66": {
        start: {
          line: 237,
          column: 4
        },
        end: {
          line: 241,
          column: 7
        }
      },
      "67": {
        start: {
          line: 244,
          column: 4
        },
        end: {
          line: 244,
          column: 49
        }
      },
      "68": {
        start: {
          line: 245,
          column: 4
        },
        end: {
          line: 248,
          column: 7
        }
      },
      "69": {
        start: {
          line: 252,
          column: 0
        },
        end: {
          line: 252,
          column: 24
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 11,
            column: 31
          },
          end: {
            line: 11,
            column: 32
          }
        },
        loc: {
          start: {
            line: 11,
            column: 51
          },
          end: {
            line: 20,
            column: 1
          }
        },
        line: 11
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 29,
            column: 27
          },
          end: {
            line: 29,
            column: 28
          }
        },
        loc: {
          start: {
            line: 29,
            column: 47
          },
          end: {
            line: 101,
            column: 1
          }
        },
        line: 29
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 107,
            column: 27
          },
          end: {
            line: 107,
            column: 28
          }
        },
        loc: {
          start: {
            line: 107,
            column: 47
          },
          end: {
            line: 168,
            column: 1
          }
        },
        line: 107
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 171,
            column: 23
          },
          end: {
            line: 171,
            column: 24
          }
        },
        loc: {
          start: {
            line: 171,
            column: 43
          },
          end: {
            line: 185,
            column: 1
          }
        },
        line: 171
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 188,
            column: 24
          },
          end: {
            line: 188,
            column: 25
          }
        },
        loc: {
          start: {
            line: 188,
            column: 44
          },
          end: {
            line: 250,
            column: 1
          }
        },
        line: 188
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 13,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 13,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 13
      },
      "1": {
        loc: {
          start: {
            line: 38,
            column: 14
          },
          end: {
            line: 38,
            column: 38
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 38,
            column: 22
          },
          end: {
            line: 38,
            column: 33
          }
        }, {
          start: {
            line: 38,
            column: 36
          },
          end: {
            line: 38,
            column: 38
          }
        }],
        line: 38
      },
      "2": {
        loc: {
          start: {
            line: 43,
            column: 4
          },
          end: {
            line: 48,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 43,
            column: 4
          },
          end: {
            line: 48,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 43
      },
      "3": {
        loc: {
          start: {
            line: 46,
            column: 15
          },
          end: {
            line: 46,
            column: 63
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 46,
            column: 46
          },
          end: {
            line: 46,
            column: 53
          }
        }, {
          start: {
            line: 46,
            column: 56
          },
          end: {
            line: 46,
            column: 63
          }
        }],
        line: 46
      },
      "4": {
        loc: {
          start: {
            line: 78,
            column: 4
          },
          end: {
            line: 80,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 78,
            column: 4
          },
          end: {
            line: 80,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 78
      },
      "5": {
        loc: {
          start: {
            line: 98,
            column: 15
          },
          end: {
            line: 98,
            column: 95
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 98,
            column: 56
          },
          end: {
            line: 98,
            column: 69
          }
        }, {
          start: {
            line: 98,
            column: 72
          },
          end: {
            line: 98,
            column: 95
          }
        }],
        line: 98
      },
      "6": {
        loc: {
          start: {
            line: 116,
            column: 4
          },
          end: {
            line: 120,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 116,
            column: 4
          },
          end: {
            line: 120,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 116
      },
      "7": {
        loc: {
          start: {
            line: 116,
            column: 8
          },
          end: {
            line: 116,
            column: 31
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 116,
            column: 8
          },
          end: {
            line: 116,
            column: 13
          }
        }, {
          start: {
            line: 116,
            column: 17
          },
          end: {
            line: 116,
            column: 31
          }
        }],
        line: 116
      },
      "8": {
        loc: {
          start: {
            line: 124,
            column: 4
          },
          end: {
            line: 128,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 124,
            column: 4
          },
          end: {
            line: 128,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 124
      },
      "9": {
        loc: {
          start: {
            line: 138,
            column: 4
          },
          end: {
            line: 140,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 138,
            column: 4
          },
          end: {
            line: 140,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 138
      },
      "10": {
        loc: {
          start: {
            line: 165,
            column: 15
          },
          end: {
            line: 165,
            column: 95
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 165,
            column: 56
          },
          end: {
            line: 165,
            column: 69
          }
        }, {
          start: {
            line: 165,
            column: 72
          },
          end: {
            line: 165,
            column: 95
          }
        }],
        line: 165
      },
      "11": {
        loc: {
          start: {
            line: 182,
            column: 15
          },
          end: {
            line: 182,
            column: 95
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 182,
            column: 56
          },
          end: {
            line: 182,
            column: 69
          }
        }, {
          start: {
            line: 182,
            column: 72
          },
          end: {
            line: 182,
            column: 95
          }
        }],
        line: 182
      },
      "12": {
        loc: {
          start: {
            line: 192,
            column: 4
          },
          end: {
            line: 196,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 192,
            column: 4
          },
          end: {
            line: 196,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 192
      },
      "13": {
        loc: {
          start: {
            line: 200,
            column: 4
          },
          end: {
            line: 202,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 200,
            column: 4
          },
          end: {
            line: 202,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 200
      },
      "14": {
        loc: {
          start: {
            line: 219,
            column: 4
          },
          end: {
            line: 223,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 219,
            column: 4
          },
          end: {
            line: 223,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 219
      },
      "15": {
        loc: {
          start: {
            line: 227,
            column: 4
          },
          end: {
            line: 229,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 227,
            column: 4
          },
          end: {
            line: 229,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 227
      },
      "16": {
        loc: {
          start: {
            line: 247,
            column: 15
          },
          end: {
            line: 247,
            column: 98
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 247,
            column: 56
          },
          end: {
            line: 247,
            column: 69
          }
        }, {
          start: {
            line: 247,
            column: 72
          },
          end: {
            line: 247,
            column: 98
          }
        }],
        line: 247
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "301a2f3f071aaadabdf6f9b6c6926a967f54a741"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1ds5ui4vtd = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1ds5ui4vtd();
const express =
/* istanbul ignore next */
(cov_1ds5ui4vtd().s[0]++, require('express'));
const {
  body,
  validationResult
} =
/* istanbul ignore next */
(cov_1ds5ui4vtd().s[1]++, require('express-validator'));
const bcrypt =
/* istanbul ignore next */
(cov_1ds5ui4vtd().s[2]++, require('bcryptjs'));
const jwt =
/* istanbul ignore next */
(cov_1ds5ui4vtd().s[3]++, require('jsonwebtoken'));
const {
  PrismaClient
} =
/* istanbul ignore next */
(cov_1ds5ui4vtd().s[4]++, require('@prisma/client'));
const router =
/* istanbul ignore next */
(cov_1ds5ui4vtd().s[5]++, express.Router());
const prisma =
/* istanbul ignore next */
(cov_1ds5ui4vtd().s[6]++, new PrismaClient());

// Validation middleware
/* istanbul ignore next */
cov_1ds5ui4vtd().s[7]++;
const handleValidationErrors = (req, res, next) => {
  /* istanbul ignore next */
  cov_1ds5ui4vtd().f[0]++;
  const errors =
  /* istanbul ignore next */
  (cov_1ds5ui4vtd().s[8]++, validationResult(req));
  /* istanbul ignore next */
  cov_1ds5ui4vtd().s[9]++;
  if (!errors.isEmpty()) {
    /* istanbul ignore next */
    cov_1ds5ui4vtd().b[0][0]++;
    cov_1ds5ui4vtd().s[10]++;
    return res.status(400).json({
      error: 'Validation failed',
      details: errors.array()
    });
  } else
  /* istanbul ignore next */
  {
    cov_1ds5ui4vtd().b[0][1]++;
  }
  cov_1ds5ui4vtd().s[11]++;
  next();
};

// Register endpoint
/* istanbul ignore next */
cov_1ds5ui4vtd().s[12]++;
router.post('/register', [body('email').isEmail().normalizeEmail(), body('password').isLength({
  min: 6
}), body('firstName').notEmpty().trim(), body('lastName').notEmpty().trim(), body('phone').optional().isMobilePhone('any')], handleValidationErrors, async (req, res) => {
  /* istanbul ignore next */
  cov_1ds5ui4vtd().f[1]++;
  cov_1ds5ui4vtd().s[13]++;
  try {
    const {
      email,
      password,
      firstName,
      lastName,
      phone
    } =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[14]++, req.body);

    // Check if user already exists
    const existingUser =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[15]++, await prisma.user.findFirst({
      where: {
        OR: [{
          email
        }, ...(phone ?
        /* istanbul ignore next */
        (cov_1ds5ui4vtd().b[1][0]++, [{
          phone
        }]) :
        /* istanbul ignore next */
        (cov_1ds5ui4vtd().b[1][1]++, []))]
      }
    }));
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[16]++;
    if (existingUser) {
      /* istanbul ignore next */
      cov_1ds5ui4vtd().b[2][0]++;
      cov_1ds5ui4vtd().s[17]++;
      return res.status(409).json({
        error: 'User already exists',
        field: existingUser.email === email ?
        /* istanbul ignore next */
        (cov_1ds5ui4vtd().b[3][0]++, 'email') :
        /* istanbul ignore next */
        (cov_1ds5ui4vtd().b[3][1]++, 'phone')
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ds5ui4vtd().b[2][1]++;
    }

    // Hash password
    const securityConfig =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[18]++, require('../services/config').configService.getSecurityConfig());
    const hashedPassword =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[19]++, await bcrypt.hash(password, securityConfig.bcryptRounds));

    // Create user
    const user =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[20]++, await prisma.user.create({
      data: {
        email,
        password: hashedPassword,
        firstName,
        lastName,
        phone,
        role: 'CUSTOMER'
      },
      select: {
        id: true,
        email: true,
        firstName: true,
        lastName: true,
        phone: true,
        role: true,
        status: true,
        createdAt: true
      }
    }));

    // Generate JWT token
    const jwtSecretRegister =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[21]++, process.env.JWT_SECRET);
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[22]++;
    if (!jwtSecretRegister) {
      /* istanbul ignore next */
      cov_1ds5ui4vtd().b[4][0]++;
      cov_1ds5ui4vtd().s[23]++;
      throw new Error('JWT_SECRET environment variable is required');
    } else
    /* istanbul ignore next */
    {
      cov_1ds5ui4vtd().b[4][1]++;
    }
    const token =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[24]++, jwt.sign({
      userId: user.id,
      email: user.email,
      role: user.role
    }, jwtSecretRegister, {
      expiresIn: '7d'
    }));
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[25]++;
    res.status(201).json({
      message: 'User registered successfully',
      user,
      token
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[26]++;
    console.error('Registration error:', error);
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[27]++;
    res.status(500).json({
      error: 'Registration failed',
      message: process.env.NODE_ENV === 'development' ?
      /* istanbul ignore next */
      (cov_1ds5ui4vtd().b[5][0]++, error.message) :
      /* istanbul ignore next */
      (cov_1ds5ui4vtd().b[5][1]++, 'Internal server error')
    });
  }
});

// Login endpoint
/* istanbul ignore next */
cov_1ds5ui4vtd().s[28]++;
router.post('/login', [body('email').isEmail().normalizeEmail(), body('password').notEmpty()], handleValidationErrors, async (req, res) => {
  /* istanbul ignore next */
  cov_1ds5ui4vtd().f[2]++;
  cov_1ds5ui4vtd().s[29]++;
  try {
    const {
      email,
      password
    } =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[30]++, req.body);

    // Find user
    const user =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[31]++, await prisma.user.findUnique({
      where: {
        email
      }
    }));
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[32]++;
    if (
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().b[7][0]++, !user) ||
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().b[7][1]++, !user.password)) {
      /* istanbul ignore next */
      cov_1ds5ui4vtd().b[6][0]++;
      cov_1ds5ui4vtd().s[33]++;
      return res.status(401).json({
        error: 'Invalid credentials'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ds5ui4vtd().b[6][1]++;
    }

    // Verify password
    const isValidPassword =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[34]++, await bcrypt.compare(password, user.password));
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[35]++;
    if (!isValidPassword) {
      /* istanbul ignore next */
      cov_1ds5ui4vtd().b[8][0]++;
      cov_1ds5ui4vtd().s[36]++;
      return res.status(401).json({
        error: 'Invalid credentials'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ds5ui4vtd().b[8][1]++;
    }

    // Update last login
    cov_1ds5ui4vtd().s[37]++;
    await prisma.user.update({
      where: {
        id: user.id
      },
      data: {
        lastLoginAt: new Date()
      }
    });

    // Generate JWT token
    const jwtSecretLogin =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[38]++, process.env.JWT_SECRET);
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[39]++;
    if (!jwtSecretLogin) {
      /* istanbul ignore next */
      cov_1ds5ui4vtd().b[9][0]++;
      cov_1ds5ui4vtd().s[40]++;
      throw new Error('JWT_SECRET environment variable is required');
    } else
    /* istanbul ignore next */
    {
      cov_1ds5ui4vtd().b[9][1]++;
    }
    const token =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[41]++, jwt.sign({
      userId: user.id,
      email: user.email,
      role: user.role
    }, jwtSecretLogin, {
      expiresIn: '7d'
    }));
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[42]++;
    res.json({
      message: 'Login successful',
      user: {
        id: user.id,
        email: user.email,
        firstName: user.firstName,
        lastName: user.lastName,
        role: user.role,
        status: user.status
      },
      token
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[43]++;
    console.error('Login error:', error);
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[44]++;
    res.status(500).json({
      error: 'Login failed',
      message: process.env.NODE_ENV === 'development' ?
      /* istanbul ignore next */
      (cov_1ds5ui4vtd().b[10][0]++, error.message) :
      /* istanbul ignore next */
      (cov_1ds5ui4vtd().b[10][1]++, 'Internal server error')
    });
  }
});

// Logout endpoint
/* istanbul ignore next */
cov_1ds5ui4vtd().s[45]++;
router.post('/logout', async (req, res) => {
  /* istanbul ignore next */
  cov_1ds5ui4vtd().f[3]++;
  cov_1ds5ui4vtd().s[46]++;
  try {
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[47]++;
    // In a real implementation, you would invalidate the token
    // For now, we'll just return success
    res.json({
      message: 'Logout successful'
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[48]++;
    console.error('Logout error:', error);
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[49]++;
    res.status(500).json({
      error: 'Logout failed',
      message: process.env.NODE_ENV === 'development' ?
      /* istanbul ignore next */
      (cov_1ds5ui4vtd().b[11][0]++, error.message) :
      /* istanbul ignore next */
      (cov_1ds5ui4vtd().b[11][1]++, 'Internal server error')
    });
  }
});

// Refresh token endpoint
/* istanbul ignore next */
cov_1ds5ui4vtd().s[50]++;
router.post('/refresh', async (req, res) => {
  /* istanbul ignore next */
  cov_1ds5ui4vtd().f[4]++;
  cov_1ds5ui4vtd().s[51]++;
  try {
    const {
      token
    } =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[52]++, req.body);
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[53]++;
    if (!token) {
      /* istanbul ignore next */
      cov_1ds5ui4vtd().b[12][0]++;
      cov_1ds5ui4vtd().s[54]++;
      return res.status(401).json({
        error: 'Token required'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ds5ui4vtd().b[12][1]++;
    }

    // Verify token
    const jwtSecretRefresh =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[55]++, process.env.JWT_SECRET);
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[56]++;
    if (!jwtSecretRefresh) {
      /* istanbul ignore next */
      cov_1ds5ui4vtd().b[13][0]++;
      cov_1ds5ui4vtd().s[57]++;
      throw new Error('JWT_SECRET environment variable is required');
    } else
    /* istanbul ignore next */
    {
      cov_1ds5ui4vtd().b[13][1]++;
    }
    const decoded =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[58]++, jwt.verify(token, jwtSecretRefresh));

    // Get user info
    const user =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[59]++, await prisma.user.findUnique({
      where: {
        id: decoded.userId
      },
      select: {
        id: true,
        email: true,
        firstName: true,
        lastName: true,
        role: true,
        status: true
      }
    }));
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[60]++;
    if (!user) {
      /* istanbul ignore next */
      cov_1ds5ui4vtd().b[14][0]++;
      cov_1ds5ui4vtd().s[61]++;
      return res.status(401).json({
        error: 'User not found'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1ds5ui4vtd().b[14][1]++;
    }

    // Generate new token
    const jwtSecretNew =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[62]++, process.env.JWT_SECRET);
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[63]++;
    if (!jwtSecretNew) {
      /* istanbul ignore next */
      cov_1ds5ui4vtd().b[15][0]++;
      cov_1ds5ui4vtd().s[64]++;
      throw new Error('JWT_SECRET environment variable is required');
    } else
    /* istanbul ignore next */
    {
      cov_1ds5ui4vtd().b[15][1]++;
    }
    const newToken =
    /* istanbul ignore next */
    (cov_1ds5ui4vtd().s[65]++, jwt.sign({
      userId: user.id,
      email: user.email,
      role: user.role
    }, jwtSecretNew, {
      expiresIn: '7d'
    }));
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[66]++;
    res.json({
      message: 'Token refreshed successfully',
      user,
      token: newToken
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[67]++;
    console.error('Token refresh error:', error);
    /* istanbul ignore next */
    cov_1ds5ui4vtd().s[68]++;
    res.status(401).json({
      error: 'Invalid token',
      message: process.env.NODE_ENV === 'development' ?
      /* istanbul ignore next */
      (cov_1ds5ui4vtd().b[16][0]++, error.message) :
      /* istanbul ignore next */
      (cov_1ds5ui4vtd().b[16][1]++, 'Token expired or invalid')
    });
  }
});
/* istanbul ignore next */
cov_1ds5ui4vtd().s[69]++;
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWRzNXVpNHZ0ZCIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwiYm9keSIsInZhbGlkYXRpb25SZXN1bHQiLCJiY3J5cHQiLCJqd3QiLCJQcmlzbWFDbGllbnQiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwcmlzbWEiLCJoYW5kbGVWYWxpZGF0aW9uRXJyb3JzIiwicmVxIiwicmVzIiwibmV4dCIsImYiLCJlcnJvcnMiLCJpc0VtcHR5IiwiYiIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImRldGFpbHMiLCJhcnJheSIsInBvc3QiLCJpc0VtYWlsIiwibm9ybWFsaXplRW1haWwiLCJpc0xlbmd0aCIsIm1pbiIsIm5vdEVtcHR5IiwidHJpbSIsIm9wdGlvbmFsIiwiaXNNb2JpbGVQaG9uZSIsImVtYWlsIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBob25lIiwiZXhpc3RpbmdVc2VyIiwidXNlciIsImZpbmRGaXJzdCIsIndoZXJlIiwiT1IiLCJmaWVsZCIsInNlY3VyaXR5Q29uZmlnIiwiY29uZmlnU2VydmljZSIsImdldFNlY3VyaXR5Q29uZmlnIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwiYmNyeXB0Um91bmRzIiwiY3JlYXRlIiwiZGF0YSIsInJvbGUiLCJzZWxlY3QiLCJpZCIsImNyZWF0ZWRBdCIsImp3dFNlY3JldFJlZ2lzdGVyIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJFcnJvciIsInRva2VuIiwic2lnbiIsInVzZXJJZCIsImV4cGlyZXNJbiIsIm1lc3NhZ2UiLCJjb25zb2xlIiwiTk9ERV9FTlYiLCJmaW5kVW5pcXVlIiwiaXNWYWxpZFBhc3N3b3JkIiwiY29tcGFyZSIsInVwZGF0ZSIsImxhc3RMb2dpbkF0IiwiRGF0ZSIsImp3dFNlY3JldExvZ2luIiwiand0U2VjcmV0UmVmcmVzaCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJqd3RTZWNyZXROZXciLCJuZXdUb2tlbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJhdXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IHsgYm9keSwgdmFsaWRhdGlvblJlc3VsdCB9ID0gcmVxdWlyZSgnZXhwcmVzcy12YWxpZGF0b3InKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKTtcclxuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XHJcbmNvbnN0IHsgUHJpc21hQ2xpZW50IH0gPSByZXF1aXJlKCdAcHJpc21hL2NsaWVudCcpO1xyXG5cclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xyXG5cclxuLy8gVmFsaWRhdGlvbiBtaWRkbGV3YXJlXHJcbmNvbnN0IGhhbmRsZVZhbGlkYXRpb25FcnJvcnMgPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XHJcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcclxuICAgICAgZGV0YWlsczogZXJyb3JzLmFycmF5KClcclxuICAgIH0pO1xyXG4gIH1cclxuICBuZXh0KCk7XHJcbn07XHJcblxyXG4vLyBSZWdpc3RlciBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL3JlZ2lzdGVyJywgW1xyXG4gIGJvZHkoJ2VtYWlsJykuaXNFbWFpbCgpLm5vcm1hbGl6ZUVtYWlsKCksXHJcbiAgYm9keSgncGFzc3dvcmQnKS5pc0xlbmd0aCh7IG1pbjogNiB9KSxcclxuICBib2R5KCdmaXJzdE5hbWUnKS5ub3RFbXB0eSgpLnRyaW0oKSxcclxuICBib2R5KCdsYXN0TmFtZScpLm5vdEVtcHR5KCkudHJpbSgpLFxyXG4gIGJvZHkoJ3Bob25lJykub3B0aW9uYWwoKS5pc01vYmlsZVBob25lKCdhbnknKVxyXG5dLCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIHBob25lIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kRmlyc3Qoe1xyXG4gICAgICB3aGVyZToge1xyXG4gICAgICAgIE9SOiBbXHJcbiAgICAgICAgICB7IGVtYWlsIH0sXHJcbiAgICAgICAgICAuLi4ocGhvbmUgPyBbeyBwaG9uZSB9XSA6IFtdKVxyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnVXNlciBhbHJlYWR5IGV4aXN0cycsXHJcbiAgICAgICAgZmllbGQ6IGV4aXN0aW5nVXNlci5lbWFpbCA9PT0gZW1haWwgPyAnZW1haWwnIDogJ3Bob25lJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIYXNoIHBhc3N3b3JkXHJcbiAgICBjb25zdCBzZWN1cml0eUNvbmZpZyA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL2NvbmZpZycpLmNvbmZpZ1NlcnZpY2UuZ2V0U2VjdXJpdHlDb25maWcoKTtcclxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNlY3VyaXR5Q29uZmlnLmJjcnlwdFJvdW5kcyk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHVzZXJcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgIGZpcnN0TmFtZSxcclxuICAgICAgICBsYXN0TmFtZSxcclxuICAgICAgICBwaG9uZSxcclxuICAgICAgICByb2xlOiAnQ1VTVE9NRVInXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsOiB0cnVlLFxyXG4gICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcclxuICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcclxuICAgICAgICBwaG9uZTogdHJ1ZSxcclxuICAgICAgICByb2xlOiB0cnVlLFxyXG4gICAgICAgIHN0YXR1czogdHJ1ZSxcclxuICAgICAgICBjcmVhdGVkQXQ6IHRydWVcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuXHJcbiAgICBjb25zdCBqd3RTZWNyZXRSZWdpc3RlciA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7XHJcbiAgICBpZiAoIWp3dFNlY3JldFJlZ2lzdGVyKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSldUX1NFQ1JFVCBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxyXG4gICAgICB7IHVzZXJJZDogdXNlci5pZCwgZW1haWw6IHVzZXIuZW1haWwsIHJvbGU6IHVzZXIucm9sZSB9LFxyXG4gICAgICBqd3RTZWNyZXRSZWdpc3RlcixcclxuICAgICAgeyBleHBpcmVzSW46ICc3ZCcgfVxyXG4gICAgKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdVc2VyIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgdXNlcixcclxuICAgICAgdG9rZW5cclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUmVnaXN0cmF0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdSZWdpc3RyYXRpb24gZmFpbGVkJyxcclxuICAgICAgbWVzc2FnZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnJvci5tZXNzYWdlIDogJ0ludGVybmFsIHNlcnZlciBlcnJvcidcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBMb2dpbiBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL2xvZ2luJywgW1xyXG4gIGJvZHkoJ2VtYWlsJykuaXNFbWFpbCgpLm5vcm1hbGl6ZUVtYWlsKCksXHJcbiAgYm9keSgncGFzc3dvcmQnKS5ub3RFbXB0eSgpXHJcbl0sIGhhbmRsZVZhbGlkYXRpb25FcnJvcnMsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gRmluZCB1c2VyXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGVtYWlsIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghdXNlciB8fCAhdXNlci5wYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBjcmVkZW50aWFscydcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmVyaWZ5IHBhc3N3b3JkXHJcbiAgICBjb25zdCBpc1ZhbGlkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XHJcbiAgICBpZiAoIWlzVmFsaWRQYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBjcmVkZW50aWFscydcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIGxhc3QgbG9naW5cclxuICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLmlkIH0sXHJcbiAgICAgIGRhdGE6IHsgbGFzdExvZ2luQXQ6IG5ldyBEYXRlKCkgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgSldUIHRva2VuXHJcbiAgICBjb25zdCBqd3RTZWNyZXRMb2dpbiA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7XHJcbiAgICBpZiAoIWp3dFNlY3JldExvZ2luKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSldUX1NFQ1JFVCBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxyXG4gICAgICB7IHVzZXJJZDogdXNlci5pZCwgZW1haWw6IHVzZXIuZW1haWwsIHJvbGU6IHVzZXIucm9sZSB9LFxyXG4gICAgICBqd3RTZWNyZXRMb2dpbixcclxuICAgICAgeyBleHBpcmVzSW46ICc3ZCcgfVxyXG4gICAgKTtcclxuXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdMb2dpbiBzdWNjZXNzZnVsJyxcclxuICAgICAgdXNlcjoge1xyXG4gICAgICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgIGZpcnN0TmFtZTogdXNlci5maXJzdE5hbWUsXHJcbiAgICAgICAgbGFzdE5hbWU6IHVzZXIubGFzdE5hbWUsXHJcbiAgICAgICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgICAgIHN0YXR1czogdXNlci5zdGF0dXNcclxuICAgICAgfSxcclxuICAgICAgdG9rZW5cclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignTG9naW4gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ0xvZ2luIGZhaWxlZCcsXHJcbiAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gTG9nb3V0IGVuZHBvaW50XHJcbnJvdXRlci5wb3N0KCcvbG9nb3V0JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgeW91IHdvdWxkIGludmFsaWRhdGUgdGhlIHRva2VuXHJcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IHJldHVybiBzdWNjZXNzXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdMb2dvdXQgc3VjY2Vzc2Z1bCdcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdMb2dvdXQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ0xvZ291dCBmYWlsZWQnLFxyXG4gICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIFJlZnJlc2ggdG9rZW4gZW5kcG9pbnRcclxucm91dGVyLnBvc3QoJy9yZWZyZXNoJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdG9rZW4gfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ1Rva2VuIHJlcXVpcmVkJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgdG9rZW5cclxuICAgIGNvbnN0IGp3dFNlY3JldFJlZnJlc2ggPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUO1xyXG4gICAgaWYgKCFqd3RTZWNyZXRSZWZyZXNoKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSldUX1NFQ1JFVCBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgand0U2VjcmV0UmVmcmVzaCk7XHJcbiAgICBcclxuICAgIC8vIEdldCB1c2VyIGluZm9cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IGRlY29kZWQudXNlcklkIH0sXHJcbiAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsOiB0cnVlLFxyXG4gICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcclxuICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcclxuICAgICAgICByb2xlOiB0cnVlLFxyXG4gICAgICAgIHN0YXR1czogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBuZXcgdG9rZW5cclxuICAgIGNvbnN0IGp3dFNlY3JldE5ldyA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7XHJcbiAgICBpZiAoIWp3dFNlY3JldE5ldykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pXVF9TRUNSRVQgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgcmVxdWlyZWQnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgbmV3VG9rZW4gPSBqd3Quc2lnbihcclxuICAgICAgeyB1c2VySWQ6IHVzZXIuaWQsIGVtYWlsOiB1c2VyLmVtYWlsLCByb2xlOiB1c2VyLnJvbGUgfSxcclxuICAgICAgand0U2VjcmV0TmV3LFxyXG4gICAgICB7IGV4cGlyZXNJbjogJzdkJyB9XHJcbiAgICApO1xyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ1Rva2VuIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICB1c2VyLFxyXG4gICAgICB0b2tlbjogbmV3VG9rZW5cclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignVG9rZW4gcmVmcmVzaCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnSW52YWxpZCB0b2tlbicsXHJcbiAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdUb2tlbiBleHBpcmVkIG9yIGludmFsaWQnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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