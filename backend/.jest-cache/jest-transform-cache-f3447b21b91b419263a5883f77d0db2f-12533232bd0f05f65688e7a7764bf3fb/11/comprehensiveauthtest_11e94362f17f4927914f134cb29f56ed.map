{"version":3,"names":["_getJestObj","mock","loggerService","info","jest","fn","warn","error","debug","logAuth","logSecurity","logPerformance","configService","get","key","defaults","getJWTConfig","secret","algorithm","issuer","expiresIn","getSecurityConfig","bcryptRounds","passwordMinLength","passwordMaxLength","maxLoginAttempts","lockoutDuration","getPasswordPolicyConfig","minLength","maxLength","requireUppercase","requireLowercase","requireNumbers","requireSpecialChars","preventSequential","preventRepeated","preventPersonalInfo","bangladeshPatterns","minStrengthScore","getCORSConfig","origin","methods","allowedHeaders","exposedHeaders","isProduction","isDevelopment","isTest","validateConfig","emailService","sendVerificationEmail","mockResolvedValue","success","messageId","sendWelcomeEmail","sendPasswordResetEmail","validateEmail","email","test","isDisposableEmail","generateVerificationToken","smsService","sendOTP","validateBangladeshPhoneNumber","phone","valid","normalizedPhone","operator","substring","otpService","generatePhoneOTP","expiresAt","Date","now","verifyPhoneOTP","resendPhoneOTP","passwordService","validatePasswordStrength","mockReturnValue","isValid","score","strength","feedback","warnings","suggestions","hashPassword","verifyPassword","isPasswordReused","savePasswordToHistory","id","generateStrongPassword","createClient","connect","on","set","setEx","del","hGetAll","hIncrBy","hSet","expire","multi","zRemRangeByScore","mockReturnThis","zAdd","zCard","exec","reply","PrismaClient","$connect","$disconnect","$use","$on","$transaction","user","findMany","findUnique","findFirst","create","update","delete","emailVerificationToken","phoneOTP","passwordHistory","session","require","request","express","bcrypt","jwt","app","describe","prisma","testUser","beforeAll","afterAll","beforeEach","clearAllMocks","deleteMany","where","contains","userData","password","firstName","lastName","role","status","response","post","send","expect","toBe","body","message","toContain","requiresEmailVerification","details","field","requiresPhoneVerification","hashedPassword","hash","emailVerified","phoneVerified","identifier","loginType","token","toBeDefined","unverifiedUser","requiresVerification","userId","rememberMe","rememberMeToken","toHaveBeenCalledWith","objectContaining","type","toBeTruthy","toHaveBeenCalled","otp","code","mockResolvedValueOnce","i","currentPassword","newPassword","confirmPassword","redis","attemptCount","mockImplementation","Promise","resolve","responses","all","lastResponse","length","attempts","lastAttempt","suspicious","ip","any","String","operators","errorBn","addressData","street","city","district","division","postalCode","country","address","stringContaining","Number","requestCount","registerResponse","verifyResponse","loginResponse","forgotResponse","resetResponse"],"sources":["comprehensive-auth.test.js"],"sourcesContent":["/**\r\n * Comprehensive Authentication Tests\r\n * \r\n * This test suite covers all authentication components including:\r\n * - User registration (email and phone)\r\n * - Login mechanisms (standard login, remember me)\r\n * - Email verification system\r\n * - Phone/OTP verification system\r\n * - Password management (change, reset, policy enforcement)\r\n * - Session management (creation, validation, destruction)\r\n * - Security features (rate limiting, account lockout, IP blocking)\r\n * - Bangladesh-specific features\r\n * - Redis integration\r\n */\r\n\r\nconst request = require('supertest');\r\nconst express = require('express');\r\nconst { PrismaClient } = require('@prisma/client');\r\nconst bcrypt = require('bcryptjs');\r\nconst jwt = require('jsonwebtoken');\r\n\r\n// Mock all dependencies before importing\r\njest.mock('../services/logger', () => ({\r\n  loggerService: {\r\n    info: jest.fn(),\r\n    warn: jest.fn(),\r\n    error: jest.fn(),\r\n    debug: jest.fn(),\r\n    logAuth: jest.fn(),\r\n    logSecurity: jest.fn(),\r\n    logPerformance: jest.fn()\r\n  }\r\n}));\r\n\r\njest.mock('../services/config', () => ({\r\n  configService: {\r\n    get: jest.fn((key) => {\r\n      const defaults = {\r\n        'JWT_SECRET': 'test-jwt-secret-key',\r\n        'DATABASE_URL': 'postgresql://test:test@localhost:5432/test_db',\r\n        'REDIS_URL': 'redis://localhost:6379',\r\n        'NODE_ENV': 'test'\r\n      };\r\n      return defaults[key] || null;\r\n    }),\r\n    getJWTConfig: jest.fn(() => ({\r\n      secret: 'test-jwt-secret-key',\r\n      algorithm: 'HS256',\r\n      issuer: 'smart-technologies-bd',\r\n      expiresIn: '1h'\r\n    })),\r\n    getSecurityConfig: jest.fn(() => ({\r\n      bcryptRounds: 12,\r\n      passwordMinLength: 8,\r\n      passwordMaxLength: 128,\r\n      maxLoginAttempts: 5,\r\n      lockoutDuration: 900000\r\n    })),\r\n    getPasswordPolicyConfig: jest.fn(() => ({\r\n      minLength: 8,\r\n      maxLength: 128,\r\n      bcryptRounds: 12,\r\n      requireUppercase: true,\r\n      requireLowercase: true,\r\n      requireNumbers: true,\r\n      requireSpecialChars: true,\r\n      preventSequential: true,\r\n      preventRepeated: true,\r\n      preventPersonalInfo: true,\r\n      bangladeshPatterns: true,\r\n      minStrengthScore: 2\r\n    })),\r\n    getCORSConfig: jest.fn(() => ({\r\n      origin: '*',\r\n      methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\r\n      allowedHeaders: ['Content-Type', 'Authorization', 'X-Requested-With'],\r\n      exposedHeaders: ['X-Total-Count', 'X-Request-ID']\r\n    })),\r\n    isProduction: jest.fn(() => false),\r\n    isDevelopment: jest.fn(() => false),\r\n    isTest: jest.fn(() => true),\r\n    validateConfig: jest.fn()\r\n  }\r\n}));\r\n\r\njest.mock('../services/emailService', () => ({\r\n  emailService: {\r\n    sendVerificationEmail: jest.fn().mockResolvedValue({ success: true, messageId: 'test-message-id' }),\r\n    sendWelcomeEmail: jest.fn().mockResolvedValue({ success: true, messageId: 'welcome-message-id' }),\r\n    sendPasswordResetEmail: jest.fn().mockResolvedValue({ success: true, messageId: 'reset-message-id' }),\r\n    validateEmail: jest.fn((email) => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)),\r\n    isDisposableEmail: jest.fn(() => false),\r\n    generateVerificationToken: jest.fn(() => 'test-verification-token-64-characters-long-string')\r\n  }\r\n}));\r\n\r\njest.mock('../services/smsService', () => ({\r\n  smsService: {\r\n    sendOTP: jest.fn().mockResolvedValue({ success: true, messageId: 'sms-message-id' }),\r\n    validateBangladeshPhoneNumber: jest.fn((phone) => {\r\n      // Simple validation for testing\r\n      if (/^\\+8801[3-9]\\d{8}$/.test(phone)) {\r\n        return {\r\n          valid: true,\r\n          normalizedPhone: phone,\r\n          operator: 'Grameenphone'\r\n        };\r\n      }\r\n      if (/^01[3-9]\\d{8}$/.test(phone)) {\r\n        return {\r\n          valid: true,\r\n          normalizedPhone: `+880${phone.substring(1)}`,\r\n          operator: 'Grameenphone'\r\n        };\r\n      }\r\n      return {\r\n        valid: false,\r\n        error: 'Invalid Bangladesh phone number format'\r\n      };\r\n    })\r\n  }\r\n}));\r\n\r\njest.mock('../services/otpService', () => ({\r\n  otpService: {\r\n    generatePhoneOTP: jest.fn().mockResolvedValue({\r\n      success: true,\r\n      phone: '+8801712345678',\r\n      expiresAt: new Date(Date.now() + 300000),\r\n      mock: true\r\n    }),\r\n    verifyPhoneOTP: jest.fn().mockResolvedValue({\r\n      success: true,\r\n      phone: '+8801712345678'\r\n    }),\r\n    resendPhoneOTP: jest.fn().mockResolvedValue({\r\n      success: true,\r\n      phone: '+8801712345678'\r\n    })\r\n  }\r\n}));\r\n\r\njest.mock('../services/passwordService', () => ({\r\n  passwordService: {\r\n    validatePasswordStrength: jest.fn().mockReturnValue({\r\n      isValid: true,\r\n      score: 4,\r\n      strength: 'strong',\r\n      feedback: [],\r\n      warnings: [],\r\n      suggestions: []\r\n    }),\r\n    hashPassword: jest.fn().mockResolvedValue('hashed_password'),\r\n    verifyPassword: jest.fn().mockResolvedValue(true),\r\n    isPasswordReused: jest.fn().mockResolvedValue(false),\r\n    savePasswordToHistory: jest.fn().mockResolvedValue({ id: 'history-123' }),\r\n    generateStrongPassword: jest.fn().mockReturnValue('GeneratedPassword123!')\r\n  }\r\n}));\r\n\r\njest.mock('redis', () => ({\r\n  createClient: jest.fn(() => ({\r\n    connect: jest.fn().mockResolvedValue(),\r\n    on: jest.fn(),\r\n    get: jest.fn().mockResolvedValue(null),\r\n    set: jest.fn().mockResolvedValue(),\r\n    setEx: jest.fn().mockResolvedValue(),\r\n    del: jest.fn().mockResolvedValue(),\r\n    hGetAll: jest.fn().mockResolvedValue({}),\r\n    hIncrBy: jest.fn().mockResolvedValue(1),\r\n    hSet: jest.fn().mockResolvedValue(1),\r\n    expire: jest.fn().mockResolvedValue(1),\r\n    multi: jest.fn(() => ({\r\n      zRemRangeByScore: jest.fn().mockReturnThis(),\r\n      zAdd: jest.fn().mockReturnThis(),\r\n      zCard: jest.fn().mockResolvedValue(1),\r\n      expire: jest.fn().mockReturnThis(),\r\n      exec: jest.fn().mockResolvedValue([{ reply: 1 }, { reply: 1 }, { reply: 1 }])\r\n    }))\r\n  }))\r\n}));\r\n\r\njest.mock('@prisma/client', () => ({\r\n  PrismaClient: jest.fn(() => ({\r\n    $connect: jest.fn().mockResolvedValue(),\r\n    $disconnect: jest.fn().mockResolvedValue(),\r\n    $use: jest.fn(),\r\n    $on: jest.fn(),\r\n    $transaction: jest.fn(),\r\n    user: {\r\n      findMany: jest.fn(),\r\n      findUnique: jest.fn(),\r\n      findFirst: jest.fn(),\r\n      create: jest.fn(),\r\n      update: jest.fn(),\r\n      delete: jest.fn()\r\n    },\r\n    emailVerificationToken: {\r\n      findMany: jest.fn(),\r\n      findUnique: jest.fn(),\r\n      findFirst: jest.fn(),\r\n      create: jest.fn(),\r\n      update: jest.fn(),\r\n      delete: jest.fn()\r\n    },\r\n    phoneOTP: {\r\n      findMany: jest.fn(),\r\n      findUnique: jest.fn(),\r\n      findFirst: jest.fn(),\r\n      create: jest.fn(),\r\n      update: jest.fn(),\r\n      delete: jest.fn()\r\n    },\r\n    passwordHistory: {\r\n      findMany: jest.fn(),\r\n      findUnique: jest.fn(),\r\n      findFirst: jest.fn(),\r\n      create: jest.fn(),\r\n      update: jest.fn(),\r\n      delete: jest.fn()\r\n    },\r\n    session: {\r\n      findMany: jest.fn(),\r\n      findUnique: jest.fn(),\r\n      findFirst: jest.fn(),\r\n      create: jest.fn(),\r\n      update: jest.fn(),\r\n      delete: jest.fn()\r\n    }\r\n  }))\r\n}));\r\n\r\n// Import after mocking\r\nconst app = require('../index');\r\n\r\ndescribe('Comprehensive Authentication Tests', () => {\r\n  let prisma;\r\n  let testUser;\r\n\r\n  beforeAll(async () => {\r\n    prisma = new (require('@prisma/client').PrismaClient)();\r\n  });\r\n\r\n  afterAll(async () => {\r\n    await prisma.$disconnect();\r\n  });\r\n\r\n  beforeEach(async () => {\r\n    // Reset all mocks\r\n    jest.clearAllMocks();\r\n    \r\n    // Clean up test data\r\n    await prisma.user.deleteMany({\r\n      where: { email: { contains: 'test' } }\r\n    });\r\n    await prisma.emailVerificationToken.deleteMany();\r\n    await prisma.phoneOTP.deleteMany();\r\n    await prisma.session.deleteMany();\r\n    await prisma.passwordHistory.deleteMany();\r\n  });\r\n\r\n  describe('User Registration', () => {\r\n    describe('Email Registration', () => {\r\n      test('should register user with valid email and strong password', async () => {\r\n        const userData = {\r\n          email: 'test@example.com',\r\n          password: 'StrongPassword123!',\r\n          firstName: 'Test',\r\n          lastName: 'User'\r\n        };\r\n\r\n        prisma.user.findFirst.mockResolvedValue(null);\r\n        prisma.user.create.mockResolvedValue({\r\n          id: 'user-123',\r\n          email: userData.email,\r\n          firstName: userData.firstName,\r\n          lastName: userData.lastName,\r\n          role: 'CUSTOMER',\r\n          status: 'PENDING'\r\n        });\r\n        prisma.emailVerificationToken.create.mockResolvedValue({ id: 'token-123' });\r\n\r\n        const response = await request(app)\r\n          .post('/api/v1/auth/register')\r\n          .send(userData);\r\n\r\n        expect(response.status).toBe(201);\r\n        expect(response.body.message).toContain('Please check your email to verify');\r\n        expect(response.body.user.status).toBe('PENDING');\r\n        expect(response.body.requiresEmailVerification).toBe(true);\r\n      });\r\n\r\n      test('should reject registration with weak password', async () => {\r\n        const userData = {\r\n          email: 'test@example.com',\r\n          password: 'weak',\r\n          firstName: 'Test',\r\n          lastName: 'User'\r\n        };\r\n\r\n        const { passwordService } = require('../services/passwordService');\r\n        passwordService.validatePasswordStrength.mockReturnValue({\r\n          isValid: false,\r\n          score: 1,\r\n          strength: 'weak',\r\n          feedback: ['Password is too weak'],\r\n          warnings: ['Common password pattern'],\r\n          suggestions: ['Use a mix of characters']\r\n        });\r\n\r\n        prisma.user.findFirst.mockResolvedValue(null);\r\n\r\n        const response = await request(app)\r\n          .post('/api/v1/auth/register')\r\n          .send(userData);\r\n\r\n        expect(response.status).toBe(400);\r\n        expect(response.body.error).toBe('Password does not meet requirements');\r\n        expect(response.body.details.strength).toBe('weak');\r\n      });\r\n\r\n      test('should reject registration with disposable email', async () => {\r\n        const userData = {\r\n          email: 'test@10minutemail.com',\r\n          password: 'StrongPassword123!',\r\n          firstName: 'Test',\r\n          lastName: 'User'\r\n        };\r\n\r\n        const { emailService } = require('../services/emailService');\r\n        emailService.isDisposableEmail.mockReturnValue(true);\r\n\r\n        prisma.user.findFirst.mockResolvedValue(null);\r\n\r\n        const response = await request(app)\r\n          .post('/api/v1/auth/register')\r\n          .send(userData);\r\n\r\n        expect(response.status).toBe(400);\r\n        expect(response.body.error).toBe('Disposable email not allowed');\r\n      });\r\n\r\n      test('should reject registration with duplicate email', async () => {\r\n        const userData = {\r\n          email: 'test@example.com',\r\n          password: 'StrongPassword123!',\r\n          firstName: 'Test',\r\n          lastName: 'User'\r\n        };\r\n\r\n        prisma.user.findFirst.mockResolvedValue({ id: 'existing-user' });\r\n\r\n        const response = await request(app)\r\n          .post('/api/v1/auth/register')\r\n          .send(userData);\r\n\r\n        expect(response.status).toBe(409);\r\n        expect(response.body.error).toBe('User already exists');\r\n        expect(response.body.field).toBe('email');\r\n      });\r\n    });\r\n\r\n    describe('Phone Registration', () => {\r\n      test('should register user with valid Bangladesh phone number', async () => {\r\n        const userData = {\r\n          phone: '+8801712345678',\r\n          password: 'StrongPassword123!',\r\n          firstName: 'Test',\r\n          lastName: 'User'\r\n        };\r\n\r\n        prisma.user.findFirst.mockResolvedValue(null);\r\n        prisma.user.create.mockResolvedValue({\r\n          id: 'user-123',\r\n          phone: userData.phone,\r\n          firstName: userData.firstName,\r\n          lastName: userData.lastName,\r\n          role: 'CUSTOMER',\r\n          status: 'PENDING'\r\n        });\r\n\r\n        const response = await request(app)\r\n          .post('/api/v1/auth/register')\r\n          .send(userData);\r\n\r\n        expect(response.status).toBe(201);\r\n        expect(response.body.message).toContain('Please check your phone for OTP');\r\n        expect(response.body.user.status).toBe('PENDING');\r\n        expect(response.body.requiresPhoneVerification).toBe(true);\r\n      });\r\n\r\n      test('should reject registration with invalid phone format', async () => {\r\n        const userData = {\r\n          phone: '12345678',\r\n          password: 'StrongPassword123!',\r\n          firstName: 'Test',\r\n          lastName: 'User'\r\n        };\r\n\r\n        const { smsService } = require('../services/smsService');\r\n        smsService.validateBangladeshPhoneNumber.mockReturnValue({\r\n          valid: false,\r\n          error: 'Invalid Bangladesh phone number format'\r\n        });\r\n\r\n        prisma.user.findFirst.mockResolvedValue(null);\r\n\r\n        const response = await request(app)\r\n          .post('/api/v1/auth/register')\r\n          .send(userData);\r\n\r\n        expect(response.status).toBe(400);\r\n        expect(response.body.error).toContain('Invalid phone format');\r\n      });\r\n\r\n      test('should reject registration with unsupported operator', async () => {\r\n        const userData = {\r\n          phone: '+8801212345678', // Unsupported prefix\r\n          password: 'StrongPassword123!',\r\n          firstName: 'Test',\r\n          lastName: 'User'\r\n        };\r\n\r\n        const { smsService } = require('../services/smsService');\r\n        smsService.validateBangladeshPhoneNumber.mockReturnValue({\r\n          valid: false,\r\n          error: 'Unsupported mobile operator'\r\n        });\r\n\r\n        prisma.user.findFirst.mockResolvedValue(null);\r\n\r\n        const response = await request(app)\r\n          .post('/api/v1/auth/register')\r\n          .send(userData);\r\n\r\n        expect(response.status).toBe(400);\r\n        expect(response.body.error).toContain('Unsupported operator');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Login Mechanisms', () => {\r\n    beforeEach(async () => {\r\n      const hashedPassword = await bcrypt.hash('TestPassword123!', 12);\r\n      testUser = {\r\n        id: 'user-123',\r\n        email: 'test@example.com',\r\n        phone: '+8801712345678',\r\n        password: hashedPassword,\r\n        firstName: 'Test',\r\n        lastName: 'User',\r\n        role: 'CUSTOMER',\r\n        status: 'ACTIVE',\r\n        emailVerified: new Date(),\r\n        phoneVerified: new Date()\r\n      };\r\n    });\r\n\r\n    test('should login successfully with email and password', async () => {\r\n      prisma.user.findFirst.mockResolvedValue(testUser);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'TestPassword123!'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('Login successful');\r\n      expect(response.body.user.email).toBe('test@example.com');\r\n      expect(response.body.loginType).toBe('email');\r\n      expect(response.body.token).toBeDefined();\r\n    });\r\n\r\n    test('should login successfully with phone and password', async () => {\r\n      prisma.user.findFirst.mockResolvedValue(testUser);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: '+8801712345678',\r\n          password: 'TestPassword123!'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('Login successful');\r\n      expect(response.body.user.phone).toBe('+8801712345678');\r\n      expect(response.body.loginType).toBe('phone');\r\n      expect(response.body.token).toBeDefined();\r\n    });\r\n\r\n    test('should reject login with invalid credentials', async () => {\r\n      prisma.user.findFirst.mockResolvedValue(testUser);\r\n\r\n      const { passwordService } = require('../services/passwordService');\r\n      passwordService.verifyPassword.mockResolvedValue(false);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'WrongPassword'\r\n        });\r\n\r\n      expect(response.status).toBe(401);\r\n      expect(response.body.error).toBe('Invalid credentials');\r\n    });\r\n\r\n    test('should reject login for unverified user', async () => {\r\n      const unverifiedUser = { ...testUser, status: 'PENDING', emailVerified: null };\r\n      prisma.user.findFirst.mockResolvedValue(unverifiedUser);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'TestPassword123!'\r\n        });\r\n\r\n      expect(response.status).toBe(403);\r\n      expect(response.body.error).toBe('Account not verified');\r\n      expect(response.body.requiresVerification).toBe(true);\r\n    });\r\n\r\n    test('should implement remember me functionality', async () => {\r\n      prisma.user.findFirst.mockResolvedValue(testUser);\r\n      prisma.session.create.mockResolvedValue({\r\n        id: 'session-123',\r\n        userId: testUser.id,\r\n        token: 'remember-token',\r\n        expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // 30 days\r\n      });\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'TestPassword123!',\r\n          rememberMe: true\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.rememberMeToken).toBeDefined();\r\n      expect(prisma.session.create).toHaveBeenCalledWith(\r\n        expect.objectContaining({\r\n          userId: testUser.id,\r\n          type: 'REMEMBER_ME'\r\n        })\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('Email Verification System', () => {\r\n    test('should verify email with valid token', async () => {\r\n      const user = {\r\n        id: 'user-123',\r\n        email: 'test@example.com',\r\n        status: 'PENDING'\r\n      };\r\n\r\n      prisma.emailVerificationToken.findUnique.mockResolvedValue({\r\n        id: 'token-123',\r\n        userId: user.id,\r\n        token: 'valid-token',\r\n        expiresAt: new Date(Date.now() + 60000),\r\n        user\r\n      });\r\n\r\n      prisma.user.update.mockResolvedValue({\r\n        ...user,\r\n        status: 'ACTIVE',\r\n        emailVerified: new Date()\r\n      });\r\n\r\n      prisma.emailVerificationToken.delete.mockResolvedValue({});\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/verify-email')\r\n        .send({ token: 'valid-token' });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('Email verified successfully');\r\n      expect(response.body.user.status).toBe('ACTIVE');\r\n      expect(response.body.user.emailVerified).toBeTruthy();\r\n    });\r\n\r\n    test('should reject verification with expired token', async () => {\r\n      prisma.emailVerificationToken.findUnique.mockResolvedValue({\r\n        id: 'token-123',\r\n        userId: 'user-123',\r\n        token: 'expired-token',\r\n        expiresAt: new Date(Date.now() - 60000) // Expired\r\n      });\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/verify-email')\r\n        .send({ token: 'expired-token' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Token expired');\r\n    });\r\n\r\n    test('should reject verification with invalid token', async () => {\r\n      prisma.emailVerificationToken.findUnique.mockResolvedValue(null);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/verify-email')\r\n        .send({ token: 'invalid-token' });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Invalid token');\r\n    });\r\n\r\n    test('should resend verification email', async () => {\r\n      const user = {\r\n        id: 'user-123',\r\n        email: 'test@example.com',\r\n        status: 'PENDING'\r\n      };\r\n\r\n      prisma.user.findUnique.mockResolvedValue(user);\r\n      prisma.emailVerificationToken.create.mockResolvedValue({ id: 'new-token-123' });\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/resend-verification')\r\n        .send({ email: 'test@example.com' });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('Verification email sent successfully');\r\n    });\r\n  });\r\n\r\n  describe('Phone/OTP Verification System', () => {\r\n    test('should send OTP for valid phone number', async () => {\r\n      const { otpService } = require('../services/otpService');\r\n      const { smsService } = require('../services/smsService');\r\n\r\n      prisma.user.findFirst.mockResolvedValue(null); // Phone not verified yet\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/send-otp')\r\n        .send({ phone: '+8801712345678' });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('OTP sent successfully');\r\n      expect(otpService.generatePhoneOTP).toHaveBeenCalledWith('+8801712345678');\r\n      expect(smsService.sendOTP).toHaveBeenCalled();\r\n    });\r\n\r\n    test('should verify OTP successfully', async () => {\r\n      const { otpService } = require('../services/otpService');\r\n\r\n      otpService.verifyPhoneOTP.mockResolvedValue({\r\n        success: true,\r\n        phone: '+8801712345678'\r\n      });\r\n\r\n      prisma.phoneOTP.findFirst.mockResolvedValue({\r\n        id: 'otp-123',\r\n        phone: '+8801712345678',\r\n        otp: '123456',\r\n        expiresAt: new Date(Date.now() + 300000)\r\n      });\r\n\r\n      prisma.user.update.mockResolvedValue({\r\n        id: 'user-123',\r\n        phone: '+8801712345678',\r\n        phoneVerified: new Date(),\r\n        status: 'ACTIVE'\r\n      });\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/verify-otp')\r\n        .send({\r\n          phone: '+8801712345678',\r\n          otp: '123456'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('OTP verified successfully');\r\n    });\r\n\r\n    test('should reject OTP verification with invalid code', async () => {\r\n      const { otpService } = require('../services/otpService');\r\n      otpService.verifyPhoneOTP.mockResolvedValue({\r\n        success: false,\r\n        code: 'INVALID_OTP'\r\n      });\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/verify-otp')\r\n        .send({\r\n          phone: '+8801712345678',\r\n          otp: 'wrong-otp'\r\n        });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('OTP verification failed');\r\n    });\r\n\r\n    test('should implement OTP rate limiting', async () => {\r\n      const { otpService } = require('../services/otpService');\r\n      \r\n      // Mock rate limiting\r\n      otpService.generatePhoneOTP\r\n        .mockResolvedValueOnce({ success: true })\r\n        .mockResolvedValueOnce({ success: true })\r\n        .mockResolvedValueOnce({ success: true })\r\n        .mockResolvedValue({ success: false, code: 'RATE_LIMIT_EXCEEDED' });\r\n\r\n      // Send 3 successful OTPs\r\n      for (let i = 0; i < 3; i++) {\r\n        await request(app)\r\n          .post('/api/v1/auth/send-otp')\r\n          .send({ phone: '+8801712345678' });\r\n      }\r\n\r\n      // 4th attempt should fail\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/send-otp')\r\n        .send({ phone: '+8801712345678' });\r\n\r\n      expect(response.status).toBe(429);\r\n      expect(response.body.error).toBe('Too many OTP requests');\r\n    });\r\n  });\r\n\r\n  describe('Password Management', () => {\r\n    beforeEach(() => {\r\n      testUser = {\r\n        id: 'user-123',\r\n        email: 'test@example.com',\r\n        password: 'hashed_password',\r\n        status: 'ACTIVE'\r\n      };\r\n    });\r\n\r\n    test('should change password successfully', async () => {\r\n      prisma.user.findUnique.mockResolvedValue(testUser);\r\n      prisma.user.update.mockResolvedValue({});\r\n      prisma.passwordHistory.create.mockResolvedValue({ id: 'history-123' });\r\n\r\n      const { passwordService } = require('../services/passwordService');\r\n      passwordService.verifyPassword.mockResolvedValue(true);\r\n      passwordService.isPasswordReused.mockResolvedValue(false);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/change-password')\r\n        .set('Authorization', 'Bearer valid-token')\r\n        .send({\r\n          currentPassword: 'OldPassword123!',\r\n          newPassword: 'NewPassword456!',\r\n          confirmPassword: 'NewPassword456!'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('Password changed successfully');\r\n      expect(passwordService.validatePasswordStrength).toHaveBeenCalled();\r\n      expect(passwordService.hashPassword).toHaveBeenCalledWith('NewPassword456!');\r\n    });\r\n\r\n    test('should reject password change with incorrect current password', async () => {\r\n      prisma.user.findUnique.mockResolvedValue(testUser);\r\n\r\n      const { passwordService } = require('../services/passwordService');\r\n      passwordService.verifyPassword.mockResolvedValue(false);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/change-password')\r\n        .set('Authorization', 'Bearer valid-token')\r\n        .send({\r\n          currentPassword: 'WrongPassword',\r\n          newPassword: 'NewPassword456!',\r\n          confirmPassword: 'NewPassword456!'\r\n        });\r\n\r\n      expect(response.status).toBe(401);\r\n      expect(response.body.error).toBe('Invalid current password');\r\n    });\r\n\r\n    test('should reject password change if new password was previously used', async () => {\r\n      prisma.user.findUnique.mockResolvedValue(testUser);\r\n\r\n      const { passwordService } = require('../services/passwordService');\r\n      passwordService.verifyPassword.mockResolvedValue(true);\r\n      passwordService.isPasswordReused.mockResolvedValue(true);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/change-password')\r\n        .set('Authorization', 'Bearer valid-token')\r\n        .send({\r\n          currentPassword: 'OldPassword123!',\r\n          newPassword: 'OldPassword456!',\r\n          confirmPassword: 'OldPassword456!'\r\n        });\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.error).toBe('Password already used');\r\n    });\r\n\r\n    test('should send password reset email', async () => {\r\n      prisma.user.findUnique.mockResolvedValue(testUser);\r\n      prisma.emailVerificationToken.create.mockResolvedValue({ id: 'reset-token-123' });\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/forgot-password')\r\n        .send({ email: 'test@example.com' });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('Password reset email sent successfully');\r\n    });\r\n\r\n    test('should reset password with valid token', async () => {\r\n      prisma.emailVerificationToken.findUnique.mockResolvedValue({\r\n        id: 'token-123',\r\n        userId: 'user-123',\r\n        token: 'valid-reset-token',\r\n        expiresAt: new Date(Date.now() + 60000),\r\n        user: testUser\r\n      });\r\n\r\n      prisma.user.update.mockResolvedValue({});\r\n      prisma.emailVerificationToken.delete.mockResolvedValue({});\r\n\r\n      const { passwordService } = require('../services/passwordService');\r\n      passwordService.hashPassword.mockResolvedValue('new-hashed-password');\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/reset-password')\r\n        .send({\r\n          token: 'valid-reset-token',\r\n          newPassword: 'NewPassword123!',\r\n          confirmPassword: 'NewPassword123!'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('Password reset successfully');\r\n    });\r\n\r\n    test('should enforce password policy for Bangladesh users', async () => {\r\n      const userData = {\r\n        email: 'test@example.com',\r\n        password: 'Dhaka123456', // Contains common Bangladeshi pattern\r\n        firstName: 'Test',\r\n        lastName: 'User'\r\n      };\r\n\r\n      const { passwordService } = require('../services/passwordService');\r\n      passwordService.validatePasswordStrength.mockReturnValue({\r\n        isValid: false,\r\n        score: 2,\r\n        strength: 'fair',\r\n        feedback: ['Password cannot contain common Bangladeshi terms'],\r\n        warnings: [],\r\n        suggestions: []\r\n      });\r\n\r\n      prisma.user.findFirst.mockResolvedValue(null);\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/register')\r\n        .send(userData);\r\n\r\n      expect(response.status).toBe(400);\r\n      expect(response.body.details.feedback).toContain('Bangladeshi');\r\n    });\r\n  });\r\n\r\n  describe('Session Management', () => {\r\n    test('should create session on login', async () => {\r\n      prisma.user.findFirst.mockResolvedValue(testUser);\r\n      prisma.session.create.mockResolvedValue({\r\n        id: 'session-123',\r\n        userId: testUser.id,\r\n        token: 'session-token',\r\n        expiresAt: new Date(Date.now() + 3600000)\r\n      });\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'TestPassword123!'\r\n        });\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(prisma.session.create).toHaveBeenCalledWith(\r\n        expect.objectContaining({\r\n          userId: testUser.id,\r\n          type: 'STANDARD'\r\n        })\r\n      );\r\n    });\r\n\r\n    test('should validate session token', async () => {\r\n      prisma.session.findUnique.mockResolvedValue({\r\n        id: 'session-123',\r\n        userId: 'user-123',\r\n        token: 'valid-session-token',\r\n        expiresAt: new Date(Date.now() + 3600000),\r\n        user: testUser\r\n      });\r\n\r\n      const response = await request(app)\r\n        .get('/api/v1/users/profile')\r\n        .set('Authorization', 'Bearer valid-session-token');\r\n\r\n      expect(response.status).toBe(200);\r\n    });\r\n\r\n    test('should reject expired session', async () => {\r\n      prisma.session.findUnique.mockResolvedValue({\r\n        id: 'session-123',\r\n        userId: 'user-123',\r\n        token: 'expired-session-token',\r\n        expiresAt: new Date(Date.now() - 3600000) // Expired\r\n      });\r\n\r\n      const response = await request(app)\r\n        .get('/api/v1/users/profile')\r\n        .set('Authorization', 'Bearer expired-session-token');\r\n\r\n      expect(response.status).toBe(401);\r\n      expect(response.body.error).toBe('Session expired');\r\n    });\r\n\r\n    test('should destroy session on logout', async () => {\r\n      prisma.session.findUnique.mockResolvedValue({\r\n        id: 'session-123',\r\n        userId: 'user-123',\r\n        token: 'valid-session-token'\r\n      });\r\n\r\n      prisma.session.delete.mockResolvedValue({});\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/logout')\r\n        .set('Authorization', 'Bearer valid-session-token');\r\n\r\n      expect(response.status).toBe(200);\r\n      expect(response.body.message).toBe('Logout successful');\r\n      expect(prisma.session.delete).toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('Security Features', () => {\r\n    test('should implement rate limiting on login attempts', async () => {\r\n      const redis = require('redis').createClient();\r\n      \r\n      // Mock Redis to track rate limit\r\n      let attemptCount = 0;\r\n      redis.hIncrBy.mockImplementation(() => {\r\n        attemptCount++;\r\n        return Promise.resolve(attemptCount);\r\n      });\r\n\r\n      prisma.user.findFirst.mockResolvedValue(testUser);\r\n\r\n      // Make multiple login attempts\r\n      const responses = await Promise.all([\r\n        request(app).post('/api/v1/auth/login').send({\r\n          identifier: 'test@example.com',\r\n          password: 'wrong1'\r\n        }),\r\n        request(app).post('/api/v1/auth/login').send({\r\n          identifier: 'test@example.com',\r\n          password: 'wrong2'\r\n        }),\r\n        request(app).post('/api/v1/auth/login').send({\r\n          identifier: 'test@example.com',\r\n          password: 'wrong3'\r\n        }),\r\n        request(app).post('/api/v1/auth/login').send({\r\n          identifier: 'test@example.com',\r\n          password: 'wrong4'\r\n        }),\r\n        request(app).post('/api/v1/auth/login').send({\r\n          identifier: 'test@example.com',\r\n          password: 'wrong5'\r\n        }),\r\n        request(app).post('/api/v1/auth/login').send({\r\n          identifier: 'test@example.com',\r\n          password: 'wrong6'\r\n        })\r\n      ]);\r\n\r\n      // Last attempt should be rate limited\r\n      const lastResponse = responses[responses.length - 1];\r\n      expect(lastResponse.status).toBe(429);\r\n      expect(lastResponse.body.error).toBe('Too many login attempts');\r\n    });\r\n\r\n    test('should implement account lockout after failed attempts', async () => {\r\n      const redis = require('redis').createClient();\r\n      \r\n      // Mock Redis to simulate lockout\r\n      redis.get.mockResolvedValue('locked');\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'password'\r\n        });\r\n\r\n      expect(response.status).toBe(423);\r\n      expect(response.body.error).toBe('Account locked');\r\n      expect(response.body.message).toContain('Too many failed attempts');\r\n    });\r\n\r\n    test('should block suspicious IP addresses', async () => {\r\n      const redis = require('redis').createClient();\r\n      \r\n      // Mock Redis to return suspicious IP\r\n      redis.hGetAll.mockResolvedValue({\r\n        '192.168.1.100': {\r\n          attempts: 15,\r\n          lastAttempt: Date.now(),\r\n          suspicious: true\r\n        }\r\n      });\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .set('X-Forwarded-For', '192.168.1.100')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'password'\r\n        });\r\n\r\n      expect(response.status).toBe(403);\r\n      expect(response.body.error).toBe('Access denied');\r\n      expect(response.body.message).toContain('Suspicious activity');\r\n    });\r\n\r\n    test('should log security events', async () => {\r\n      const { loggerService } = require('../services/logger');\r\n      \r\n      const response = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'wrong-password'\r\n        });\r\n\r\n      expect(loggerService.logSecurity).toHaveBeenCalledWith(\r\n        'LOGIN_FAILED',\r\n        expect.objectContaining({\r\n          ip: expect.any(String),\r\n          identifier: 'test@example.com'\r\n        })\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('Bangladesh-Specific Features', () => {\r\n    test('should validate all major Bangladesh mobile operators', async () => {\r\n      const operators = [\r\n        { phone: '+8801312345678', operator: 'Grameenphone' },\r\n        { phone: '+8801712345678', operator: 'Grameenphone' },\r\n        { phone: '+8801912345678', operator: 'Banglalink' },\r\n        { phone: '+8801812345678', operator: 'Robi' },\r\n        { phone: '+8801512345678', operator: 'Teletalk' },\r\n        { phone: '+8801612345678', operator: 'Airtel' },\r\n        { phone: '+8801412345678', operator: 'Banglalink' }\r\n      ];\r\n\r\n      const { smsService } = require('../services/smsService');\r\n\r\n      for (const { phone, operator } of operators) {\r\n        smsService.validateBangladeshPhoneNumber.mockReturnValue({\r\n          valid: true,\r\n          normalizedPhone: phone,\r\n          operator\r\n        });\r\n\r\n        const response = await request(app)\r\n          .post('/api/v1/auth/send-otp')\r\n          .send({ phone });\r\n\r\n        expect(response.status).toBe(200);\r\n        expect(smsService.validateBangladeshPhoneNumber).toHaveBeenCalledWith(phone);\r\n      }\r\n    });\r\n\r\n    test('should provide localized error messages', async () => {\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/register')\r\n        .send({\r\n          email: 'invalid-email',\r\n          password: 'weak',\r\n          firstName: '',\r\n          lastName: ''\r\n        })\r\n        .set('Accept-Language', 'bn-BD');\r\n\r\n      expect(response.status).toBe(400);\r\n      // Should include Bengali error messages\r\n      expect(response.body.errorBn).toBeDefined();\r\n    });\r\n\r\n    test('should validate Bangladesh address structure', async () => {\r\n      const addressData = {\r\n        street: '123, Dhanmondi Road 8',\r\n        city: 'Dhaka',\r\n        district: 'Dhaka',\r\n        division: 'Dhaka',\r\n        postalCode: '1209',\r\n        country: 'Bangladesh'\r\n      };\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/users/address')\r\n        .set('Authorization', 'Bearer valid-token')\r\n        .send(addressData);\r\n\r\n      expect(response.status).toBe(201);\r\n      expect(response.body.address.division).toBe('Dhaka');\r\n      expect(response.body.address.district).toBe('Dhaka');\r\n    });\r\n  });\r\n\r\n  describe('Redis Integration', () => {\r\n    test('should store sessions in Redis', async () => {\r\n      const redis = require('redis').createClient();\r\n      \r\n      prisma.user.findFirst.mockResolvedValue(testUser);\r\n      prisma.session.create.mockResolvedValue({\r\n        id: 'session-123',\r\n        token: 'redis-session-token'\r\n      });\r\n\r\n      await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'TestPassword123!'\r\n        });\r\n\r\n      expect(redis.setEx).toHaveBeenCalledWith(\r\n        expect.stringContaining('session:'),\r\n        expect.any(Number),\r\n        expect.stringContaining('redis-session-token')\r\n      );\r\n    });\r\n\r\n    test('should track login security in Redis', async () => {\r\n      const redis = require('redis').createClient();\r\n      \r\n      await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'wrong-password'\r\n        });\r\n\r\n      expect(redis.hIncrBy).toHaveBeenCalledWith(\r\n        expect.stringContaining('login_attempts:'),\r\n        expect.any(String),\r\n        1\r\n      );\r\n    });\r\n\r\n    test('should implement rate limiting through Redis', async () => {\r\n      const redis = require('redis').createClient();\r\n      \r\n      let requestCount = 0;\r\n      redis.get.mockImplementation(() => {\r\n        requestCount++;\r\n        return Promise.resolve(requestCount > 3 ? '4' : null);\r\n      });\r\n\r\n      const response = await request(app)\r\n        .post('/api/v1/auth/send-otp')\r\n        .send({ phone: '+8801712345678' });\r\n\r\n      if (requestCount > 3) {\r\n        expect(response.status).toBe(429);\r\n        expect(response.body.error).toBe('Too many requests');\r\n      }\r\n    });\r\n\r\n    test('should store remember me tokens in Redis', async () => {\r\n      const redis = require('redis').createClient();\r\n      \r\n      prisma.user.findFirst.mockResolvedValue(testUser);\r\n      prisma.session.create.mockResolvedValue({\r\n        id: 'remember-session-123',\r\n        token: 'remember-me-token',\r\n        type: 'REMEMBER_ME'\r\n      });\r\n\r\n      await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'TestPassword123!',\r\n          rememberMe: true\r\n        });\r\n\r\n      expect(redis.setEx).toHaveBeenCalledWith(\r\n        expect.stringContaining('remember:'),\r\n        expect.any(Number),\r\n        'remember-me-token'\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('Integration Tests', () => {\r\n    test('should handle complete registration to login flow', async () => {\r\n      // Step 1: Register user\r\n      prisma.user.findFirst.mockResolvedValue(null);\r\n      prisma.user.create.mockResolvedValue({\r\n        id: 'user-123',\r\n        email: 'integration@example.com',\r\n        status: 'PENDING'\r\n      });\r\n      prisma.emailVerificationToken.create.mockResolvedValue({ id: 'token-123' });\r\n\r\n      const registerResponse = await request(app)\r\n        .post('/api/v1/auth/register')\r\n        .send({\r\n          email: 'integration@example.com',\r\n          password: 'StrongPassword123!',\r\n          firstName: 'Integration',\r\n          lastName: 'Test'\r\n        });\r\n\r\n      expect(registerResponse.status).toBe(201);\r\n      expect(registerResponse.body.user.status).toBe('PENDING');\r\n\r\n      // Step 2: Verify email\r\n      prisma.emailVerificationToken.findUnique.mockResolvedValue({\r\n        id: 'token-123',\r\n        userId: 'user-123',\r\n        token: 'verify-token',\r\n        expiresAt: new Date(Date.now() + 60000),\r\n        user: { id: 'user-123', email: 'integration@example.com' }\r\n      });\r\n\r\n      prisma.user.update.mockResolvedValue({\r\n        id: 'user-123',\r\n        email: 'integration@example.com',\r\n        status: 'ACTIVE',\r\n        emailVerified: new Date()\r\n      });\r\n\r\n      const verifyResponse = await request(app)\r\n        .post('/api/v1/auth/verify-email')\r\n        .send({ token: 'verify-token' });\r\n\r\n      expect(verifyResponse.status).toBe(200);\r\n      expect(verifyResponse.body.user.status).toBe('ACTIVE');\r\n\r\n      // Step 3: Login with verified account\r\n      const hashedPassword = await bcrypt.hash('StrongPassword123!', 12);\r\n      prisma.user.findFirst.mockResolvedValue({\r\n        id: 'user-123',\r\n        email: 'integration@example.com',\r\n        password: hashedPassword,\r\n        status: 'ACTIVE',\r\n        emailVerified: new Date()\r\n      });\r\n\r\n      const loginResponse = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'integration@example.com',\r\n          password: 'StrongPassword123!'\r\n        });\r\n\r\n      expect(loginResponse.status).toBe(200);\r\n      expect(loginResponse.body.message).toBe('Login successful');\r\n      expect(loginResponse.body.token).toBeDefined();\r\n    });\r\n\r\n    test('should handle password reset flow end-to-end', async () => {\r\n      // Step 1: Request password reset\r\n      prisma.user.findUnique.mockResolvedValue(testUser);\r\n      prisma.emailVerificationToken.create.mockResolvedValue({ id: 'reset-token-123' });\r\n\r\n      const forgotResponse = await request(app)\r\n        .post('/api/v1/auth/forgot-password')\r\n        .send({ email: 'test@example.com' });\r\n\r\n      expect(forgotResponse.status).toBe(200);\r\n\r\n      // Step 2: Reset password with token\r\n      prisma.emailVerificationToken.findUnique.mockResolvedValue({\r\n        id: 'reset-token-123',\r\n        userId: 'user-123',\r\n        token: 'reset-token',\r\n        expiresAt: new Date(Date.now() + 60000),\r\n        user: testUser\r\n      });\r\n\r\n      const { passwordService } = require('../services/passwordService');\r\n      passwordService.hashPassword.mockResolvedValue('new-hashed-password');\r\n\r\n      const resetResponse = await request(app)\r\n        .post('/api/v1/auth/reset-password')\r\n        .send({\r\n          token: 'reset-token',\r\n          newPassword: 'NewSecurePassword456!',\r\n          confirmPassword: 'NewSecurePassword456!'\r\n        });\r\n\r\n      expect(resetResponse.status).toBe(200);\r\n      expect(resetResponse.body.message).toBe('Password reset successfully');\r\n\r\n      // Step 3: Login with new password\r\n      prisma.user.findFirst.mockResolvedValue({\r\n        ...testUser,\r\n        password: 'new-hashed-password'\r\n      });\r\n\r\n      passwordService.verifyPassword.mockResolvedValue(true);\r\n\r\n      const loginResponse = await request(app)\r\n        .post('/api/v1/auth/login')\r\n        .send({\r\n          identifier: 'test@example.com',\r\n          password: 'NewSecurePassword456!'\r\n        });\r\n\r\n      expect(loginResponse.status).toBe(200);\r\n    });\r\n  });\r\n});"],"mappings":"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","ignoreList":[]}