{"version":3,"names":["methods","require","http2","_","Test","agent","module","exports","app","options","obj","Error","forEach","method","url","test","del","delete"],"sources":["index.js"],"sourcesContent":["'use strict';\n\n/**\n * Module dependencies.\n */\nconst methods = require('methods');\nlet http2;\ntry {\n  http2 = require('http2'); // eslint-disable-line global-require\n} catch (_) {\n  // eslint-disable-line no-empty\n}\nconst Test = require('./lib/test.js');\nconst agent = require('./lib/agent.js');\n\n/**\n * Test against the given `app`,\n * returning a new `Test`.\n *\n * @param {Function|Server|String} app\n * @return {Test}\n * @api public\n */\nmodule.exports = function(app, options = {}) {\n  const obj = {};\n\n  if (typeof app === 'function') {\n    if (options.http2) {\n      if (!http2) {\n        throw new Error(\n          'supertest: this version of Node.js does not support http2'\n        );\n      }\n    }\n  }\n\n  methods.forEach(function(method) {\n    obj[method] = function(url) {\n      var test = new Test(app, method, url, options.http2);\n      if (options.http2) {\n        test.http2();\n      }\n      return test;\n    };\n  });\n\n  // Support previous use of del\n  obj.del = obj.delete;\n\n  return obj;\n};\n\n/**\n * Expose `Test`\n */\nmodule.exports.Test = Test;\n\n/**\n * Expose the agent function\n */\nmodule.exports.agent = agent;\n"],"mappings":"AAAA,YAAY;;AAEZ;AACA;AACA;AACA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,IAAIC,KAAK;AACT,IAAI;EACFA,KAAK,GAAGD,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;AAC5B,CAAC,CAAC,OAAOE,CAAC,EAAE;EACV;AAAA;AAEF,MAAMC,IAAI,GAAGH,OAAO,CAAC,eAAe,CAAC;AACrC,MAAMI,KAAK,GAAGJ,OAAO,CAAC,gBAAgB,CAAC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAK,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EAC3C,MAAMC,GAAG,GAAG,CAAC,CAAC;EAEd,IAAI,OAAOF,GAAG,KAAK,UAAU,EAAE;IAC7B,IAAIC,OAAO,CAACP,KAAK,EAAE;MACjB,IAAI,CAACA,KAAK,EAAE;QACV,MAAM,IAAIS,KAAK,CACb,2DACF,CAAC;MACH;IACF;EACF;EAEAX,OAAO,CAACY,OAAO,CAAC,UAASC,MAAM,EAAE;IAC/BH,GAAG,CAACG,MAAM,CAAC,GAAG,UAASC,GAAG,EAAE;MAC1B,IAAIC,IAAI,GAAG,IAAIX,IAAI,CAACI,GAAG,EAAEK,MAAM,EAAEC,GAAG,EAAEL,OAAO,CAACP,KAAK,CAAC;MACpD,IAAIO,OAAO,CAACP,KAAK,EAAE;QACjBa,IAAI,CAACb,KAAK,CAAC,CAAC;MACd;MACA,OAAOa,IAAI;IACb,CAAC;EACH,CAAC,CAAC;;EAEF;EACAL,GAAG,CAACM,GAAG,GAAGN,GAAG,CAACO,MAAM;EAEpB,OAAOP,GAAG;AACZ,CAAC;;AAED;AACA;AACA;AACAJ,MAAM,CAACC,OAAO,CAACH,IAAI,GAAGA,IAAI;;AAE1B;AACA;AACA;AACAE,MAAM,CAACC,OAAO,CAACF,KAAK,GAAGA,KAAK","ignoreList":[]}