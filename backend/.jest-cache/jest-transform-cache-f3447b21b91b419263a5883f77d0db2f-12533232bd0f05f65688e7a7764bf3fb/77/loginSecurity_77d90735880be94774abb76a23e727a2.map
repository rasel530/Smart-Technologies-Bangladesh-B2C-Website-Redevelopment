{"version":3,"names":["cov_2f6xv8am1g","actualCoverage","loginSecurityService","s","require","loggerService","LoginSecurityMiddleware","constructor","f","logger","enforce","req","res","next","identifier","password","body","ip","userAgent","get","process","env","DISABLE_LOGIN_SECURITY","b","userLockout","isUserLockedOut","isLocked","logSecurity","lockoutReason","reason","lockedAt","expiresAt","remainingTime","status","json","error","message","messageBn","lockoutDetails","Math","ceil","ipBlock","isIPBlocked","isBlocked","blockReason","blockedAt","blockDetails","suspiciousCheck","checkSuspiciousPatterns","isSuspicious","reasons","riskScore","captchaRequired","isCaptchaRequired","riskFactors","attempts","getAttemptCount","suspiciousPatterns","delay","calculateProgressiveDelay","Promise","resolve","setTimeout","addSecurityHeaders","userLocked","ipBlocked","suspiciousActivity","progressiveDelay","securityContext","deviceFingerprint","generateDeviceFingerprint","stats","getLoginAttemptStats","userAttempts","ipAttempts","set","toString","Date","toISOString","recordSuccessfulLogin","user","clearFailedAttempts","id","userId","timestamp","recordFailedLogin","authError","recordFailedAttempt","loginRateLimit","options","config","windowMs","max","skipSuccessfulRequests","key","now","windowStart","redis","pipeline","zRemRangeByScore","zAdd","score","value","random","zCard","expire","results","exec","currentCount","reply","count","limit","path","originalUrl","retryAfter","rateLimitDetails","resetTime","validateSecurity","validationErrors","push","violationCount","length","violations","loginSecurityMiddleware","module","exports"],"sources":["loginSecurity.js"],"sourcesContent":["const { loginSecurityService } = require('../services/loginSecurityService');\r\nconst { loggerService } = require('../services/logger');\r\n\r\nclass LoginSecurityMiddleware {\r\n  constructor() {\r\n    this.loginSecurityService = loginSecurityService;\r\n    this.logger = loggerService;\r\n  }\r\n\r\n  // Main login security middleware\r\n  enforce() {\r\n    return async (req, res, next) => {\r\n      try {\r\n        const { identifier, password } = req.body;\r\n        const ip = req.ip;\r\n        const userAgent = req.get('User-Agent');\r\n\r\n        // Skip security checks for testing mode if configured\r\n        if (process.env.DISABLE_LOGIN_SECURITY === 'true') {\r\n          return next();\r\n        }\r\n\r\n        // Check if user is locked out\r\n        const userLockout = await this.loginSecurityService.isUserLockedOut(identifier);\r\n        if (userLockout.isLocked) {\r\n          this.logger.logSecurity('Blocked Login Attempt - User Locked Out', null, {\r\n            identifier,\r\n            ip,\r\n            userAgent,\r\n            lockoutReason: userLockout.reason,\r\n            lockedAt: userLockout.lockedAt,\r\n            expiresAt: userLockout.expiresAt,\r\n            remainingTime: userLockout.remainingTime\r\n          });\r\n\r\n          return res.status(423).json({\r\n            error: 'Account locked',\r\n            message: 'Your account has been temporarily locked due to too many failed login attempts',\r\n            messageBn: 'অত্যাধিক লগইন চেষ্টার কারণে আপনার অ্যাকাউন্ট সাময়কি করা হয়েছে',\r\n            lockoutDetails: {\r\n              reason: userLockout.reason,\r\n              lockedAt: userLockout.lockedAt,\r\n              expiresAt: userLockout.expiresAt,\r\n              remainingTime: Math.ceil(userLockout.remainingTime / 1000 / 60) // minutes\r\n            }\r\n          });\r\n        }\r\n\r\n        // Check if IP is blocked\r\n        const ipBlock = await this.loginSecurityService.isIPBlocked(ip);\r\n        if (ipBlock.isBlocked) {\r\n          this.logger.logSecurity('Blocked Login Attempt - IP Blocked', null, {\r\n            identifier,\r\n            ip,\r\n            userAgent,\r\n            blockReason: ipBlock.reason,\r\n            blockedAt: ipBlock.blockedAt,\r\n            expiresAt: ipBlock.expiresAt,\r\n            remainingTime: ipBlock.remainingTime\r\n          });\r\n\r\n          return res.status(423).json({\r\n            error: 'IP blocked',\r\n            message: 'Your IP address has been temporarily blocked due to suspicious activity',\r\n            messageBn: 'সন্দেহিত কার্যকলার কারণে আপনার IP ঠিকানা সাময়কি করা হয়েছে',\r\n            blockDetails: {\r\n              reason: ipBlock.reason,\r\n              blockedAt: ipBlock.blockedAt,\r\n              expiresAt: ipBlock.expiresAt,\r\n              remainingTime: Math.ceil(ipBlock.remainingTime / 1000 / 60) // minutes\r\n            }\r\n          });\r\n        }\r\n\r\n        // Check for suspicious patterns\r\n        const suspiciousCheck = await this.loginSecurityService.checkSuspiciousPatterns(identifier, ip, userAgent);\r\n        if (suspiciousCheck.isSuspicious) {\r\n          this.logger.logSecurity('Suspicious Login Pattern Detected', null, {\r\n            identifier,\r\n            ip,\r\n            userAgent,\r\n            reasons: suspiciousCheck.reasons,\r\n            riskScore: suspiciousCheck.riskScore\r\n          });\r\n        }\r\n\r\n        // Check if captcha is required\r\n        const captchaRequired = await this.loginSecurityService.isCaptchaRequired(identifier, ip);\r\n        if (captchaRequired) {\r\n          return res.status(429).json({\r\n            error: 'Captcha required',\r\n            message: 'Please complete the captcha verification to continue',\r\n            messageBn: 'অবির্চ করতে চালিয় করতে অনুগ্রহ করুন',\r\n            captchaRequired: true,\r\n            riskFactors: {\r\n              attempts: await this.getAttemptCount(identifier, ip),\r\n              suspiciousPatterns: suspiciousCheck.reasons\r\n            }\r\n          });\r\n        }\r\n\r\n        // Calculate progressive delay\r\n        const delay = await this.loginSecurityService.calculateProgressiveDelay(identifier, ip);\r\n        if (delay > 0) {\r\n          this.logger.logSecurity('Progressive Delay Applied', null, {\r\n            identifier,\r\n            ip,\r\n            delay,\r\n            userAgent\r\n          });\r\n\r\n          // Apply delay before proceeding\r\n          await new Promise(resolve => setTimeout(resolve, delay));\r\n        }\r\n\r\n        // Add security headers to response\r\n        this.addSecurityHeaders(res, {\r\n          userLocked: userLockout.isLocked,\r\n          ipBlocked: ipBlock.isBlocked,\r\n          captchaRequired,\r\n          suspiciousActivity: suspiciousCheck.isSuspicious,\r\n          progressiveDelay: delay\r\n        });\r\n\r\n        // Attach security context to request for use in login route\r\n        req.securityContext = {\r\n          userLockout,\r\n          ipBlock,\r\n          suspiciousCheck,\r\n          captchaRequired,\r\n          progressiveDelay: delay,\r\n          deviceFingerprint: this.loginSecurityService.generateDeviceFingerprint(req)\r\n        };\r\n\r\n        next();\r\n\r\n      } catch (error) {\r\n        this.logger.error('Login security middleware error', error.message, {\r\n          ip: req.ip,\r\n          userAgent: req.get('User-Agent'),\r\n          identifier: req.body.identifier\r\n        });\r\n\r\n        // Fail open - allow request but log error\r\n        next();\r\n      }\r\n    };\r\n  }\r\n\r\n  // Get attempt count for response\r\n  async getAttemptCount(identifier, ip) {\r\n    try {\r\n      const stats = await this.loginSecurityService.getLoginAttemptStats(identifier, ip);\r\n      return {\r\n        userAttempts: stats.userAttempts,\r\n        ipAttempts: stats.ipAttempts\r\n      };\r\n    } catch (error) {\r\n      return { userAttempts: 0, ipAttempts: 0 };\r\n    }\r\n  }\r\n\r\n  // Add security headers to response\r\n  addSecurityHeaders(res, securityContext) {\r\n    // Add security-related headers\r\n    res.set({\r\n      'X-Login-Security-Enabled': 'true',\r\n      'X-User-Locked': securityContext.userLocked.toString(),\r\n      'X-IP-Blocked': securityContext.ipBlocked.toString(),\r\n      'X-Captcha-Required': securityContext.captchaRequired.toString(),\r\n      'X-Suspicious-Activity': securityContext.suspiciousActivity.toString(),\r\n      'X-Progressive-Delay': securityContext.progressiveDelay.toString(),\r\n      'X-Security-Timestamp': new Date().toISOString()\r\n    });\r\n  }\r\n\r\n  // Record successful login (clears failed attempts)\r\n  recordSuccessfulLogin(req, user) {\r\n    return async (req, res, next) => {\r\n      try {\r\n        const { identifier } = req.body;\r\n        const ip = req.ip;\r\n        const userAgent = req.get('User-Agent');\r\n\r\n        // Clear failed attempts after successful login\r\n        await this.loginSecurityService.clearFailedAttempts(identifier, ip);\r\n\r\n        this.logger.logSecurity('Successful Login', user.id, {\r\n          identifier,\r\n          ip,\r\n          userAgent,\r\n          userId: user.id,\r\n          timestamp: new Date().toISOString()\r\n        });\r\n\r\n        // Add success headers\r\n        res.set({\r\n          'X-Login-Status': 'success',\r\n          'X-Security-Cleared': 'true',\r\n          'X-Login-Timestamp': new Date().toISOString()\r\n        });\r\n\r\n        next();\r\n\r\n      } catch (error) {\r\n        this.logger.error('Error recording successful login', error.message);\r\n        next();\r\n      }\r\n    };\r\n  }\r\n\r\n  // Record failed login attempt\r\n  recordFailedLogin() {\r\n    return async (req, res, next) => {\r\n      try {\r\n        const { identifier } = req.body;\r\n        const ip = req.ip;\r\n        const userAgent = req.get('User-Agent');\r\n\r\n        // Record failed attempt with reason\r\n        const reason = req.authError || 'invalid_credentials';\r\n        await this.loginSecurityService.recordFailedAttempt(identifier, ip, userAgent, reason);\r\n\r\n        // Add failure headers\r\n        res.set({\r\n          'X-Login-Status': 'failed',\r\n          'X-Failure-Reason': reason,\r\n          'X-Login-Timestamp': new Date().toISOString()\r\n        });\r\n\r\n        next();\r\n\r\n      } catch (error) {\r\n        this.logger.error('Error recording failed login', error.message);\r\n        next();\r\n      }\r\n    };\r\n  }\r\n\r\n  // Rate limiting middleware specifically for login endpoints\r\n  loginRateLimit(options = {}) {\r\n    return async (req, res, next) => {\r\n      try {\r\n        const config = {\r\n          windowMs: options.windowMs || 15 * 60 * 1000, // 15 minutes\r\n          max: options.max || 10, // 10 login attempts per window\r\n          message: options.message || 'Too many login attempts, please try again later.',\r\n          skipSuccessfulRequests: options.skipSuccessfulRequests !== false\r\n        };\r\n\r\n        const ip = req.ip;\r\n        const key = `login_rate_limit:${ip}`;\r\n        const now = Date.now();\r\n        const windowStart = now - config.windowMs;\r\n\r\n        if (this.loginSecurityService.redis) {\r\n          // Use Redis for distributed rate limiting\r\n          const pipeline = this.loginSecurityService.redis.pipeline();\r\n          \r\n          // Remove old entries\r\n          pipeline.zRemRangeByScore(key, 0, windowStart);\r\n          \r\n          // Add current request\r\n          pipeline.zAdd(key, [{ score: now, value: `${now}-${Math.random()}` }]);\r\n          \r\n          // Get current count\r\n          pipeline.zCard(key);\r\n          \r\n          // Set expiration\r\n          pipeline.expire(key, Math.ceil(config.windowMs / 1000));\r\n          \r\n          const results = await pipeline.exec();\r\n          const currentCount = results[2].reply;\r\n\r\n          if (currentCount > config.max) {\r\n            this.logger.logSecurity('Login Rate Limit Exceeded', null, {\r\n              ip,\r\n              userAgent: req.get('User-Agent'),\r\n              count: currentCount,\r\n              limit: config.max,\r\n              windowMs: config.windowMs,\r\n              path: req.originalUrl\r\n            });\r\n\r\n            return res.status(429).json({\r\n              error: 'Too many login attempts',\r\n              message: config.message,\r\n              messageBn: 'অত্যাধিক লগইন চেষ্টা, অনুগ্রহ পরে চেষ্টা করুন',\r\n              retryAfter: Math.ceil(config.windowMs / 1000),\r\n              rateLimitDetails: {\r\n                currentCount,\r\n                limit: config.max,\r\n                windowMs: config.windowMs,\r\n                resetTime: new Date(now + config.windowMs).toISOString()\r\n              }\r\n            });\r\n          }\r\n\r\n          // Add rate limit headers\r\n          res.set({\r\n            'X-Login-RateLimit-Limit': config.max,\r\n            'X-Login-RateLimit-Remaining': Math.max(0, config.max - currentCount),\r\n            'X-Login-RateLimit-Reset': new Date(now + config.windowMs).toISOString()\r\n          });\r\n        }\r\n\r\n        next();\r\n\r\n      } catch (error) {\r\n        this.logger.error('Login rate limiting error', error.message);\r\n        next(); // Fail open\r\n      }\r\n    };\r\n  }\r\n\r\n  // Enhanced security validation middleware\r\n  validateSecurity() {\r\n    return (req, res, next) => {\r\n      try {\r\n        const securityContext = req.securityContext;\r\n        \r\n        if (!securityContext) {\r\n          return next();\r\n        }\r\n\r\n        // Additional validation based on security context\r\n        const validationErrors = [];\r\n\r\n        // Check for high-risk patterns\r\n        if (securityContext.suspiciousCheck.riskScore >= 5) {\r\n          validationErrors.push('High risk activity detected');\r\n        }\r\n\r\n        // Check for multiple security violations\r\n        let violationCount = 0;\r\n        if (securityContext.userLocked.isLocked) { violationCount++; }\r\n        if (securityContext.ipBlock.isBlocked) { violationCount++; }\r\n        if (securityContext.captchaRequired) { violationCount++; }\r\n        if (securityContext.suspiciousCheck.isSuspicious) { violationCount++; }\r\n\r\n        if (violationCount >= 2) {\r\n          validationErrors.push('Multiple security violations detected');\r\n        }\r\n\r\n        if (validationErrors.length > 0) {\r\n          this.logger.logSecurity('Security Validation Failed', null, {\r\n            ip: req.ip,\r\n            userAgent: req.get('User-Agent'),\r\n            identifier: req.body.identifier,\r\n            validationErrors,\r\n            securityContext\r\n          });\r\n\r\n          return res.status(403).json({\r\n            error: 'Security validation failed',\r\n            message: 'Your request has been blocked due to security concerns',\r\n            messageBn: 'নিরাপত্তিগিয় উদ্বেগ আপনার অনুরোধ ব্লক করা হয়েছে',\r\n            validationErrors,\r\n            securityContext: {\r\n              riskScore: securityContext.suspiciousCheck.riskScore,\r\n              violations: violationCount\r\n            }\r\n          });\r\n        }\r\n\r\n        next();\r\n\r\n      } catch (error) {\r\n        this.logger.error('Security validation error', error.message);\r\n        next();\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nconst loginSecurityMiddleware = new LoginSecurityMiddleware();\r\n\r\nmodule.exports = {\r\n  LoginSecurityMiddleware,\r\n  loginSecurityMiddleware\r\n};"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}