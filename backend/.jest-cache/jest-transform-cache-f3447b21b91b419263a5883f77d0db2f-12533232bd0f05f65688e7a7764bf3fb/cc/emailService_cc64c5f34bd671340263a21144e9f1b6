fd11e5fa5e8227bcd685536fce71acba
const nodemailer = require('nodemailer');
const crypto = require('crypto');
const configService = require('./config');
const {
  loggerService
} = require('./logger');
class EmailService {
  constructor() {
    this.config = configService;
    this.logger = loggerService;
    this.transporter = null;
    this.initializeTransporter();
  }
  initializeTransporter() {
    try {
      const emailConfig = this.config.getEmailConfig();
      if (!emailConfig.host || !emailConfig.user || !emailConfig.pass !== -1) {
        this.logger.warn('Email service not configured - missing SMTP settings');
        return;
      }
      this.transporter = nodemailer.createTransporter({
        host: emailConfig.host,
        port: emailConfig.port,
        secure: emailConfig.secure,
        auth: {
          user: emailConfig.user,
          pass: emailConfig.pass
        },
        tls: {
          rejectUnauthorized: false // Allow for some SMTP configurations
        }
      });

      // Verify connection
      this.transporter.verify((error, success) => {
        if (error) {
          if (this.logger && typeof this.logger.error === 'function') {
            this.logger.error('Email service connection failed', error.message);
          }
          this.transporter = null;
        } else {
          if (this.logger && typeof this.logger.info === 'function') {
            this.logger.info('Email service connected successfully');
          }
        }
      });
    } catch (error) {
      this.logger.error('Failed to initialize email service', error.message);
      this.transporter = null;
    }
  }

  // Generate secure verification token
  generateVerificationToken() {
    return crypto.randomBytes(32).toString('hex');
  }

  // Create verification email template
  createVerificationEmailTemplate(userName, verificationToken) {
    const verificationUrl = `${process.env.FRONTEND_URL || 'http://localhost:3000'}/verify-email?token=${verificationToken}`;
    return {
      subject: 'Verify Your Email Address - Smart Technologies Bangladesh',
      html: `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Email Verification</title>
          <style>
            body {
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              line-height: 1.6;
              color: #333;
              max-width: 600px;
              margin: 0 auto;
              padding: 20px;
              background-color: #f4f4f4;
            }
            .container {
              background-color: #ffffff;
              padding: 30px;
              border-radius: 10px;
              box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            .header {
              text-align: center;
              margin-bottom: 30px;
            }
            .logo {
              color: #2c3e50;
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 10px;
            }
            .content {
              margin-bottom: 30px;
            }
            .button {
              display: inline-block;
              background-color: #3498db;
              color: white;
              padding: 12px 30px;
              text-decoration: none;
              border-radius: 5px;
              font-weight: bold;
              margin: 20px 0;
            }
            .button:hover {
              background-color: #2980b9;
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              padding-top: 20px;
              border-top: 1px solid #eee;
              font-size: 12px;
              color: #666;
            }
            .bangladesh-text {
              color: #006a4e;
              font-weight: bold;
            }
          </style>
        </head>
        <body>
          <div class="container">
            <div class="header">
              <div class="logo">Smart Technologies Bangladesh</div>
              <p class="bangladesh-text">‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ü‡ßá‡¶ï‡¶®‡ßã‡¶≤‡¶ú‡¶ø‡¶∏ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂</p>
            </div>
            
            <div class="content">
              <h2>Welcome, ${userName}!</h2>
              <p>Thank you for registering with Smart Technologies Bangladesh. To complete your registration and activate your account, please verify your email address by clicking the button below.</p>
              
              <p><strong>Important:</strong> This verification link will expire in 24 hours for security reasons.</p>
              
              <div style="text-align: center;">
                <a href="${verificationUrl}" class="button">Verify Email Address</a>
              </div>
              
              <p>If the button above doesn't work, you can copy and paste this link into your browser:</p>
              <p style="word-break: break-all; color: #666; font-size: 12px;">${verificationUrl}</p>
            </div>
            
            <div class="footer">
              <p>This is an automated message from Smart Technologies Bangladesh.</p>
              <p>If you didn't create an account, please ignore this email.</p>
              <p>&copy; 2024 Smart Technologies Bangladesh. All rights reserved.</p>
            </div>
          </div>
        </body>
        </html>
      `,
      text: `
        Welcome to Smart Technologies Bangladesh!
        
        Hello ${userName},
        
        Thank you for registering with us. Please verify your email address by visiting:
        ${verificationUrl}
        
        This link will expire in 24 hours.
        
        If you didn't create an account, please ignore this email.
        
        Smart Technologies Bangladesh
        ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ü‡ßá‡¶ï‡¶®‡ßã‡¶≤‡¶ú‡¶ø‡¶∏ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂
      `
    };
  }

  // Send verification email
  async sendVerificationEmail(userEmail, userName, verificationToken) {
    try {
      if (!this.transporter) {
        throw new Error('Email service not available');
      }
      const emailConfig = this.config.getEmailConfig();
      const emailTemplate = this.createVerificationEmailTemplate(userName, verificationToken);
      const mailOptions = {
        from: `"Smart Technologies Bangladesh" <${emailConfig.from}>`,
        to: userEmail,
        subject: emailTemplate.subject,
        html: emailTemplate.html,
        text: emailTemplate.text
      };
      const result = await this.transporter.sendMail(mailOptions);
      this.logger.info('Verification email sent successfully', {
        to: userEmail,
        messageId: result.messageId,
        timestamp: new Date().toISOString()
      });
      return {
        success: true,
        messageId: result.messageId,
        timestamp: new Date().toISOString()
      };
    } catch (error) {
      this.logger.error('Failed to send verification email', error.message, {
        to: userEmail,
        errorType: error.name
      });
      return {
        success: false,
        error: error.message,
        timestamp: new Date().toISOString()
      };
    }
  }

  // Send welcome email after verification
  async sendWelcomeEmail(userEmail, userName) {
    try {
      if (!this.transporter) {
        throw new Error('Email service not available');
      }
      const emailConfig = this.config.getEmailConfig();
      const mailOptions = {
        from: `"Smart Technologies Bangladesh" <${emailConfig.from}>`,
        to: userEmail,
        subject: 'Welcome to Smart Technologies Bangladesh - Account Activated!',
        html: `
          <!DOCTYPE html>
          <html>
            <head>
              <meta charset="utf-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>Welcome</title>
              <style>
                body {
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  line-height: 1.6;
                  color: #333;
                  max-width: 600px;
                  margin: 0 auto;
                  padding: 20px;
                  background-color: #f4f4f4;
                }
                .container {
                  background-color: #ffffff;
                  padding: 30px;
                  border-radius: 10px;
                  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }
                .header {
                  text-align: center;
                  margin-bottom: 30px;
                }
                .logo {
                  color: #2c3e50;
                  font-size: 24px;
                  font-weight: bold;
                  margin-bottom: 10px;
                }
                .content {
                  margin-bottom: 30px;
                }
                .success {
                  background-color: #d4edda;
                  color: #155724;
                  padding: 15px;
                  border-radius: 5px;
                  margin: 20px 0;
                  border: 1px solid #c3e6cb;
                }
                .footer {
                  text-align: center;
                  margin-top: 30px;
                  padding-top: 20px;
                  border-top: 1px solid #eee;
                  font-size: 12px;
                  color: #666;
                }
                .bangladesh-text {
                  color: #006a4e;
                  font-weight: bold;
                }
              </style>
            </head>
          <body>
            <div class="container">
              <div class="header">
                <div class="logo">Smart Technologies Bangladesh</div>
              </div>
              
              <div class="success">
                <h2>üéâ Welcome, ${userName}!</h2>
                <p>Your account has been successfully activated and you can now start shopping with us.</p>
              </div>
              
              <p>Thank you for choosing Smart Technologies Bangladesh for your technology needs. We're excited to have you as part of our community!</p>
              
              <p>You can now:</p>
              <ul>
                <li>Browse our extensive catalog of products</li>
                <li>Add items to your wishlist</li>
                <li>Place orders and track deliveries</li>
                <li>Leave reviews for products you purchase</li>
              </ul>
              
              <p>If you have any questions, our customer support team is here to help.</p>
              
              <div class="footer">
                <p>&copy; 2024 Smart Technologies Bangladesh. All rights reserved.</p>
              </div>
            </div>
          </body>
        </html>
        `,
        text: `
          Welcome to Smart Technologies Bangladesh!
          
          Hello ${userName},
          
          Your account has been successfully activated! You can now start shopping with us.
          
          Thank you for choosing Smart Technologies Bangladesh.
          
          Smart Technologies Bangladesh
          ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ü‡ßá‡¶ï‡¶®‡ßã‡¶≤‡¶ú‡¶ø‡¶∏ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂
        `
      };
      const result = await this.transporter.sendMail(mailOptions);
      this.logger.info('Welcome email sent successfully', {
        to: userEmail,
        messageId: result.messageId,
        timestamp: new Date().toISOString()
      });
      return {
        success: true,
        messageId: result.messageId
      };
    } catch (error) {
      this.logger.error('Failed to send welcome email', error.message);
      return {
        success: false,
        error: error.message
      };
    }
  }

  // Check if email service is available
  isAvailable() {
    return this.transporter !== null;
  }

  // Validate email format (basic validation)
  validateEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  // Check for disposable email domains (basic check)
  isDisposableEmail(email) {
    const disposableDomains = ['10minutemail.com', 'tempmail.org', 'guerrillamail.com', 'mailinator.com', 'yopmail.com', 'throwaway.email'];
    const domain = email.split('@')[1]?.toLowerCase();
    return disposableDomains.includes(domain);
  }

  // Create password reset email template
  createPasswordResetEmailTemplate(userName, temporaryPassword, resetToken) {
    const resetUrl = `${process.env.FRONTEND_URL || 'http://localhost:3000'}/reset-password?token=${resetToken}`;
    return {
      subject: 'Password Reset - Smart Technologies Bangladesh',
      html: `
        <!DOCTYPE html>
        <html>
          <head>
            <meta charset="utf-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>Password Reset</title>
              <style>
                body {
                  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                  line-height: 1.6;
                  color: #333;
                  max-width: 600px;
                  margin: 0 auto;
                  padding: 20px;
                  background-color: #f4f4f4;
                }
                .container {
                  background-color: #ffffff;
                  padding: 30px;
                  border-radius: 10px;
                  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }
                .header {
                  text-align: center;
                  margin-bottom: 30px;
                }
                .logo {
                  color: #2c3e50;
                  font-size: 24px;
                  font-weight: bold;
                  margin-bottom: 10px;
                }
                .content {
                  margin-bottom: 30px;
                }
                .temp-password {
                  background-color: #fff3cd;
                  border: 1px solid #ffeaa7;
                  padding: 15px;
                  border-radius: 5px;
                  margin: 20px 0;
                  font-family: monospace;
                  font-size: 16px;
                  text-align: center;
                }
                .button {
                  display: inline-block;
                  background-color: #e74c3c;
                  color: white;
                  padding: 12px 30px;
                  text-decoration: none;
                  border-radius: 5px;
                  font-weight: bold;
                  margin: 20px 0;
                }
                .button:hover {
                  background-color: #c0392b;
                }
                .warning {
                  background-color: #f8d7da;
                  color: #721c24;
                  padding: 15px;
                  border-radius: 5px;
                  margin: 20px 0;
                  border: 1px solid #f5c6cb;
                }
                .footer {
                  text-align: center;
                  margin-top: 30px;
                  padding-top: 20px;
                  border-top: 1px solid #eee;
                  font-size: 12px;
                  color: #666;
                }
                .bangladesh-text {
                  color: #006a4e;
                  font-weight: bold;
                }
              </style>
            </head>
          <body>
            <div class="container">
              <div class="header">
                <div class="logo">Smart Technologies Bangladesh</div>
                <p class="bangladesh-text">‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ü‡ßá‡¶ï‡¶®‡ßã‡¶≤‡¶ú‡¶ø‡¶∏ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂</p>
            </div>
            
            <div class="content">
              <h2>Password Reset Request</h2>
              <p>Hello ${userName},</p>
              <p>We received a request to reset your password for your Smart Technologies Bangladesh account. A temporary password has been generated for you.</p>
              
              <div class="temp-password">
                <strong>Temporary Password:</strong><br>
                ${temporaryPassword}
              </div>
              
              <div class="warning">
                <strong>‚ö†Ô∏è Important Security Notice:</strong><br>
                  This temporary password will allow you to log in, but you must change it immediately after logging in for security reasons.
              </div>
              
              <p>You can also use the link below to reset your password manually:</p>
              
              <div style="text-align: center;">
                <a href="${resetUrl}" class="button">Reset Password</a>
              </div>
              
              <p>If the button above doesn't work, you can copy and paste this link into your browser:</p>
              <p style="word-break: break-all; color: #666; font-size: 12px;">${resetUrl}</p>
            </div>
            
            <div class="footer">
              <p>If the button above doesn't work, you can copy and paste this link into your browser:</p>
              <p><strong>Important:</strong> This reset link will expire in 1 hour for security reasons.</p>
            </div>
          </div>
        </body>
        </html>
      `,
      text: `
        Password Reset - Smart Technologies Bangladesh
        
        Hello ${userName},
        
        We received a request to reset your password for your Smart Technologies Bangladesh account.
        
        Temporary Password: ${temporaryPassword}
        
        ‚ö†Ô∏è IMPORTANT: You must change this password immediately after logging in for security reasons.
        
        You can also reset your password using this link: ${resetUrl}
        
        This link will expire in 1 hour.
        
        If you didn't request this password reset, please contact our support team immediately.
        
        Smart Technologies Bangladesh
        ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶ü‡ßá‡¶ï‡¶®‡ßã‡¶≤‡¶ú‡¶ø‡¶∏ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂
      `
    };
  }

  // Send password reset email
  async sendPasswordResetEmail(userEmail, userName, temporaryPassword, resetToken) {
    try {
      if (!this.transporter) {
        throw new Error('Email service not available');
      }
      const emailConfig = this.config.getEmailConfig();
      const emailTemplate = this.createPasswordResetEmailTemplate(userName, temporaryPassword, resetToken);
      const mailOptions = {
        from: `"Smart Technologies Bangladesh" <${emailConfig.from}>`,
        to: userEmail,
        subject: emailTemplate.subject,
        html: emailTemplate.html,
        text: emailTemplate.text
      };
      const result = await this.transporter.sendMail(mailOptions);
      this.logger.info('Password reset email sent successfully', {
        to: userEmail,
        messageId: result.messageId,
        timestamp: new Date().toISOString()
      });
      return {
        success: true,
        messageId: result.messageId,
        timestamp: new Date().toISOString()
      };
    } catch (error) {
      this.logger.error('Failed to send password reset email', error.message, {
        to: userEmail,
        errorType: error.name
      });
      return {
        success: false,
        error: error.message,
        timestamp: new Date().toISOString()
      };
    }
  }
}

// Singleton instance
const emailService = new EmailService();
module.exports = {
  EmailService,
  emailService
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwicmVxdWlyZSIsImNyeXB0byIsImNvbmZpZ1NlcnZpY2UiLCJsb2dnZXJTZXJ2aWNlIiwiRW1haWxTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJsb2dnZXIiLCJ0cmFuc3BvcnRlciIsImluaXRpYWxpemVUcmFuc3BvcnRlciIsImVtYWlsQ29uZmlnIiwiZ2V0RW1haWxDb25maWciLCJob3N0IiwidXNlciIsInBhc3MiLCJ3YXJuIiwiY3JlYXRlVHJhbnNwb3J0ZXIiLCJwb3J0Iiwic2VjdXJlIiwiYXV0aCIsInRscyIsInJlamVjdFVuYXV0aG9yaXplZCIsInZlcmlmeSIsImVycm9yIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJpbmZvIiwiZ2VuZXJhdGVWZXJpZmljYXRpb25Ub2tlbiIsInJhbmRvbUJ5dGVzIiwidG9TdHJpbmciLCJjcmVhdGVWZXJpZmljYXRpb25FbWFpbFRlbXBsYXRlIiwidXNlck5hbWUiLCJ2ZXJpZmljYXRpb25Ub2tlbiIsInZlcmlmaWNhdGlvblVybCIsInByb2Nlc3MiLCJlbnYiLCJGUk9OVEVORF9VUkwiLCJzdWJqZWN0IiwiaHRtbCIsInRleHQiLCJzZW5kVmVyaWZpY2F0aW9uRW1haWwiLCJ1c2VyRW1haWwiLCJFcnJvciIsImVtYWlsVGVtcGxhdGUiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInJlc3VsdCIsInNlbmRNYWlsIiwibWVzc2FnZUlkIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZXJyb3JUeXBlIiwibmFtZSIsInNlbmRXZWxjb21lRW1haWwiLCJpc0F2YWlsYWJsZSIsInZhbGlkYXRlRW1haWwiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwiaXNEaXNwb3NhYmxlRW1haWwiLCJkaXNwb3NhYmxlRG9tYWlucyIsImRvbWFpbiIsInNwbGl0IiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImNyZWF0ZVBhc3N3b3JkUmVzZXRFbWFpbFRlbXBsYXRlIiwidGVtcG9yYXJ5UGFzc3dvcmQiLCJyZXNldFRva2VuIiwicmVzZXRVcmwiLCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsIiwiZW1haWxTZXJ2aWNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImVtYWlsU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBub2RlbWFpbGVyID0gcmVxdWlyZSgnbm9kZW1haWxlcicpO1xyXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcclxuY29uc3QgY29uZmlnU2VydmljZSA9IHJlcXVpcmUoJy4vY29uZmlnJyk7XHJcbmNvbnN0IHsgbG9nZ2VyU2VydmljZSB9ID0gcmVxdWlyZSgnLi9sb2dnZXInKTtcclxuXHJcbmNsYXNzIEVtYWlsU2VydmljZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZ1NlcnZpY2U7XHJcbiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlclNlcnZpY2U7XHJcbiAgICB0aGlzLnRyYW5zcG9ydGVyID0gbnVsbDtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZVRyYW5zcG9ydGVyKCk7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplVHJhbnNwb3J0ZXIoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBlbWFpbENvbmZpZyA9IHRoaXMuY29uZmlnLmdldEVtYWlsQ29uZmlnKCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWVtYWlsQ29uZmlnLmhvc3QgfHwgIWVtYWlsQ29uZmlnLnVzZXIgfHwgIWVtYWlsQ29uZmlnLnBhc3MgIT09IC0xKSB7XHJcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybignRW1haWwgc2VydmljZSBub3QgY29uZmlndXJlZCAtIG1pc3NpbmcgU01UUCBzZXR0aW5ncycpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy50cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0ZXIoe1xyXG4gICAgICAgIGhvc3Q6IGVtYWlsQ29uZmlnLmhvc3QsXHJcbiAgICAgICAgcG9ydDogZW1haWxDb25maWcucG9ydCxcclxuICAgICAgICBzZWN1cmU6IGVtYWlsQ29uZmlnLnNlY3VyZSxcclxuICAgICAgICBhdXRoOiB7XHJcbiAgICAgICAgICB1c2VyOiBlbWFpbENvbmZpZy51c2VyLFxyXG4gICAgICAgICAgcGFzczogZW1haWxDb25maWcucGFzc1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGxzOiB7XHJcbiAgICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIC8vIEFsbG93IGZvciBzb21lIFNNVFAgY29uZmlndXJhdGlvbnNcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVmVyaWZ5IGNvbm5lY3Rpb25cclxuICAgICAgdGhpcy50cmFuc3BvcnRlci52ZXJpZnkoKGVycm9yLCBzdWNjZXNzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5sb2dnZXIgJiYgdHlwZW9mIHRoaXMubG9nZ2VyLmVycm9yID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdFbWFpbCBzZXJ2aWNlIGNvbm5lY3Rpb24gZmFpbGVkJywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnRyYW5zcG9ydGVyID0gbnVsbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHRoaXMubG9nZ2VyICYmIHR5cGVvZiB0aGlzLmxvZ2dlci5pbmZvID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oJ0VtYWlsIHNlcnZpY2UgY29ubmVjdGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGVtYWlsIHNlcnZpY2UnLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgdGhpcy50cmFuc3BvcnRlciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZW5lcmF0ZSBzZWN1cmUgdmVyaWZpY2F0aW9uIHRva2VuXHJcbiAgZ2VuZXJhdGVWZXJpZmljYXRpb25Ub2tlbigpIHtcclxuICAgIHJldHVybiBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTtcclxuICB9XHJcblxyXG4gIC8vIENyZWF0ZSB2ZXJpZmljYXRpb24gZW1haWwgdGVtcGxhdGVcclxuICBjcmVhdGVWZXJpZmljYXRpb25FbWFpbFRlbXBsYXRlKHVzZXJOYW1lLCB2ZXJpZmljYXRpb25Ub2tlbikge1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uVXJsID0gYCR7cHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnfS92ZXJpZnktZW1haWw/dG9rZW49JHt2ZXJpZmljYXRpb25Ub2tlbn1gO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWJqZWN0OiAnVmVyaWZ5IFlvdXIgRW1haWwgQWRkcmVzcyAtIFNtYXJ0IFRlY2hub2xvZ2llcyBCYW5nbGFkZXNoJyxcclxuICAgICAgaHRtbDogYFxyXG4gICAgICAgIDwhRE9DVFlQRSBodG1sPlxyXG4gICAgICAgIDxodG1sPlxyXG4gICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XHJcbiAgICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxyXG4gICAgICAgICAgPHRpdGxlPkVtYWlsIFZlcmlmaWNhdGlvbjwvdGl0bGU+XHJcbiAgICAgICAgICA8c3R5bGU+XHJcbiAgICAgICAgICAgIGJvZHkge1xyXG4gICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnU2Vnb2UgVUknLCBUYWhvbWEsIEdlbmV2YSwgVmVyZGFuYSwgc2Fucy1zZXJpZjtcclxuICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS42O1xyXG4gICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xyXG4gICAgICAgICAgICAgIG1heC13aWR0aDogNjAwcHg7XHJcbiAgICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XHJcbiAgICAgICAgICAgICAgcGFkZGluZzogMjBweDtcclxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5jb250YWluZXIge1xyXG4gICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XHJcbiAgICAgICAgICAgICAgcGFkZGluZzogMzBweDtcclxuICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5oZWFkZXIge1xyXG4gICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC5sb2dvIHtcclxuICAgICAgICAgICAgICBjb2xvcjogIzJjM2U1MDtcclxuICAgICAgICAgICAgICBmb250LXNpemU6IDI0cHg7XHJcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuY29udGVudCB7XHJcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuYnV0dG9uIHtcclxuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzM0OThkYjtcclxuICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICAgICAgcGFkZGluZzogMTJweCAzMHB4O1xyXG4gICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLmJ1dHRvbjpob3ZlciB7XHJcbiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI5ODBiOTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuZm9vdGVyIHtcclxuICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcclxuICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogMjBweDtcclxuICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTtcclxuICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgICAgICAgY29sb3I6ICM2NjY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLmJhbmdsYWRlc2gtdGV4dCB7XHJcbiAgICAgICAgICAgICAgY29sb3I6ICMwMDZhNGU7XHJcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIDwvc3R5bGU+XHJcbiAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgIDxib2R5PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvZ29cIj5TbWFydCBUZWNobm9sb2dpZXMgQmFuZ2xhZGVzaDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxwIGNsYXNzPVwiYmFuZ2xhZGVzaC10ZXh0XCI+4Ka44KeN4Kau4Ka+4Kaw4KeN4KafIOCmn+Cnh+CmleCmqOCni+CmsuCmnOCmv+CmuCDgpqzgpr7gpoLgprLgpr7gpqbgp4fgprY8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICA8aDI+V2VsY29tZSwgJHt1c2VyTmFtZX0hPC9oMj5cclxuICAgICAgICAgICAgICA8cD5UaGFuayB5b3UgZm9yIHJlZ2lzdGVyaW5nIHdpdGggU21hcnQgVGVjaG5vbG9naWVzIEJhbmdsYWRlc2guIFRvIGNvbXBsZXRlIHlvdXIgcmVnaXN0cmF0aW9uIGFuZCBhY3RpdmF0ZSB5b3VyIGFjY291bnQsIHBsZWFzZSB2ZXJpZnkgeW91ciBlbWFpbCBhZGRyZXNzIGJ5IGNsaWNraW5nIHRoZSBidXR0b24gYmVsb3cuPC9wPlxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+SW1wb3J0YW50Ojwvc3Ryb25nPiBUaGlzIHZlcmlmaWNhdGlvbiBsaW5rIHdpbGwgZXhwaXJlIGluIDI0IGhvdXJzIGZvciBzZWN1cml0eSByZWFzb25zLjwvcD5cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyO1wiPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7dmVyaWZpY2F0aW9uVXJsfVwiIGNsYXNzPVwiYnV0dG9uXCI+VmVyaWZ5IEVtYWlsIEFkZHJlc3M8L2E+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPHA+SWYgdGhlIGJ1dHRvbiBhYm92ZSBkb2Vzbid0IHdvcmssIHlvdSBjYW4gY29weSBhbmQgcGFzdGUgdGhpcyBsaW5rIGludG8geW91ciBicm93c2VyOjwvcD5cclxuICAgICAgICAgICAgICA8cCBzdHlsZT1cIndvcmQtYnJlYWs6IGJyZWFrLWFsbDsgY29sb3I6ICM2NjY7IGZvbnQtc2l6ZTogMTJweDtcIj4ke3ZlcmlmaWNhdGlvblVybH08L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxyXG4gICAgICAgICAgICAgIDxwPlRoaXMgaXMgYW4gYXV0b21hdGVkIG1lc3NhZ2UgZnJvbSBTbWFydCBUZWNobm9sb2dpZXMgQmFuZ2xhZGVzaC48L3A+XHJcbiAgICAgICAgICAgICAgPHA+SWYgeW91IGRpZG4ndCBjcmVhdGUgYW4gYWNjb3VudCwgcGxlYXNlIGlnbm9yZSB0aGlzIGVtYWlsLjwvcD5cclxuICAgICAgICAgICAgICA8cD4mY29weTsgMjAyNCBTbWFydCBUZWNobm9sb2dpZXMgQmFuZ2xhZGVzaC4gQWxsIHJpZ2h0cyByZXNlcnZlZC48L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9ib2R5PlxyXG4gICAgICAgIDwvaHRtbD5cclxuICAgICAgYCxcclxuICAgICAgdGV4dDogYFxyXG4gICAgICAgIFdlbGNvbWUgdG8gU21hcnQgVGVjaG5vbG9naWVzIEJhbmdsYWRlc2ghXHJcbiAgICAgICAgXHJcbiAgICAgICAgSGVsbG8gJHt1c2VyTmFtZX0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgVGhhbmsgeW91IGZvciByZWdpc3RlcmluZyB3aXRoIHVzLiBQbGVhc2UgdmVyaWZ5IHlvdXIgZW1haWwgYWRkcmVzcyBieSB2aXNpdGluZzpcclxuICAgICAgICAke3ZlcmlmaWNhdGlvblVybH1cclxuICAgICAgICBcclxuICAgICAgICBUaGlzIGxpbmsgd2lsbCBleHBpcmUgaW4gMjQgaG91cnMuXHJcbiAgICAgICAgXHJcbiAgICAgICAgSWYgeW91IGRpZG4ndCBjcmVhdGUgYW4gYWNjb3VudCwgcGxlYXNlIGlnbm9yZSB0aGlzIGVtYWlsLlxyXG4gICAgICAgIFxyXG4gICAgICAgIFNtYXJ0IFRlY2hub2xvZ2llcyBCYW5nbGFkZXNoXHJcbiAgICAgICAg4Ka44KeN4Kau4Ka+4Kaw4KeN4KafIOCmn+Cnh+CmleCmqOCni+CmsuCmnOCmv+CmuCDgpqzgpr7gpoLgprLgpr7gpqbgp4fgprZcclxuICAgICAgYFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsXHJcbiAgYXN5bmMgc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHVzZXJFbWFpbCwgdXNlck5hbWUsIHZlcmlmaWNhdGlvblRva2VuKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXRoaXMudHJhbnNwb3J0ZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtYWlsIHNlcnZpY2Ugbm90IGF2YWlsYWJsZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBlbWFpbENvbmZpZyA9IHRoaXMuY29uZmlnLmdldEVtYWlsQ29uZmlnKCk7XHJcbiAgICAgIGNvbnN0IGVtYWlsVGVtcGxhdGUgPSB0aGlzLmNyZWF0ZVZlcmlmaWNhdGlvbkVtYWlsVGVtcGxhdGUodXNlck5hbWUsIHZlcmlmaWNhdGlvblRva2VuKTtcclxuXHJcbiAgICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xyXG4gICAgICAgIGZyb206IGBcIlNtYXJ0IFRlY2hub2xvZ2llcyBCYW5nbGFkZXNoXCIgPCR7ZW1haWxDb25maWcuZnJvbX0+YCxcclxuICAgICAgICB0bzogdXNlckVtYWlsLFxyXG4gICAgICAgIHN1YmplY3Q6IGVtYWlsVGVtcGxhdGUuc3ViamVjdCxcclxuICAgICAgICBodG1sOiBlbWFpbFRlbXBsYXRlLmh0bWwsXHJcbiAgICAgICAgdGV4dDogZW1haWxUZW1wbGF0ZS50ZXh0XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcclxuICAgICAgXHJcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oJ1ZlcmlmaWNhdGlvbiBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseScsIHtcclxuICAgICAgICB0bzogdXNlckVtYWlsLFxyXG4gICAgICAgIG1lc3NhZ2VJZDogcmVzdWx0Lm1lc3NhZ2VJZCxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlSWQ6IHJlc3VsdC5tZXNzYWdlSWQsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsJywgZXJyb3IubWVzc2FnZSwge1xyXG4gICAgICAgIHRvOiB1c2VyRW1haWwsXHJcbiAgICAgICAgZXJyb3JUeXBlOiBlcnJvci5uYW1lXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2VuZCB3ZWxjb21lIGVtYWlsIGFmdGVyIHZlcmlmaWNhdGlvblxyXG4gIGFzeW5jIHNlbmRXZWxjb21lRW1haWwodXNlckVtYWlsLCB1c2VyTmFtZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCF0aGlzLnRyYW5zcG9ydGVyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbWFpbCBzZXJ2aWNlIG5vdCBhdmFpbGFibGUnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZW1haWxDb25maWcgPSB0aGlzLmNvbmZpZy5nZXRFbWFpbENvbmZpZygpO1xyXG5cclxuICAgICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XHJcbiAgICAgICAgZnJvbTogYFwiU21hcnQgVGVjaG5vbG9naWVzIEJhbmdsYWRlc2hcIiA8JHtlbWFpbENvbmZpZy5mcm9tfT5gLFxyXG4gICAgICAgIHRvOiB1c2VyRW1haWwsXHJcbiAgICAgICAgc3ViamVjdDogJ1dlbGNvbWUgdG8gU21hcnQgVGVjaG5vbG9naWVzIEJhbmdsYWRlc2ggLSBBY2NvdW50IEFjdGl2YXRlZCEnLFxyXG4gICAgICAgIGh0bWw6IGBcclxuICAgICAgICAgIDwhRE9DVFlQRSBodG1sPlxyXG4gICAgICAgICAgPGh0bWw+XHJcbiAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxyXG4gICAgICAgICAgICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCI+XHJcbiAgICAgICAgICAgICAgPHRpdGxlPldlbGNvbWU8L3RpdGxlPlxyXG4gICAgICAgICAgICAgIDxzdHlsZT5cclxuICAgICAgICAgICAgICAgIGJvZHkge1xyXG4gICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7XHJcbiAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XHJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xyXG4gICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDYwMHB4O1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW46IDAgYXV0bztcclxuICAgICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDtcclxuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjRmNDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5jb250YWluZXIge1xyXG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xyXG4gICAgICAgICAgICAgICAgICBwYWRkaW5nOiAzMHB4O1xyXG4gICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5oZWFkZXIge1xyXG4gICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAubG9nbyB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMmMzZTUwO1xyXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDI0cHg7XHJcbiAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQge1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3Mge1xyXG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDRlZGRhO1xyXG4gICAgICAgICAgICAgICAgICBjb2xvcjogIzE1NTcyNDtcclxuICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTVweDtcclxuICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW46IDIwcHggMDtcclxuICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2MzZTZjYjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5mb290ZXIge1xyXG4gICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDMwcHg7XHJcbiAgICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAyMHB4O1xyXG4gICAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTtcclxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgICAgICAgICAgICAgICBjb2xvcjogIzY2NjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5iYW5nbGFkZXNoLXRleHQge1xyXG4gICAgICAgICAgICAgICAgICBjb2xvcjogIzAwNmE0ZTtcclxuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPC9zdHlsZT5cclxuICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgPGJvZHk+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibG9nb1wiPlNtYXJ0IFRlY2hub2xvZ2llcyBCYW5nbGFkZXNoPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN1Y2Nlc3NcIj5cclxuICAgICAgICAgICAgICAgIDxoMj7wn46JIFdlbGNvbWUsICR7dXNlck5hbWV9ITwvaDI+XHJcbiAgICAgICAgICAgICAgICA8cD5Zb3VyIGFjY291bnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGFjdGl2YXRlZCBhbmQgeW91IGNhbiBub3cgc3RhcnQgc2hvcHBpbmcgd2l0aCB1cy48L3A+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPHA+VGhhbmsgeW91IGZvciBjaG9vc2luZyBTbWFydCBUZWNobm9sb2dpZXMgQmFuZ2xhZGVzaCBmb3IgeW91ciB0ZWNobm9sb2d5IG5lZWRzLiBXZSdyZSBleGNpdGVkIHRvIGhhdmUgeW91IGFzIHBhcnQgb2Ygb3VyIGNvbW11bml0eSE8L3A+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPHA+WW91IGNhbiBub3c6PC9wPlxyXG4gICAgICAgICAgICAgIDx1bD5cclxuICAgICAgICAgICAgICAgIDxsaT5Ccm93c2Ugb3VyIGV4dGVuc2l2ZSBjYXRhbG9nIG9mIHByb2R1Y3RzPC9saT5cclxuICAgICAgICAgICAgICAgIDxsaT5BZGQgaXRlbXMgdG8geW91ciB3aXNobGlzdDwvbGk+XHJcbiAgICAgICAgICAgICAgICA8bGk+UGxhY2Ugb3JkZXJzIGFuZCB0cmFjayBkZWxpdmVyaWVzPC9saT5cclxuICAgICAgICAgICAgICAgIDxsaT5MZWF2ZSByZXZpZXdzIGZvciBwcm9kdWN0cyB5b3UgcHVyY2hhc2U8L2xpPlxyXG4gICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPHA+SWYgeW91IGhhdmUgYW55IHF1ZXN0aW9ucywgb3VyIGN1c3RvbWVyIHN1cHBvcnQgdGVhbSBpcyBoZXJlIHRvIGhlbHAuPC9wPlxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxwPiZjb3B5OyAyMDI0IFNtYXJ0IFRlY2hub2xvZ2llcyBCYW5nbGFkZXNoLiBBbGwgcmlnaHRzIHJlc2VydmVkLjwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2JvZHk+XHJcbiAgICAgICAgPC9odG1sPlxyXG4gICAgICAgIGAsXHJcbiAgICAgICAgdGV4dDogYFxyXG4gICAgICAgICAgV2VsY29tZSB0byBTbWFydCBUZWNobm9sb2dpZXMgQmFuZ2xhZGVzaCFcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgSGVsbG8gJHt1c2VyTmFtZX0sXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIFlvdXIgYWNjb3VudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgYWN0aXZhdGVkISBZb3UgY2FuIG5vdyBzdGFydCBzaG9wcGluZyB3aXRoIHVzLlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBUaGFuayB5b3UgZm9yIGNob29zaW5nIFNtYXJ0IFRlY2hub2xvZ2llcyBCYW5nbGFkZXNoLlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBTbWFydCBUZWNobm9sb2dpZXMgQmFuZ2xhZGVzaFxyXG4gICAgICAgICAg4Ka44KeN4Kau4Ka+4Kaw4KeN4KafIOCmn+Cnh+CmleCmqOCni+CmsuCmnOCmv+CmuCDgpqzgpr7gpoLgprLgpr7gpqbgp4fgprZcclxuICAgICAgICBgXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcclxuICAgICAgXHJcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oJ1dlbGNvbWUgZW1haWwgc2VudCBzdWNjZXNzZnVsbHknLCB7XHJcbiAgICAgICAgdG86IHVzZXJFbWFpbCxcclxuICAgICAgICBtZXNzYWdlSWQ6IHJlc3VsdC5tZXNzYWdlSWQsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZUlkOiByZXN1bHQubWVzc2FnZUlkXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNlbmQgd2VsY29tZSBlbWFpbCcsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiBlbWFpbCBzZXJ2aWNlIGlzIGF2YWlsYWJsZVxyXG4gIGlzQXZhaWxhYmxlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudHJhbnNwb3J0ZXIgIT09IG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBlbWFpbCBmb3JtYXQgKGJhc2ljIHZhbGlkYXRpb24pXHJcbiAgdmFsaWRhdGVFbWFpbChlbWFpbCkge1xyXG4gICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xyXG4gICAgcmV0dXJuIGVtYWlsUmVnZXgudGVzdChlbWFpbCk7XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBmb3IgZGlzcG9zYWJsZSBlbWFpbCBkb21haW5zIChiYXNpYyBjaGVjaylcclxuICBpc0Rpc3Bvc2FibGVFbWFpbChlbWFpbCkge1xyXG4gICAgY29uc3QgZGlzcG9zYWJsZURvbWFpbnMgPSBbXHJcbiAgICAgICcxMG1pbnV0ZW1haWwuY29tJyxcclxuICAgICAgJ3RlbXBtYWlsLm9yZycsXHJcbiAgICAgICdndWVycmlsbGFtYWlsLmNvbScsXHJcbiAgICAgICdtYWlsaW5hdG9yLmNvbScsXHJcbiAgICAgICd5b3BtYWlsLmNvbScsXHJcbiAgICAgICd0aHJvd2F3YXkuZW1haWwnXHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICBjb25zdCBkb21haW4gPSBlbWFpbC5zcGxpdCgnQCcpWzFdPy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgcmV0dXJuIGRpc3Bvc2FibGVEb21haW5zLmluY2x1ZGVzKGRvbWFpbik7XHJcbiAgfVxyXG5cclxuICAvLyBDcmVhdGUgcGFzc3dvcmQgcmVzZXQgZW1haWwgdGVtcGxhdGVcclxuICBjcmVhdGVQYXNzd29yZFJlc2V0RW1haWxUZW1wbGF0ZSh1c2VyTmFtZSwgdGVtcG9yYXJ5UGFzc3dvcmQsIHJlc2V0VG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc2V0VXJsID0gYCR7cHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnfS9yZXNldC1wYXNzd29yZD90b2tlbj0ke3Jlc2V0VG9rZW59YDtcclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3ViamVjdDogJ1Bhc3N3b3JkIFJlc2V0IC0gU21hcnQgVGVjaG5vbG9naWVzIEJhbmdsYWRlc2gnLFxyXG4gICAgICBodG1sOiBgXHJcbiAgICAgICAgPCFET0NUWVBFIGh0bWw+XHJcbiAgICAgICAgPGh0bWw+XHJcbiAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XHJcbiAgICAgICAgICAgICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cclxuICAgICAgICAgICAgICA8dGl0bGU+UGFzc3dvcmQgUmVzZXQ8L3RpdGxlPlxyXG4gICAgICAgICAgICAgIDxzdHlsZT5cclxuICAgICAgICAgICAgICAgIGJvZHkge1xyXG4gICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7XHJcbiAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XHJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xyXG4gICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDYwMHB4O1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW46IDAgYXV0bztcclxuICAgICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDtcclxuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjRmNDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5jb250YWluZXIge1xyXG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xyXG4gICAgICAgICAgICAgICAgICBwYWRkaW5nOiAzMHB4O1xyXG4gICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5oZWFkZXIge1xyXG4gICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAubG9nbyB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMmMzZTUwO1xyXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDI0cHg7XHJcbiAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQge1xyXG4gICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLnRlbXAtcGFzc3dvcmQge1xyXG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmM2NkO1xyXG4gICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZmZlYWE3O1xyXG4gICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xyXG4gICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xyXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5idXR0b24ge1xyXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlNzRjM2M7XHJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTJweCAzMHB4O1xyXG4gICAgICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmJ1dHRvbjpob3ZlciB7XHJcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjMDM5MmI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAud2FybmluZyB7XHJcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGQ3ZGE7XHJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAjNzIxYzI0O1xyXG4gICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xyXG4gICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZjVjNmNiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmZvb3RlciB7XHJcbiAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMzBweDtcclxuICAgICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XHJcbiAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlO1xyXG4gICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAjNjY2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmJhbmdsYWRlc2gtdGV4dCB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMDA2YTRlO1xyXG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICA8Ym9keT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsb2dvXCI+U21hcnQgVGVjaG5vbG9naWVzIEJhbmdsYWRlc2g8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiYmFuZ2xhZGVzaC10ZXh0XCI+4Ka44KeN4Kau4Ka+4Kaw4KeN4KafIOCmn+Cnh+CmleCmqOCni+CmsuCmnOCmv+CmuCDgpqzgpr7gpoLgprLgpr7gpqbgp4fgprY8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICA8aDI+UGFzc3dvcmQgUmVzZXQgUmVxdWVzdDwvaDI+XHJcbiAgICAgICAgICAgICAgPHA+SGVsbG8gJHt1c2VyTmFtZX0sPC9wPlxyXG4gICAgICAgICAgICAgIDxwPldlIHJlY2VpdmVkIGEgcmVxdWVzdCB0byByZXNldCB5b3VyIHBhc3N3b3JkIGZvciB5b3VyIFNtYXJ0IFRlY2hub2xvZ2llcyBCYW5nbGFkZXNoIGFjY291bnQuIEEgdGVtcG9yYXJ5IHBhc3N3b3JkIGhhcyBiZWVuIGdlbmVyYXRlZCBmb3IgeW91LjwvcD5cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGVtcC1wYXNzd29yZFwiPlxyXG4gICAgICAgICAgICAgICAgPHN0cm9uZz5UZW1wb3JhcnkgUGFzc3dvcmQ6PC9zdHJvbmc+PGJyPlxyXG4gICAgICAgICAgICAgICAgJHt0ZW1wb3JhcnlQYXNzd29yZH1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2FybmluZ1wiPlxyXG4gICAgICAgICAgICAgICAgPHN0cm9uZz7imqDvuI8gSW1wb3J0YW50IFNlY3VyaXR5IE5vdGljZTo8L3N0cm9uZz48YnI+XHJcbiAgICAgICAgICAgICAgICAgIFRoaXMgdGVtcG9yYXJ5IHBhc3N3b3JkIHdpbGwgYWxsb3cgeW91IHRvIGxvZyBpbiwgYnV0IHlvdSBtdXN0IGNoYW5nZSBpdCBpbW1lZGlhdGVseSBhZnRlciBsb2dnaW5nIGluIGZvciBzZWN1cml0eSByZWFzb25zLlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIDxwPllvdSBjYW4gYWxzbyB1c2UgdGhlIGxpbmsgYmVsb3cgdG8gcmVzZXQgeW91ciBwYXNzd29yZCBtYW51YWxseTo8L3A+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjtcIj5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke3Jlc2V0VXJsfVwiIGNsYXNzPVwiYnV0dG9uXCI+UmVzZXQgUGFzc3dvcmQ8L2E+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPHA+SWYgdGhlIGJ1dHRvbiBhYm92ZSBkb2Vzbid0IHdvcmssIHlvdSBjYW4gY29weSBhbmQgcGFzdGUgdGhpcyBsaW5rIGludG8geW91ciBicm93c2VyOjwvcD5cclxuICAgICAgICAgICAgICA8cCBzdHlsZT1cIndvcmQtYnJlYWs6IGJyZWFrLWFsbDsgY29sb3I6ICM2NjY7IGZvbnQtc2l6ZTogMTJweDtcIj4ke3Jlc2V0VXJsfTwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XHJcbiAgICAgICAgICAgICAgPHA+SWYgdGhlIGJ1dHRvbiBhYm92ZSBkb2Vzbid0IHdvcmssIHlvdSBjYW4gY29weSBhbmQgcGFzdGUgdGhpcyBsaW5rIGludG8geW91ciBicm93c2VyOjwvcD5cclxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkltcG9ydGFudDo8L3N0cm9uZz4gVGhpcyByZXNldCBsaW5rIHdpbGwgZXhwaXJlIGluIDEgaG91ciBmb3Igc2VjdXJpdHkgcmVhc29ucy48L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9ib2R5PlxyXG4gICAgICAgIDwvaHRtbD5cclxuICAgICAgYCxcclxuICAgICAgdGV4dDogYFxyXG4gICAgICAgIFBhc3N3b3JkIFJlc2V0IC0gU21hcnQgVGVjaG5vbG9naWVzIEJhbmdsYWRlc2hcclxuICAgICAgICBcclxuICAgICAgICBIZWxsbyAke3VzZXJOYW1lfSxcclxuICAgICAgICBcclxuICAgICAgICBXZSByZWNlaXZlZCBhIHJlcXVlc3QgdG8gcmVzZXQgeW91ciBwYXNzd29yZCBmb3IgeW91ciBTbWFydCBUZWNobm9sb2dpZXMgQmFuZ2xhZGVzaCBhY2NvdW50LlxyXG4gICAgICAgIFxyXG4gICAgICAgIFRlbXBvcmFyeSBQYXNzd29yZDogJHt0ZW1wb3JhcnlQYXNzd29yZH1cclxuICAgICAgICBcclxuICAgICAgICDimqDvuI8gSU1QT1JUQU5UOiBZb3UgbXVzdCBjaGFuZ2UgdGhpcyBwYXNzd29yZCBpbW1lZGlhdGVseSBhZnRlciBsb2dnaW5nIGluIGZvciBzZWN1cml0eSByZWFzb25zLlxyXG4gICAgICAgIFxyXG4gICAgICAgIFlvdSBjYW4gYWxzbyByZXNldCB5b3VyIHBhc3N3b3JkIHVzaW5nIHRoaXMgbGluazogJHtyZXNldFVybH1cclxuICAgICAgICBcclxuICAgICAgICBUaGlzIGxpbmsgd2lsbCBleHBpcmUgaW4gMSBob3VyLlxyXG4gICAgICAgIFxyXG4gICAgICAgIElmIHlvdSBkaWRuJ3QgcmVxdWVzdCB0aGlzIHBhc3N3b3JkIHJlc2V0LCBwbGVhc2UgY29udGFjdCBvdXIgc3VwcG9ydCB0ZWFtIGltbWVkaWF0ZWx5LlxyXG4gICAgICAgIFxyXG4gICAgICAgIFNtYXJ0IFRlY2hub2xvZ2llcyBCYW5nbGFkZXNoXHJcbiAgICAgICAg4Ka44KeN4Kau4Ka+4Kaw4KeN4KafIOCmn+Cnh+CmleCmqOCni+CmsuCmnOCmv+CmuCDgpqzgpr7gpoLgprLgpr7gpqbgp4fgprZcclxuICAgICAgYFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFNlbmQgcGFzc3dvcmQgcmVzZXQgZW1haWxcclxuICBhc3luYyBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKHVzZXJFbWFpbCwgdXNlck5hbWUsIHRlbXBvcmFyeVBhc3N3b3JkLCByZXNldFRva2VuKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXRoaXMudHJhbnNwb3J0ZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtYWlsIHNlcnZpY2Ugbm90IGF2YWlsYWJsZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBlbWFpbENvbmZpZyA9IHRoaXMuY29uZmlnLmdldEVtYWlsQ29uZmlnKCk7XHJcbiAgICAgIGNvbnN0IGVtYWlsVGVtcGxhdGUgPSB0aGlzLmNyZWF0ZVBhc3N3b3JkUmVzZXRFbWFpbFRlbXBsYXRlKHVzZXJOYW1lLCB0ZW1wb3JhcnlQYXNzd29yZCwgcmVzZXRUb2tlbik7XHJcblxyXG4gICAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcclxuICAgICAgICBmcm9tOiBgXCJTbWFydCBUZWNobm9sb2dpZXMgQmFuZ2xhZGVzaFwiIDwke2VtYWlsQ29uZmlnLmZyb219PmAsXHJcbiAgICAgICAgdG86IHVzZXJFbWFpbCxcclxuICAgICAgICBzdWJqZWN0OiBlbWFpbFRlbXBsYXRlLnN1YmplY3QsXHJcbiAgICAgICAgaHRtbDogZW1haWxUZW1wbGF0ZS5odG1sLFxyXG4gICAgICAgIHRleHQ6IGVtYWlsVGVtcGxhdGUudGV4dFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy50cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucyk7XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKCdQYXNzd29yZCByZXNldCBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseScsIHtcclxuICAgICAgICB0bzogdXNlckVtYWlsLFxyXG4gICAgICAgIG1lc3NhZ2VJZDogcmVzdWx0Lm1lc3NhZ2VJZCxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlSWQ6IHJlc3VsdC5tZXNzYWdlSWQsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc2VuZCBwYXNzd29yZCByZXNldCBlbWFpbCcsIGVycm9yLm1lc3NhZ2UsIHtcclxuICAgICAgICB0bzogdXNlckVtYWlsLFxyXG4gICAgICAgIGVycm9yVHlwZTogZXJyb3IubmFtZVxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIFNpbmdsZXRvbiBpbnN0YW5jZVxyXG5jb25zdCBlbWFpbFNlcnZpY2UgPSBuZXcgRW1haWxTZXJ2aWNlKCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBFbWFpbFNlcnZpY2UsXHJcbiAgZW1haWxTZXJ2aWNlXHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxZQUFZ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