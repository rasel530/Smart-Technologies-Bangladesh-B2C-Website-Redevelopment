a792c55be2cf31e2c73b7b184314005a
// Mock modules that cause issues in tests
_getJestObj().mock('../services/logger', () => ({
  loggerService: {
    info: jest.fn(),
    warn: jest.fn(),
    error: jest.fn(),
    debug: jest.fn(),
    logAuth: jest.fn(),
    logSecurity: jest.fn(),
    logPerformance: jest.fn()
  }
}));
_getJestObj().mock('../services/config', () => ({
  configService: {
    get: jest.fn(key => {
      const defaults = {
        'JWT_SECRET': 'test-jwt-secret-key',
        'DATABASE_URL': 'postgresql://test:test@localhost:5432/test_db',
        'REDIS_URL': 'redis://localhost:6379',
        'NODE_ENV': 'test'
      };
      return defaults[key] || null;
    }),
    getJWTConfig: jest.fn(() => ({
      secret: 'test-jwt-secret-key',
      algorithm: 'HS256',
      issuer: 'smart-technologies-bd',
      expiresIn: '1h'
    })),
    getCORSConfig: jest.fn(() => ({
      origin: '*',
      methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
      allowedHeaders: ['Content-Type', 'Authorization', 'X-Requested-With'],
      exposedHeaders: ['X-Total-Count', 'X-Request-ID']
    })),
    isProduction: jest.fn(() => false),
    validateConfig: jest.fn()
  }
}));

// Mock Redis
_getJestObj().mock('redis', () => ({
  createClient: jest.fn(() => ({
    connect: jest.fn().mockResolvedValue(),
    on: jest.fn(),
    get: jest.fn().mockResolvedValue(null),
    set: jest.fn().mockResolvedValue(),
    setEx: jest.fn().mockResolvedValue(),
    del: jest.fn().mockResolvedValue(),
    hGetAll: jest.fn().mockResolvedValue({}),
    hIncrBy: jest.fn().mockResolvedValue(),
    hSet: jest.fn().mockResolvedValue(),
    expire: jest.fn().mockResolvedValue(),
    multi: jest.fn(() => ({
      zRemRangeByScore: jest.fn().mockReturnThis(),
      zAdd: jest.fn().mockReturnThis(),
      zCard: jest.fn().mockReturnThis(),
      exec: jest.fn().mockResolvedValue([{
        reply: 0
      }, {
        reply: 0
      }, {
        reply: 0
      }])
    }))
  }))
}));

// Mock JWT
_getJestObj().mock('jsonwebtoken', () => ({
  sign: jest.fn(() => 'mock-jwt-token'),
  verify: jest.fn(() => ({
    userId: 'test-user-id',
    email: 'test@example.com',
    role: 'CUSTOMER',
    iat: Date.now() / 1000,
    exp: Date.now() / 1000 + 3600
  })),
  decode: jest.fn(() => ({
    userId: 'test-user-id',
    exp: Date.now() / 1000 + 3600
  }))
}));

// Mock Prisma
_getJestObj().mock('@prisma/client', () => ({
  PrismaClient: jest.fn(() => ({
    $connect: jest.fn().mockResolvedValue(),
    $disconnect: jest.fn().mockResolvedValue(),
    $use: jest.fn(),
    $on: jest.fn(),
    $transaction: jest.fn(),
    cart: {
      findMany: jest.fn(),
      findUnique: jest.fn(),
      findFirst: jest.fn(),
      create: jest.fn(),
      update: jest.fn(),
      delete: jest.fn(),
      upsert: jest.fn()
    },
    cartItem: {
      findMany: jest.fn(),
      findUnique: jest.fn(),
      findFirst: jest.fn(),
      create: jest.fn(),
      update: jest.fn(),
      delete: jest.fn(),
      upsert: jest.fn()
    },
    product: {
      findMany: jest.fn(),
      findUnique: jest.fn(),
      findFirst: jest.fn(),
      create: jest.fn(),
      update: jest.fn(),
      delete: jest.fn()
    },
    user: {
      findMany: jest.fn(),
      findUnique: jest.fn(),
      findFirst: jest.fn(),
      create: jest.fn(),
      update: jest.fn(),
      delete: jest.fn()
    }
  }))
}));

// Global test utilities
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
/**
 * Jest Setup File
 * 
 * This file sets up the test environment for all Jest tests
 * including global mocks, test utilities, and configuration
 */

// Set test environment
process.env.NODE_ENV = 'test';

// Mock console methods to reduce noise in tests
const originalConsole = {
  ...console
};
beforeAll(() => {
  console.log = jest.fn();
  console.info = jest.fn();
  console.warn = jest.fn();
  console.error = jest.fn();
});
afterAll(() => {
  // Restore original console methods
  Object.assign(console, originalConsole);
});

// Global test timeout
jest.setTimeout(30000);
global.testUtils = {
  /**
   * Create a mock request object
   */
  createMockRequest: (overrides = {}) => ({
    body: {},
    params: {},
    query: {},
    headers: {},
    ip: '127.0.0.1',
    get: jest.fn(),
    ...overrides
  }),
  /**
   * Create a mock response object
   */
  createMockResponse: () => {
    const res = {
      status: jest.fn().mockReturnThis(),
      json: jest.fn().mockReturnThis(),
      send: jest.fn().mockReturnThis(),
      set: jest.fn().mockReturnThis(),
      header: jest.fn().mockReturnThis(),
      end: jest.fn().mockReturnThis()
    };
    return res;
  },
  /**
   * Create a mock next function
   */
  createMockNext: () => jest.fn(),
  /**
   * Wait for async operations
   */
  waitFor: (ms = 0) => new Promise(resolve => setTimeout(resolve, ms)),
  /**
   * Generate test JWT token
   */
  generateTestToken: (payload = {}) => {
    const jwt = require('jsonwebtoken');
    return jwt.sign({
      userId: 'test-user-id',
      email: 'test@example.com',
      role: 'CUSTOMER',
      ...payload
    }, 'test-jwt-secret-key', {
      expiresIn: '1h'
    });
  }
};

// Clean up after each test
afterEach(() => {
  jest.clearAllMocks();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJsb2dnZXJTZXJ2aWNlIiwiaW5mbyIsImplc3QiLCJmbiIsIndhcm4iLCJlcnJvciIsImRlYnVnIiwibG9nQXV0aCIsImxvZ1NlY3VyaXR5IiwibG9nUGVyZm9ybWFuY2UiLCJjb25maWdTZXJ2aWNlIiwiZ2V0Iiwia2V5IiwiZGVmYXVsdHMiLCJnZXRKV1RDb25maWciLCJzZWNyZXQiLCJhbGdvcml0aG0iLCJpc3N1ZXIiLCJleHBpcmVzSW4iLCJnZXRDT1JTQ29uZmlnIiwib3JpZ2luIiwibWV0aG9kcyIsImFsbG93ZWRIZWFkZXJzIiwiZXhwb3NlZEhlYWRlcnMiLCJpc1Byb2R1Y3Rpb24iLCJ2YWxpZGF0ZUNvbmZpZyIsImNyZWF0ZUNsaWVudCIsImNvbm5lY3QiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsIm9uIiwic2V0Iiwic2V0RXgiLCJkZWwiLCJoR2V0QWxsIiwiaEluY3JCeSIsImhTZXQiLCJleHBpcmUiLCJtdWx0aSIsInpSZW1SYW5nZUJ5U2NvcmUiLCJtb2NrUmV0dXJuVGhpcyIsInpBZGQiLCJ6Q2FyZCIsImV4ZWMiLCJyZXBseSIsInNpZ24iLCJ2ZXJpZnkiLCJ1c2VySWQiLCJlbWFpbCIsInJvbGUiLCJpYXQiLCJEYXRlIiwibm93IiwiZXhwIiwiZGVjb2RlIiwiUHJpc21hQ2xpZW50IiwiJGNvbm5lY3QiLCIkZGlzY29ubmVjdCIsIiR1c2UiLCIkb24iLCIkdHJhbnNhY3Rpb24iLCJjYXJ0IiwiZmluZE1hbnkiLCJmaW5kVW5pcXVlIiwiZmluZEZpcnN0IiwiY3JlYXRlIiwidXBkYXRlIiwiZGVsZXRlIiwidXBzZXJ0IiwiY2FydEl0ZW0iLCJwcm9kdWN0IiwidXNlciIsInJlcXVpcmUiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJvcmlnaW5hbENvbnNvbGUiLCJjb25zb2xlIiwiYmVmb3JlQWxsIiwibG9nIiwiYWZ0ZXJBbGwiLCJPYmplY3QiLCJhc3NpZ24iLCJzZXRUaW1lb3V0IiwiZ2xvYmFsIiwidGVzdFV0aWxzIiwiY3JlYXRlTW9ja1JlcXVlc3QiLCJvdmVycmlkZXMiLCJib2R5IiwicGFyYW1zIiwicXVlcnkiLCJoZWFkZXJzIiwiaXAiLCJjcmVhdGVNb2NrUmVzcG9uc2UiLCJyZXMiLCJzdGF0dXMiLCJqc29uIiwic2VuZCIsImhlYWRlciIsImVuZCIsImNyZWF0ZU1vY2tOZXh0Iiwid2FpdEZvciIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZW5lcmF0ZVRlc3RUb2tlbiIsInBheWxvYWQiLCJqd3QiLCJhZnRlckVhY2giLCJjbGVhckFsbE1vY2tzIl0sInNvdXJjZXMiOlsiamVzdC5zZXR1cC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLyoqXHJcbiAqIEplc3QgU2V0dXAgRmlsZVxyXG4gKiBcclxuICogVGhpcyBmaWxlIHNldHMgdXAgdGhlIHRlc3QgZW52aXJvbm1lbnQgZm9yIGFsbCBKZXN0IHRlc3RzXHJcbiAqIGluY2x1ZGluZyBnbG9iYWwgbW9ja3MsIHRlc3QgdXRpbGl0aWVzLCBhbmQgY29uZmlndXJhdGlvblxyXG4gKi9cclxuXHJcbi8vIFNldCB0ZXN0IGVudmlyb25tZW50XHJcbnByb2Nlc3MuZW52Lk5PREVfRU5WID0gJ3Rlc3QnO1xyXG5cclxuLy8gTW9jayBjb25zb2xlIG1ldGhvZHMgdG8gcmVkdWNlIG5vaXNlIGluIHRlc3RzXHJcbmNvbnN0IG9yaWdpbmFsQ29uc29sZSA9IHsgLi4uY29uc29sZSB9O1xyXG5iZWZvcmVBbGwoKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nID0gamVzdC5mbigpO1xyXG4gIGNvbnNvbGUuaW5mbyA9IGplc3QuZm4oKTtcclxuICBjb25zb2xlLndhcm4gPSBqZXN0LmZuKCk7XHJcbiAgY29uc29sZS5lcnJvciA9IGplc3QuZm4oKTtcclxufSk7XHJcblxyXG5hZnRlckFsbCgoKSA9PiB7XHJcbiAgLy8gUmVzdG9yZSBvcmlnaW5hbCBjb25zb2xlIG1ldGhvZHNcclxuICBPYmplY3QuYXNzaWduKGNvbnNvbGUsIG9yaWdpbmFsQ29uc29sZSk7XHJcbn0pO1xyXG5cclxuLy8gR2xvYmFsIHRlc3QgdGltZW91dFxyXG5qZXN0LnNldFRpbWVvdXQoMzAwMDApO1xyXG5cclxuLy8gTW9jayBtb2R1bGVzIHRoYXQgY2F1c2UgaXNzdWVzIGluIHRlc3RzXHJcbmplc3QubW9jaygnLi4vc2VydmljZXMvbG9nZ2VyJywgKCkgPT4gKHtcclxuICBsb2dnZXJTZXJ2aWNlOiB7XHJcbiAgICBpbmZvOiBqZXN0LmZuKCksXHJcbiAgICB3YXJuOiBqZXN0LmZuKCksXHJcbiAgICBlcnJvcjogamVzdC5mbigpLFxyXG4gICAgZGVidWc6IGplc3QuZm4oKSxcclxuICAgIGxvZ0F1dGg6IGplc3QuZm4oKSxcclxuICAgIGxvZ1NlY3VyaXR5OiBqZXN0LmZuKCksXHJcbiAgICBsb2dQZXJmb3JtYW5jZTogamVzdC5mbigpXHJcbiAgfVxyXG59KSk7XHJcblxyXG5qZXN0Lm1vY2soJy4uL3NlcnZpY2VzL2NvbmZpZycsICgpID0+ICh7XHJcbiAgY29uZmlnU2VydmljZToge1xyXG4gICAgZ2V0OiBqZXN0LmZuKChrZXkpID0+IHtcclxuICAgICAgY29uc3QgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgJ0pXVF9TRUNSRVQnOiAndGVzdC1qd3Qtc2VjcmV0LWtleScsXHJcbiAgICAgICAgJ0RBVEFCQVNFX1VSTCc6ICdwb3N0Z3Jlc3FsOi8vdGVzdDp0ZXN0QGxvY2FsaG9zdDo1NDMyL3Rlc3RfZGInLFxyXG4gICAgICAgICdSRURJU19VUkwnOiAncmVkaXM6Ly9sb2NhbGhvc3Q6NjM3OScsXHJcbiAgICAgICAgJ05PREVfRU5WJzogJ3Rlc3QnXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBkZWZhdWx0c1trZXldIHx8IG51bGw7XHJcbiAgICB9KSxcclxuICAgIGdldEpXVENvbmZpZzogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgICBzZWNyZXQ6ICd0ZXN0LWp3dC1zZWNyZXQta2V5JyxcclxuICAgICAgYWxnb3JpdGhtOiAnSFMyNTYnLFxyXG4gICAgICBpc3N1ZXI6ICdzbWFydC10ZWNobm9sb2dpZXMtYmQnLFxyXG4gICAgICBleHBpcmVzSW46ICcxaCdcclxuICAgIH0pKSxcclxuICAgIGdldENPUlNDb25maWc6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgICAgb3JpZ2luOiAnKicsXHJcbiAgICAgIG1ldGhvZHM6IFsnR0VUJywgJ1BPU1QnLCAnUFVUJywgJ0RFTEVURScsICdPUFRJT05TJ10sXHJcbiAgICAgIGFsbG93ZWRIZWFkZXJzOiBbJ0NvbnRlbnQtVHlwZScsICdBdXRob3JpemF0aW9uJywgJ1gtUmVxdWVzdGVkLVdpdGgnXSxcclxuICAgICAgZXhwb3NlZEhlYWRlcnM6IFsnWC1Ub3RhbC1Db3VudCcsICdYLVJlcXVlc3QtSUQnXVxyXG4gICAgfSkpLFxyXG4gICAgaXNQcm9kdWN0aW9uOiBqZXN0LmZuKCgpID0+IGZhbHNlKSxcclxuICAgIHZhbGlkYXRlQ29uZmlnOiBqZXN0LmZuKClcclxuICB9XHJcbn0pKTtcclxuXHJcbi8vIE1vY2sgUmVkaXNcclxuamVzdC5tb2NrKCdyZWRpcycsICgpID0+ICh7XHJcbiAgY3JlYXRlQ2xpZW50OiBqZXN0LmZuKCgpID0+ICh7XHJcbiAgICBjb25uZWN0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoKSxcclxuICAgIG9uOiBqZXN0LmZuKCksXHJcbiAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKSxcclxuICAgIHNldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCksXHJcbiAgICBzZXRFeDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCksXHJcbiAgICBkZWw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgpLFxyXG4gICAgaEdldEFsbDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHt9KSxcclxuICAgIGhJbmNyQnk6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgpLFxyXG4gICAgaFNldDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCksXHJcbiAgICBleHBpcmU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgpLFxyXG4gICAgbXVsdGk6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgICAgelJlbVJhbmdlQnlTY29yZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgIHpBZGQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICB6Q2FyZDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgIGV4ZWM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbeyByZXBseTogMCB9LCB7IHJlcGx5OiAwIH0sIHsgcmVwbHk6IDAgfV0pXHJcbiAgICB9KSlcclxuICB9KSlcclxufSkpO1xyXG5cclxuLy8gTW9jayBKV1RcclxuamVzdC5tb2NrKCdqc29ud2VidG9rZW4nLCAoKSA9PiAoe1xyXG4gIHNpZ246IGplc3QuZm4oKCkgPT4gJ21vY2stand0LXRva2VuJyksXHJcbiAgdmVyaWZ5OiBqZXN0LmZuKCgpID0+ICh7XHJcbiAgICB1c2VySWQ6ICd0ZXN0LXVzZXItaWQnLFxyXG4gICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcclxuICAgIHJvbGU6ICdDVVNUT01FUicsXHJcbiAgICBpYXQ6IERhdGUubm93KCkgLyAxMDAwLFxyXG4gICAgZXhwOiAoRGF0ZS5ub3coKSAvIDEwMDApICsgMzYwMFxyXG4gIH0pKSxcclxuICBkZWNvZGU6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgIHVzZXJJZDogJ3Rlc3QtdXNlci1pZCcsXHJcbiAgICBleHA6IChEYXRlLm5vdygpIC8gMTAwMCkgKyAzNjAwXHJcbiAgfSkpXHJcbn0pKTtcclxuXHJcbi8vIE1vY2sgUHJpc21hXHJcbmplc3QubW9jaygnQHByaXNtYS9jbGllbnQnLCAoKSA9PiAoe1xyXG4gIFByaXNtYUNsaWVudDogamVzdC5mbigoKSA9PiAoe1xyXG4gICAgJGNvbm5lY3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgpLFxyXG4gICAgJGRpc2Nvbm5lY3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgpLFxyXG4gICAgJHVzZTogamVzdC5mbigpLFxyXG4gICAgJG9uOiBqZXN0LmZuKCksXHJcbiAgICAkdHJhbnNhY3Rpb246IGplc3QuZm4oKSxcclxuICAgIGNhcnQ6IHtcclxuICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcclxuICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxyXG4gICAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKSxcclxuICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgICBkZWxldGU6IGplc3QuZm4oKSxcclxuICAgICAgdXBzZXJ0OiBqZXN0LmZuKClcclxuICAgIH0sXHJcbiAgICBjYXJ0SXRlbToge1xyXG4gICAgICBmaW5kTWFueTogamVzdC5mbigpLFxyXG4gICAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCksXHJcbiAgICAgIGZpbmRGaXJzdDogamVzdC5mbigpLFxyXG4gICAgICBjcmVhdGU6IGplc3QuZm4oKSxcclxuICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIGRlbGV0ZTogamVzdC5mbigpLFxyXG4gICAgICB1cHNlcnQ6IGplc3QuZm4oKVxyXG4gICAgfSxcclxuICAgIHByb2R1Y3Q6IHtcclxuICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcclxuICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxyXG4gICAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKSxcclxuICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgICBkZWxldGU6IGplc3QuZm4oKVxyXG4gICAgfSxcclxuICAgIHVzZXI6IHtcclxuICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcclxuICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxyXG4gICAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKSxcclxuICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgICBkZWxldGU6IGplc3QuZm4oKVxyXG4gICAgfVxyXG4gIH0pKVxyXG59KSk7XHJcblxyXG4vLyBHbG9iYWwgdGVzdCB1dGlsaXRpZXNcclxuZ2xvYmFsLnRlc3RVdGlscyA9IHtcclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBtb2NrIHJlcXVlc3Qgb2JqZWN0XHJcbiAgICovXHJcbiAgY3JlYXRlTW9ja1JlcXVlc3Q6IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcclxuICAgIGJvZHk6IHt9LFxyXG4gICAgcGFyYW1zOiB7fSxcclxuICAgIHF1ZXJ5OiB7fSxcclxuICAgIGhlYWRlcnM6IHt9LFxyXG4gICAgaXA6ICcxMjcuMC4wLjEnLFxyXG4gICAgZ2V0OiBqZXN0LmZuKCksXHJcbiAgICAuLi5vdmVycmlkZXNcclxuICB9KSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgbW9jayByZXNwb25zZSBvYmplY3RcclxuICAgKi9cclxuICBjcmVhdGVNb2NrUmVzcG9uc2U6ICgpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IHtcclxuICAgICAgc3RhdHVzOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcclxuICAgICAganNvbjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXHJcbiAgICAgIHNlbmQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICBzZXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICBoZWFkZXI6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxyXG4gICAgICBlbmQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHJlcztcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBtb2NrIG5leHQgZnVuY3Rpb25cclxuICAgKi9cclxuICBjcmVhdGVNb2NrTmV4dDogKCkgPT4gamVzdC5mbigpLFxyXG5cclxuICAvKipcclxuICAgKiBXYWl0IGZvciBhc3luYyBvcGVyYXRpb25zXHJcbiAgICovXHJcbiAgd2FpdEZvcjogKG1zID0gMCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSksXHJcblxyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIHRlc3QgSldUIHRva2VuXHJcbiAgICovXHJcbiAgZ2VuZXJhdGVUZXN0VG9rZW46IChwYXlsb2FkID0ge30pID0+IHtcclxuICAgIGNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG4gICAgcmV0dXJuIGp3dC5zaWduKHtcclxuICAgICAgdXNlcklkOiAndGVzdC11c2VyLWlkJyxcclxuICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcclxuICAgICAgcm9sZTogJ0NVU1RPTUVSJyxcclxuICAgICAgLi4ucGF5bG9hZFxyXG4gICAgfSwgJ3Rlc3Qtand0LXNlY3JldC1rZXknLCB7IGV4cGlyZXNJbjogJzFoJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBDbGVhbiB1cCBhZnRlciBlYWNoIHRlc3RcclxuYWZ0ZXJFYWNoKCgpID0+IHtcclxuICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxufSk7XHJcblxyXG4iXSwibWFwcGluZ3MiOiJBQTRCQTtBQUNBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxPQUFPO0VBQ3JDQyxhQUFhLEVBQUU7SUFDYkMsSUFBSSxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ2ZDLElBQUksRUFBRUYsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNmRSxLQUFLLEVBQUVILElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDaEJHLEtBQUssRUFBRUosSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNoQkksT0FBTyxFQUFFTCxJQUFJ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