41f3e31898d610bd442dce5f88318c92
const express = require('express');
const {
  body,
  validationResult
} = require('express-validator');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const {
  PrismaClient
} = require('@prisma/client');
const {
  emailService
} = require('../services/emailService');
const {
  smsService
} = require('../services/smsService');
const {
  otpService
} = require('../services/otpService');
const {
  authMiddleware
} = require('../middleware/auth');
const {
  sessionMiddleware
} = require('../middleware/session');
const {
  sessionService
} = require('../services/sessionService');
const {
  passwordService
} = require('../services/passwordService');
const {
  phoneValidationService
} = require('../services/phoneValidationService');
const {
  configService
} = require('../services/config');
const {
  loggerService
} = require('../services/logger');
const {
  loginSecurityService
} = require('../services/loginSecurityService');
const {
  loginSecurityMiddleware
} = require('../middleware/loginSecurity');
const router = express.Router();
const prisma = new PrismaClient();

// Validation middleware
const handleValidationErrors = (req, res, next) => {
  const errors = validationResult(req);
  if (!errors.isEmpty()) {
    return res.status(400).json({
      error: 'Validation failed',
      details: errors.array()
    });
  }
  next();
};

// Register endpoint
router.post('/register', [body('email').optional().isEmail().normalizeEmail(), body('password').isLength({
  min: 8,
  max: 128
}), body('firstName').optional().notEmpty().trim(), body('lastName').optional().notEmpty().trim(), body('fname').optional().notEmpty().trim(), body('lname').optional().notEmpty().trim(), body('phone').optional().notEmpty().trim(), body('phoneNumber').optional().notEmpty().trim(), body('confirmPassword').notEmpty().trim()], handleValidationErrors, async (req, res) => {
  try {
    const {
      email,
      password,
      firstName,
      lastName,
      fname,
      lname,
      phone,
      phoneNumber,
      confirmPassword
    } = req.body;

    // Handle property name variations
    const finalFirstName = firstName || fname;
    const finalLastName = lastName || lname;
    const finalPhone = phone || phoneNumber;

    // Validate that at least email or phone is provided
    if (!email && !finalPhone) {
      return res.status(400).json({
        error: 'Email or phone required',
        message: 'Please provide either email or phone number for registration',
        messageBn: 'অনুগ্রহ ইমেল বা ফোন নম্বর দিন'
      });
    }

    // Validate confirm password matches
    if (password !== confirmPassword) {
      return res.status(400).json({
        error: 'Passwords do not match',
        message: 'Password and confirm password must match',
        messageBn: 'পাসওয়ার্ড এবং নিশ্চিত পাসওয়ার্ড মিলতে হবে'
      });
    }

    // Validate password strength
    const userInfo = {
      firstName: finalFirstName,
      lastName: finalLastName,
      email,
      phone: finalPhone
    };
    const passwordValidation = passwordService.validatePasswordStrength(password, userInfo);
    if (!passwordValidation.isValid) {
      return res.status(400).json({
        error: 'Password does not meet requirements',
        message: 'Password is too weak or does not meet security requirements',
        messageBn: 'পাসওয়ার্ড খুবই বা নিরাপত্তিগিয় পূর্ব',
        details: {
          strength: passwordValidation.strength,
          score: passwordValidation.score,
          feedback: passwordValidation.feedback,
          warnings: passwordValidation.warnings,
          suggestions: passwordValidation.suggestions,
          passwordPolicy: passwordService.getPasswordPolicy()
        }
      });
    }

    // Validate email if provided
    if (email) {
      if (!emailService.validateEmail(email)) {
        return res.status(400).json({
          error: 'Invalid email format',
          message: 'Please provide a valid email address',
          messageBn: 'অনুগ্রহ ইমেল ঠিকানা দিন'
        });
      }
      if (emailService.isDisposableEmail(email)) {
        return res.status(400).json({
          error: 'Disposable email not allowed',
          message: 'Please use a permanent email address for registration',
          messageBn: 'নিবন্ধন ইমেল ব্যবহার করুন, অনুগ্রহ ইমেল ব্যবহার করুন'
        });
      }
    }

    // Validate phone if provided
    let phoneValidation = null;
    if (finalPhone) {
      phoneValidation = phoneValidationService.validateForUseCase(finalPhone, 'registration');
      if (!phoneValidation.isValid) {
        return res.status(400).json({
          error: 'Invalid phone format',
          message: phoneValidation.error,
          messageBn: phoneValidation.errorBn,
          code: phoneValidation.code
        });
      }
    }

    // Check if user already exists
    const existingUser = await prisma.user.findFirst({
      where: {
        OR: [...(email ? [{
          email
        }] : []), ...(phoneValidation?.isValid ? [{
          phone: phoneValidation.normalizedPhone
        }] : [])]
      }
    });
    if (existingUser) {
      return res.status(409).json({
        error: 'User already exists',
        message: 'An account with this email or phone number already exists',
        messageBn: 'এই ইমেল বা ফোন নম্বর দিয়ে একাউন্ট বিদ্যমান রয়েছে',
        field: existingUser.email === email ? 'email' : 'phone'
      });
    }

    // Hash password using password service
    const hashedPassword = await passwordService.hashPassword(password);

    // Create user with PENDING status
    const user = await prisma.user.create({
      data: {
        email,
        password: hashedPassword,
        firstName: finalFirstName,
        lastName: finalLastName,
        phone: phoneValidation?.normalizedPhone || finalPhone,
        role: 'CUSTOMER',
        status: 'PENDING'
      },
      select: {
        id: true,
        email: true,
        firstName: true,
        lastName: true,
        phone: true,
        role: true,
        status: true,
        createdAt: true
      }
    });

    // Save password to history
    await passwordService.savePasswordToHistory(user.id, hashedPassword);

    // Check if testing mode is enabled
    const isTestingMode = configService.isTestingMode();
    const isEmailVerificationDisabled = configService.isEmailVerificationDisabled();
    const isPhoneVerificationDisabled = configService.isPhoneVerificationDisabled();

    // Handle verification based on what's provided and testing mode
    if (email && !isEmailVerificationDisabled) {
      // Email verification flow
      const verificationToken = emailService.generateVerificationToken();
      const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000); // 24 hours

      // Save verification token to database
      await prisma.emailVerificationToken.create({
        data: {
          userId: user.id,
          token: verificationToken,
          expiresAt
        }
      });

      // Send verification email
      const emailResult = await emailService.sendVerificationEmail(email, `${firstName} ${lastName}`, verificationToken);
      if (!emailResult.success) {
        // If email fails, delete user and token for cleanup
        await prisma.emailVerificationToken.delete({
          where: {
            userId: user.id
          }
        });
        await prisma.user.delete({
          where: {
            id: user.id
          }
        });
        return res.status(500).json({
          error: 'Registration failed',
          message: 'Failed to send verification email. Please try again later.',
          messageBn: 'যাচাই ইমেল পাঠানো ব্যর্থ হয়েছে। অনুগ্রহ চেষ্টা করুন।'
        });
      }
      res.status(201).json({
        message: 'Registration successful. Please check your email to verify your account.',
        messageBn: 'নিবন্ধন সফল। আপনার অ্যাকাউন্ট যাচাই করার জন্য ইমেল চেক করুন।',
        user: {
          id: user.id,
          email: user.email,
          firstName: user.firstName,
          lastName: user.lastName,
          role: user.role,
          status: user.status
        },
        requiresEmailVerification: true
      });
    } else if (phoneValidation?.isValid && !isPhoneVerificationDisabled) {
      // Phone verification flow
      const otpResult = await otpService.generatePhoneOTP(phoneValidation.normalizedPhone, user.id);
      if (!otpResult.success) {
        // If OTP fails, delete user for cleanup
        await prisma.user.delete({
          where: {
            id: user.id
          }
        });
        return res.status(500).json({
          error: 'Registration failed',
          message: otpResult.error || 'Failed to send OTP. Please try again later.',
          messageBn: otpResult.errorBn || 'OTP পাঠানো ব্যর্থ হয়েছে। অনুগ্রহ চেষ্টা করুন।'
        });
      }
      res.status(201).json({
        message: 'Registration successful. Please check your phone for OTP verification.',
        messageBn: 'নিবন্ধন সফল। আপনার ফোনে OTP যাচাই করার জন্য চেক করুন।',
        user: {
          id: user.id,
          phone: user.phone,
          firstName: user.firstName,
          lastName: user.lastName,
          role: user.role,
          status: user.status
        },
        requiresPhoneVerification: true,
        phone: phoneValidation.normalizedPhone,
        operator: phoneValidation.operator,
        operatorDetails: phoneValidation.operatorDetails
      });
    } else {
      // Skip verification - activate account immediately (testing mode or verification disabled)
      const updatedUser = await prisma.user.update({
        where: {
          id: user.id
        },
        data: {
          status: 'ACTIVE',
          emailVerified: email ? new Date() : null,
          phoneVerified: phoneValidation?.isValid ? new Date() : null
        },
        select: {
          id: true,
          email: true,
          firstName: true,
          lastName: true,
          phone: true,
          role: true,
          status: true,
          emailVerified: true,
          phoneVerified: true
        }
      });
      res.status(201).json({
        message: isTestingMode ? 'Registration successful in testing mode. Account is automatically activated.' : 'Registration successful. Account is activated without verification.',
        messageBn: isTestingMode ? 'টেস্টিং মোডে নিবন্ধন সফল। অ্যাকাউন্ট স্বয়ংক্রিয় সক্রিয় করা হয়েছে।' : 'নিবন্ধন সফল। যাচাই ছাড়া অ্যাকাউন্ট সক্রিয় করা হয়েছে।',
        user: updatedUser,
        testingMode: isTestingMode,
        verificationSkipped: true
      });
    }
  } catch (error) {
    console.error('Registration error:', error);
    res.status(500).json({
      error: 'Registration failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'নিবন্ধন ব্যর্থ হয়েছে'
    });
  }
});

// Login endpoint
router.post('/login', [body('identifier').notEmpty().trim(), body('password').notEmpty().trim(), body('rememberMe').optional().isBoolean(), body('captcha').optional().isString(), body('deviceFingerprint').optional().isString()], handleValidationErrors, loginSecurityMiddleware.enforce(), async (req, res) => {
  const {
    identifier,
    password,
    rememberMe,
    captcha,
    deviceFingerprint
  } = req.body;
  try {
    // Determine if identifier is email or phone
    const isEmail = identifier.includes('@');
    let user;
    let loginType;
    if (isEmail) {
      // Validate email format
      if (!emailService.validateEmail(identifier)) {
        return res.status(400).json({
          error: 'Invalid email format',
          message: 'Please provide a valid email address',
          messageBn: 'অনুগ্রহ ইমেল ঠিকানা দিন'
        });
      }

      // Find user by email
      user = await prisma.user.findUnique({
        where: {
          email: identifier
        }
      });
      loginType = 'email';
    } else {
      // Validate phone number
      const phoneValidation = phoneValidationService.validateForUseCase(identifier, 'login');
      if (!phoneValidation.isValid) {
        return res.status(400).json({
          error: 'Invalid phone format',
          message: phoneValidation.error,
          messageBn: phoneValidation.errorBn,
          code: phoneValidation.code
        });
      }

      // Find user by phone
      user = await prisma.user.findUnique({
        where: {
          phone: phoneValidation.normalizedPhone
        }
      });
      loginType = 'phone';
    }
    if (!user || !user.password) {
      return res.status(401).json({
        error: 'Invalid credentials',
        message: `Invalid ${loginType} or password`,
        messageBn: loginType === 'email' ? 'অবৈধ ইমেল বা পাসওয়ার্ড' : 'অবৈধ ফোন বা পাসওয়ার্ড'
      });
    }

    // Verify password
    const isValidPassword = await bcrypt.compare(password, user.password);
    if (!isValidPassword) {
      return res.status(401).json({
        error: 'Invalid credentials',
        message: `Invalid ${loginType} or password`,
        messageBn: loginType === 'email' ? 'অবৈধ ইমেল বা পাসওয়ার্ড' : 'অবৈধ ফোন বা পাসওয়ার্ড'
      });
    }

    // Check if user is verified (skip if testing mode or verification disabled)
    const isTestingMode = configService.isTestingMode();
    const isEmailVerificationDisabled = configService.isEmailVerificationDisabled();
    const isPhoneVerificationDisabled = configService.isPhoneVerificationDisabled();
    const requiresVerification = loginType === 'email' && !isEmailVerificationDisabled || loginType === 'phone' && !isPhoneVerificationDisabled;
    if (user.status === 'PENDING' && requiresVerification && !isTestingMode) {
      const verificationMessage = loginType === 'email' ? 'Please verify your email address before logging in' : 'Please verify your phone number before logging in';
      const verificationMessageBn = loginType === 'email' ? 'লগিন করার আগে ইমেল যাচাই করুন' : 'লগিন করার আগে ফোন নম্বর যাচাই করুন';
      return res.status(403).json({
        error: 'Account not verified',
        message: verificationMessage,
        messageBn: verificationMessageBn,
        requiresVerification: true,
        verificationType: loginType
      });
    }

    // Auto-activate pending users in testing mode or when verification is disabled
    if (user.status === 'PENDING' && (isTestingMode || !requiresVerification)) {
      await prisma.user.update({
        where: {
          id: user.id
        },
        data: {
          status: 'ACTIVE',
          emailVerified: loginType === 'email' ? new Date() : user.emailVerified,
          phoneVerified: loginType === 'phone' ? new Date() : user.phoneVerified
        }
      });

      // Refresh user data after update
      user = await prisma.user.findUnique({
        where: {
          id: user.id
        },
        select: {
          id: true,
          email: true,
          phone: true,
          firstName: true,
          lastName: true,
          role: true,
          status: true,
          emailVerified: true,
          phoneVerified: true
        }
      });
    }

    // Update last login
    await prisma.user.update({
      where: {
        id: user.id
      },
      data: {
        lastLoginAt: new Date()
      }
    });

    // Create secure session instead of JWT token
    const sessionResult = await sessionService.createSession(user.id, req, {
      loginType,
      rememberMe: rememberMe || false,
      maxAge: rememberMe ? 7 * 24 * 60 * 60 * 1000 : 24 * 60 * 60 * 1000 // 7 days if remember me, 24 hours default
    });
    if (!sessionResult.sessionId) {
      return res.status(500).json({
        error: 'Login failed',
        message: 'Unable to create session',
        messageBn: 'লগিন ব্যর্থ হয়েছে'
      });
    }

    // Set session cookie with remember me options
    sessionMiddleware.setSessionCookie(res, sessionResult.sessionId, {
      maxAge: sessionResult.maxAge,
      rememberMe: rememberMe || false
    });

    // Add session headers
    const sessionHeaders = sessionMiddleware.sessionHeaders(sessionResult);
    Object.keys(sessionHeaders).forEach(key => {
      res.set(key, sessionHeaders[key]);
    });

    // Generate JWT token for API compatibility (shorter expiry)
    const jwtSecretLogin = process.env.JWT_SECRET;
    if (!jwtSecretLogin) {
      throw new Error('JWT_SECRET environment variable is required');
    }
    const token = jwt.sign({
      userId: user.id,
      email: user.email,
      phone: user.phone,
      role: user.role,
      sessionId: sessionResult.sessionId
    }, jwtSecretLogin, {
      expiresIn: process.env.JWT_EXPIRES_IN || '15m'
    } // Shorter expiry for JWT, session manages long-term auth
    );

    // Record successful login and clear failed attempts
    return loginSecurityMiddleware.recordSuccessfulLogin(req, {
      id: user.id
    }, (req, res) => {
      res.json({
        message: 'Login successful',
        messageBn: 'লগিন সফল',
        user: {
          id: user.id,
          email: user.email,
          phone: user.phone,
          firstName: user.firstName,
          lastName: user.lastName,
          role: user.role,
          status: user.status
        },
        token,
        // For API compatibility
        sessionId: sessionResult.sessionId,
        expiresAt: sessionResult.expiresAt,
        maxAge: sessionResult.maxAge,
        loginType,
        rememberMe: rememberMe || false,
        securityContext: req.securityContext
      });
    });
  } catch (error) {
    console.error('Login error:', error);
    console.error('Login error details:', {
      name: error.name,
      message: error.message,
      stack: error.stack
    });

    // Record failed attempt due to system error
    req.authError = 'system_error';
    return loginSecurityMiddleware.recordFailedLogin()(req, res, () => {
      res.status(500).json({
        error: 'Login failed',
        message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
        messageBn: 'লগিন ব্যর্থ হয়েছে'
      });
    });
  }
});

// Basic captcha validation function (integrate with actual captcha service)
async function validateCaptcha(captcha, ip) {
  // This is a placeholder - integrate with reCAPTCHA, hCaptcha, or similar
  // For now, we'll accept any captcha if security doesn't require it
  return true;
}

// Logout endpoint
router.post('/logout', [body('allDevices').optional().isBoolean()], async (req, res) => {
  try {
    const {
      allDevices
    } = req.body;
    const sessionId = sessionMiddleware.getSessionId(req);
    if (!sessionId) {
      return res.status(400).json({
        error: 'No session found',
        message: 'No active session to logout',
        messageBn: 'লগআউট করার জন্য কোনো সেশন পাওয়া যায়নি'
      });
    }

    // Validate session to get user ID
    const validation = await sessionService.validateSession(sessionId, req);
    if (!validation.valid) {
      // Clear session cookie anyway
      sessionMiddleware.clearSessionCookie(res);
      return res.json({
        message: 'Logout successful',
        messageBn: 'লগআউট সফল',
        sessionExpired: true
      });
    }
    let result;
    if (allDevices) {
      // Destroy all sessions for this user
      result = await sessionService.destroyAllUserSessions(validation.userId, sessionId);
    } else {
      // Destroy current session only
      result = await sessionService.destroySession(sessionId, 'user_logout');
    }
    if (!result.success) {
      return res.status(500).json({
        error: 'Logout failed',
        message: result.reason,
        messageBn: 'লগআউট ব্যর্থ হয়েছে'
      });
    }

    // Clear session cookie
    sessionMiddleware.clearSessionCookie(res);
    res.json({
      message: 'Logout successful',
      messageBn: 'লগআউট সফল',
      allDevices: allDevices || false,
      destroyedCount: allDevices ? result.destroyedCount : 1
    });
  } catch (error) {
    console.error('Logout error:', error);
    res.status(500).json({
      error: 'Logout failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'লগআউট ব্যর্থ হয়েছে'
    });
  }
});

// Refresh token endpoint
router.post('/refresh', async (req, res) => {
  try {
    const {
      token
    } = req.body;
    if (!token) {
      return res.status(401).json({
        error: 'Token required',
        messageBn: 'টোকেন প্রয়োজন'
      });
    }

    // Verify token
    const jwtSecretRefresh = process.env.JWT_SECRET;
    if (!jwtSecretRefresh) {
      throw new Error('JWT_SECRET environment variable is required');
    }
    const decoded = jwt.verify(token, jwtSecretRefresh);

    // Get user info
    const user = await prisma.user.findUnique({
      where: {
        id: decoded.userId
      },
      select: {
        id: true,
        email: true,
        firstName: true,
        lastName: true,
        role: true,
        status: true
      }
    });
    if (!user) {
      return res.status(401).json({
        error: 'User not found',
        messageBn: 'ব্যবহার্টার পাওয়া যায়নি'
      });
    }

    // Generate new token
    const jwtSecretNew = process.env.JWT_SECRET;
    if (!jwtSecretNew) {
      throw new Error('JWT_SECRET environment variable is required');
    }
    const newToken = jwt.sign({
      userId: user.id,
      email: user.email,
      role: user.role
    }, jwtSecretNew, {
      expiresIn: process.env.JWT_EXPIRES_IN || '7d'
    });
    res.json({
      message: 'Token refreshed successfully',
      messageBn: 'টোকেন সফল হয়েছে',
      user,
      token: newToken
    });
  } catch (error) {
    console.error('Token refresh error:', error);
    res.status(401).json({
      error: 'Invalid token',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Token expired or invalid',
      messageBn: 'টোকেন মেয়াদীপূর্ণ বা অবৈধ'
    });
  }
});

// Email verification endpoint
router.post('/verify-email', [body('token').notEmpty().trim()], handleValidationErrors, async (req, res) => {
  try {
    const {
      token
    } = req.body;
    if (!token) {
      return res.status(400).json({
        error: 'Token required',
        message: 'Verification token is required',
        messageBn: 'যাচাই টোকেন প্রয়োজন'
      });
    }

    // Find verification token
    const verificationToken = await prisma.emailVerificationToken.findUnique({
      where: {
        token
      },
      include: {
        user: true
      }
    });
    if (!verificationToken) {
      return res.status(400).json({
        error: 'Invalid token',
        message: 'Verification token is invalid or has been used',
        messageBn: 'যাচাই টোকেন অবৈধ বা ব্যবহার হয়েছে'
      });
    }

    // Check if token has expired
    if (verificationToken.expiresAt < new Date()) {
      // Delete expired token
      await prisma.emailVerificationToken.delete({
        where: {
          id: verificationToken.id
        }
      });
      return res.status(400).json({
        error: 'Token expired',
        message: 'Verification token has expired. Please request a new one.',
        messageBn: 'যাচাই টোকেন মেয়াদীপূর্ণ হয়েছে। নতুন একটি অনুরোধ করুন।'
      });
    }

    // Check if user is already verified
    if (verificationToken.user.emailVerified) {
      return res.status(400).json({
        error: 'Already verified',
        message: 'Email has already been verified',
        messageBn: 'ইমেল আগেই যাচাই হয়েছে'
      });
    }

    // Update user status and email verification timestamp
    const updatedUser = await prisma.user.update({
      where: {
        id: verificationToken.userId
      },
      data: {
        status: 'ACTIVE',
        emailVerified: new Date()
      },
      select: {
        id: true,
        email: true,
        firstName: true,
        lastName: true,
        role: true,
        status: true,
        emailVerified: true
      }
    });

    // Delete verification token
    await prisma.emailVerificationToken.delete({
      where: {
        id: verificationToken.id
      }
    });

    // Send welcome email
    await emailService.sendWelcomeEmail(verificationToken.user.email, `${verificationToken.user.firstName} ${verificationToken.user.lastName}`);
    res.json({
      message: 'Email verified successfully',
      messageBn: 'ইমেল সফল যাচাই হয়েছে',
      user: updatedUser
    });
  } catch (error) {
    console.error('Email verification error:', error);
    res.status(500).json({
      error: 'Verification failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'যাচাই ব্যর্থ হয়েছে'
    });
  }
});

// Resend verification email endpoint
router.post('/resend-verification', [body('email').isEmail().normalizeEmail()], handleValidationErrors, async (req, res) => {
  try {
    const {
      email
    } = req.body;

    // Find user
    const user = await prisma.user.findUnique({
      where: {
        email
      },
      include: {
        emailVerificationTokens: {
          where: {
            expiresAt: {
              gt: new Date()
            }
          }
        }
      }
    });
    if (!user) {
      return res.status(404).json({
        error: 'User not found',
        message: 'No account found with this email address',
        messageBn: 'এই ইমেল ঠিকানা কোনো ব্যবহার্টার পাওয়া যায়নি'
      });
    }

    // Check if email is already verified
    if (user.emailVerified) {
      return res.status(400).json({
        error: 'Already verified',
        message: 'Email has already been verified',
        messageBn: 'ইমেল আগেই যাচাই হয়েছে'
      });
    }

    // Check if there's already a recent verification token (within 5 minutes)
    const recentToken = user.emailVerificationTokens[0];
    if (recentToken && Date.now() - recentToken.createdAt.getTime() < 5 * 60 * 1000) {
      return res.status(429).json({
        error: 'Too many requests',
        message: 'Please wait before requesting another verification email',
        messageBn: 'অন্য যাচাই ইমেল অনুরোধ করার জন্য অপেক্ষা করুন'
      });
    }

    // Delete any existing tokens for this user
    await prisma.emailVerificationToken.deleteMany({
      where: {
        userId: user.id
      }
    });

    // Generate new verification token
    const verificationToken = emailService.generateVerificationToken();
    const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000); // 24 hours

    // Save new verification token
    await prisma.emailVerificationToken.create({
      data: {
        userId: user.id,
        token: verificationToken,
        expiresAt
      }
    });

    // Send verification email
    const emailResult = await emailService.sendVerificationEmail(email, `${user.firstName} ${user.lastName}`, verificationToken);
    if (!emailResult.success) {
      return res.status(500).json({
        error: 'Failed to send email',
        message: 'Unable to send verification email. Please try again later.',
        messageBn: 'যাচাই ইমেল পাঠানো ব্যর্থ হয়েছে। অনুগ্রহ চেষ্টা করুন।'
      });
    }
    res.json({
      message: 'Verification email sent successfully',
      messageBn: 'যাচাই ইমেল সফল পাঠানো হয়েছে',
      email: email
    });
  } catch (error) {
    console.error('Resend verification error:', error);
    res.status(500).json({
      error: 'Failed to resend verification',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'যাচাই পুনরায়া পাঠানো ব্যর্থ হয়েছে'
    });
  }
});

// Send OTP endpoint
router.post('/send-otp', [body('phone').notEmpty().trim()], handleValidationErrors, async (req, res) => {
  try {
    const {
      phone
    } = req.body;

    // Validate phone number with enhanced service
    const phoneValidation = phoneValidationService.validateForUseCase(phone, 'otp');
    if (!phoneValidation.isValid) {
      return res.status(400).json({
        error: 'Invalid phone format',
        message: phoneValidation.error,
        messageBn: phoneValidation.errorBn,
        code: phoneValidation.code
      });
    }
    const normalizedPhone = phoneValidation.normalizedPhone;

    // Check if phone is already verified
    const isVerified = await otpService.isPhoneVerified(normalizedPhone);
    if (isVerified) {
      return res.status(400).json({
        error: 'Phone already verified',
        message: 'This phone number is already registered and verified',
        messageBn: 'এই ফোন নম্বর আগেই নিবন্ধন ও যাচাই হয়েছে'
      });
    }

    // Generate and send OTP
    const otpResult = await otpService.generatePhoneOTP(normalizedPhone);
    if (!otpResult.success) {
      return res.status(400).json({
        error: 'Failed to send OTP',
        message: otpResult.error,
        messageBn: otpResult.errorBn,
        code: otpResult.code
      });
    }
    res.json({
      message: 'OTP sent successfully',
      messageBn: 'OTP সফল পাঠানো হয়েছে',
      phone: normalizedPhone,
      operator: otpResult.operator,
      operatorDetails: otpResult.operatorDetails,
      expiresAt: otpResult.expiresAt,
      mock: otpResult.mock || false
    });
  } catch (error) {
    console.error('Send OTP error:', error);
    res.status(500).json({
      error: 'Failed to send OTP',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'OTP পাঠানো ব্যর্থ হয়েছে'
    });
  }
});

// Verify OTP endpoint
router.post('/verify-otp', [body('phone').notEmpty().trim(), body('otp').notEmpty().trim().isLength({
  min: 6,
  max: 6
})], handleValidationErrors, async (req, res) => {
  try {
    const {
      phone,
      otp
    } = req.body;

    // Validate phone number with enhanced service
    const phoneValidation = phoneValidationService.validateForUseCase(phone, 'otp');
    if (!phoneValidation.isValid) {
      return res.status(400).json({
        error: 'Invalid phone format',
        message: phoneValidation.error,
        messageBn: phoneValidation.errorBn,
        code: phoneValidation.code
      });
    }
    const normalizedPhone = phoneValidation.normalizedPhone;

    // Verify OTP
    const verifyResult = await otpService.verifyPhoneOTP(normalizedPhone, otp);
    if (!verifyResult.success) {
      return res.status(400).json({
        error: 'OTP verification failed',
        message: verifyResult.error,
        messageBn: verifyResult.errorBn,
        code: verifyResult.code
      });
    }

    // If OTP was for registration, find and update user
    if (verifyResult.userId) {
      const user = await prisma.user.findUnique({
        where: {
          id: verifyResult.userId
        },
        select: {
          id: true,
          email: true,
          firstName: true,
          lastName: true,
          phone: true,
          role: true,
          status: true,
          phoneVerified: true
        }
      });
      if (user) {
        return res.json({
          message: 'Phone verified successfully. Account is now active.',
          messageBn: 'ফোন সফল যাচাই হয়েছে। অ্যাকাউন্ট এখন সক্রিয়।',
          user,
          verifiedAt: verifyResult.verifiedAt
        });
      }
    }
    res.json({
      message: 'OTP verified successfully',
      messageBn: 'OTP সফল যাচাই হয়েছে',
      phone: normalizedPhone,
      verifiedAt: verifyResult.verifiedAt
    });
  } catch (error) {
    console.error('Verify OTP error:', error);
    res.status(500).json({
      error: 'OTP verification failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'OTP যাচাই ব্যর্থ হয়েছে'
    });
  }
});

// Resend OTP endpoint
router.post('/resend-otp', [body('phone').notEmpty().trim()], handleValidationErrors, async (req, res) => {
  try {
    const {
      phone
    } = req.body;

    // Validate phone number with enhanced service
    const phoneValidation = phoneValidationService.validateForUseCase(phone, 'otp');
    if (!phoneValidation.isValid) {
      return res.status(400).json({
        error: 'Invalid phone format',
        message: phoneValidation.error,
        messageBn: phoneValidation.errorBn,
        code: phoneValidation.code
      });
    }
    const normalizedPhone = phoneValidation.normalizedPhone;

    // Resend OTP
    const resendResult = await otpService.resendPhoneOTP(normalizedPhone);
    if (!resendResult.success) {
      return res.status(400).json({
        error: 'Failed to resend OTP',
        message: resendResult.error,
        messageBn: resendResult.errorBn,
        code: resendResult.code,
        waitTime: resendResult.waitTime
      });
    }
    res.json({
      message: 'OTP resent successfully',
      messageBn: 'OTP পুনরায়া পাঠানো হয়েছে',
      phone: normalizedPhone,
      operator: resendResult.operator,
      operatorDetails: resendResult.operatorDetails,
      expiresAt: resendResult.expiresAt,
      mock: resendResult.mock || false
    });
  } catch (error) {
    console.error('Resend OTP error:', error);
    res.status(500).json({
      error: 'Failed to resend OTP',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'OTP পুনরায়া ব্যর্থ হয়েছে'
    });
  }
});

// Change password endpoint
router.post('/change-password', [authMiddleware.authenticate(), body('currentPassword').notEmpty().trim(), body('newPassword').isLength({
  min: 8,
  max: 128
}), body('confirmPassword').notEmpty().trim()], handleValidationErrors, async (req, res) => {
  try {
    const {
      currentPassword,
      newPassword,
      confirmPassword
    } = req.body;
    const userId = req.user.id;

    // Check if new passwords match
    if (newPassword !== confirmPassword) {
      return res.status(400).json({
        error: 'Passwords do not match',
        message: 'New password and confirmation password must be same',
        messageBn: 'নতুন পাসওয়ার্ড একই হবি হতে হবে'
      });
    }

    // Get user with current password
    const user = await prisma.user.findUnique({
      where: {
        id: userId
      },
      select: {
        id: true,
        email: true,
        firstName: true,
        lastName: true,
        phone: true,
        password: true
      }
    });
    if (!user) {
      return res.status(404).json({
        error: 'User not found',
        message: 'User account not found',
        messageBn: 'ব্যবহার্টার পাওয়া যায়নি'
      });
    }

    // Verify current password
    const isCurrentPasswordValid = await passwordService.verifyPassword(currentPassword, user.password);
    if (!isCurrentPasswordValid) {
      return res.status(401).json({
        error: 'Invalid current password',
        message: 'The current password you entered is incorrect',
        messageBn: 'আপনি যে পাসওয়ার্ড দিয়েছেন সেটা ভুল'
      });
    }

    // Check if new password is same as current password
    const isSameAsCurrent = await passwordService.verifyPassword(newPassword, user.password);
    if (isSameAsCurrent) {
      return res.status(400).json({
        error: 'Same password',
        message: 'New password must be different from current password',
        messageBn: 'নতুন পাসওয়ার্ড বর্তমান পাসওয়ার্ড থেকে হতে হবে'
      });
    }

    // Validate new password strength
    const userInfo = {
      firstName: user.firstName,
      lastName: user.lastName,
      email: user.email,
      phone: user.phone
    };
    const passwordValidation = passwordService.validatePasswordStrength(newPassword, userInfo);
    if (!passwordValidation.isValid) {
      return res.status(400).json({
        error: 'Password does not meet requirements',
        message: 'New password is too weak or does not meet security requirements',
        messageBn: 'নতুন পাসওয়ার্ড খুবই বা নিরাপত্তিগিয় পূর্ব',
        details: {
          strength: passwordValidation.strength,
          score: passwordValidation.score,
          feedback: passwordValidation.feedback,
          warnings: passwordValidation.warnings,
          suggestions: passwordValidation.suggestions,
          passwordPolicy: passwordService.getPasswordPolicy()
        }
      });
    }

    // Check if password has been used before
    const isPasswordReused = await passwordService.isPasswordReused(userId, newPassword);
    if (isPasswordReused) {
      return res.status(400).json({
        error: 'Password already used',
        message: 'You cannot reuse a password that has been used in the last 5 changes',
        messageBn: 'আপনি শেষ 5টি পাসওয়ার্ড পরিবর্তন ব্যবহার করা পাসওয়ার্ড ব্যবহার করতে পারেন'
      });
    }

    // Hash new password
    const hashedNewPassword = await passwordService.hashPassword(newPassword);

    // Update user password
    await prisma.user.update({
      where: {
        id: userId
      },
      data: {
        password: hashedNewPassword
      }
    });

    // Save new password to history
    await passwordService.savePasswordToHistory(userId, hashedNewPassword);

    // Log password change (you might want to add proper logging here)
    console.log(`Password changed for user ${userId} at ${new Date().toISOString()}`);
    res.json({
      message: 'Password changed successfully',
      messageBn: 'পাসওয়ার্ড সফল হয়েছে',
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    console.error('Change password error:', error);
    res.status(500).json({
      error: 'Password change failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'পাসওয়ার্ড পরিবর্তন ব্যর্থ হয়েছে'
    });
  }
});

// Request password reset endpoint
router.post('/forgot-password', [body('email').isEmail().normalizeEmail()], handleValidationErrors, async (req, res) => {
  try {
    const {
      email
    } = req.body;

    // Find user
    const user = await prisma.user.findUnique({
      where: {
        email
      }
    });
    if (!user) {
      // Don't reveal if user exists or not for security
      return res.json({
        message: 'If an account with that email exists, a password reset link has been sent',
        messageBn: 'যদি এই ইমেল ঠিকানা কোনো অ্যাকাউন্ট থাকলে, একটি পাসওয়ার্ড রিসেট লিঙ্ক পাঠানো হয়েছে'
      });
    }

    // Generate reset token (you might want to use a separate token service)
    const resetToken = emailService.generateVerificationToken();
    const expiresAt = new Date(Date.now() + 1 * 60 * 60 * 1000); // 1 hour

    // Save reset token (using email verification token table for simplicity)
    await prisma.emailVerificationToken.create({
      data: {
        userId: user.id,
        token: resetToken,
        expiresAt
      }
    });

    // Generate temporary strong password
    const temporaryPassword = passwordService.generateStrongPassword(12);
    const hashedTempPassword = await passwordService.hashPassword(temporaryPassword);

    // Update user with temporary password
    await prisma.user.update({
      where: {
        id: user.id
      },
      data: {
        password: hashedTempPassword
      }
    });

    // Save temporary password to history
    await passwordService.savePasswordToHistory(user.id, hashedTempPassword);

    // Send reset email with temporary password
    const emailResult = await emailService.sendPasswordResetEmail(email, `${user.firstName} ${user.lastName}`, temporaryPassword, resetToken);
    if (!emailResult.success) {
      return res.status(500).json({
        error: 'Failed to send reset email',
        message: 'Unable to send password reset email. Please try again later.',
        messageBn: 'পাসওয়ার্ড রিসেট ইমেল পাঠানো ব্যর্থ হয়েছে। অনুগ্রহ চেষ্টা করুন।'
      });
    }
    res.json({
      message: 'Password reset email sent successfully',
      messageBn: 'পাসওয়ার্ড রিসেট ইমেল সফল পাঠানো হয়েছে',
      email: email
    });
  } catch (error) {
    console.error('Forgot password error:', error);
    res.status(500).json({
      error: 'Password reset failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'পাসওয়ার্ড রিসেট ব্যর্থ হয়েছে'
    });
  }
});

// Reset password endpoint (with token)
router.post('/reset-password', [body('token').notEmpty().trim(), body('newPassword').isLength({
  min: 8,
  max: 128
}), body('confirmPassword').notEmpty().trim()], handleValidationErrors, async (req, res) => {
  try {
    const {
      token,
      newPassword,
      confirmPassword
    } = req.body;

    // Check if new passwords match
    if (newPassword !== confirmPassword) {
      return res.status(400).json({
        error: 'Passwords do not match',
        message: 'New password and confirmation password must be same',
        messageBn: 'নতুন পাসওয়ার্ড একই হবি হতে হবে'
      });
    }

    // Find reset token
    const resetToken = await prisma.emailVerificationToken.findUnique({
      where: {
        token
      },
      include: {
        user: true
      }
    });
    if (!resetToken) {
      return res.status(400).json({
        error: 'Invalid token',
        message: 'Password reset token is invalid or has been used',
        messageBn: 'পাসওয়ার্ড রিসেট টোকেন অবৈধ বা ব্যবহার হয়েছে'
      });
    }

    // Check if token has expired
    if (resetToken.expiresAt < new Date()) {
      // Delete expired token
      await prisma.emailVerificationToken.delete({
        where: {
          id: resetToken.id
        }
      });
      return res.status(400).json({
        error: 'Token expired',
        message: 'Password reset token has expired. Please request a new one.',
        messageBn: 'পাসওয়ার্ড রিসেট টোকেন মেয়াদীপূর্ণ হয়েছে। নতুন একটি অনুরোধ করুন।'
      });
    }

    // Validate new password strength
    const userInfo = {
      firstName: resetToken.user.firstName,
      lastName: resetToken.user.lastName,
      email: resetToken.user.email,
      phone: resetToken.user.phone
    };
    const passwordValidation = passwordService.validatePasswordStrength(newPassword, userInfo);
    if (!passwordValidation.isValid) {
      return res.status(400).json({
        error: 'Password does not meet requirements',
        message: 'New password is too weak or does not meet security requirements',
        messageBn: 'নতুন পাসওয়ার্ড খুবই বা নিরাপত্তিগিয় পূর্ব',
        details: {
          strength: passwordValidation.strength,
          score: passwordValidation.score,
          feedback: passwordValidation.feedback,
          warnings: passwordValidation.warnings,
          suggestions: passwordValidation.suggestions,
          passwordPolicy: passwordService.getPasswordPolicy()
        }
      });
    }

    // Check if password has been used before
    const isPasswordReused = await passwordService.isPasswordReused(resetToken.userId, newPassword);
    if (isPasswordReused) {
      return res.status(400).json({
        error: 'Password already used',
        message: 'You cannot reuse a password that has been used in the last 5 changes',
        messageBn: 'আপনি শেষ 5টি পাসওয়ার্ড পরিবর্তন ব্যবহার করা পাসওয়ার্ড ব্যবহার করতে পারেন'
      });
    }

    // Hash new password
    const hashedNewPassword = await passwordService.hashPassword(newPassword);

    // Update user password
    await prisma.user.update({
      where: {
        id: resetToken.userId
      },
      data: {
        password: hashedNewPassword
      }
    });

    // Save new password to history
    await passwordService.savePasswordToHistory(resetToken.userId, hashedNewPassword);

    // Delete reset token
    await prisma.emailVerificationToken.delete({
      where: {
        id: resetToken.id
      }
    });

    // Update user status to active if pending
    if (resetToken.user.status === 'PENDING') {
      await prisma.user.update({
        where: {
          id: resetToken.userId
        },
        data: {
          status: 'ACTIVE'
        }
      });
    }

    // Log password reset
    console.log(`Password reset for user ${resetToken.userId} at ${new Date().toISOString()}`);
    res.json({
      message: 'Password reset successfully',
      messageBn: 'পাসওয়ার্ড সফল হয়েছে',
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    console.error('Reset password error:', error);
    res.status(500).json({
      error: 'Password reset failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'পাসওয়ার্ড রিসেট ব্যর্থ হয়েছে'
    });
  }
});

// Get password policy endpoint
router.get('/password-policy', async (req, res) => {
  try {
    const policy = passwordService.getPasswordPolicy();
    res.json({
      policy,
      message: 'Current password policy requirements',
      messageBn: 'বর্তমান পাসওয়ার্ড নীতিমালা'
    });
  } catch (error) {
    console.error('Get password policy error:', error);
    res.status(500).json({
      error: 'Failed to get password policy',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'পাসওয়ার্ড নীতিমালা পাওতে ব্যর্থ হয়েছে'
    });
  }
});

// Get phone validation info endpoint
router.post('/validate-phone', [body('phone').notEmpty().trim()], handleValidationErrors, async (req, res) => {
  try {
    const {
      phone
    } = req.body;
    const validation = phoneValidationService.validateBangladeshPhoneNumber(phone);
    res.json({
      validation,
      message: validation.isValid ? 'Valid phone number' : 'Invalid phone number',
      messageBn: validation.isValid ? 'বৈধ ফোন নম্বর' : 'অবৈধ ফোন নম্বর'
    });
  } catch (error) {
    console.error('Phone validation error:', error);
    res.status(500).json({
      error: 'Validation failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'যাচাই ব্যর্থ হয়েছে'
    });
  }
});

// Get supported operators endpoint
router.get('/operators', async (req, res) => {
  try {
    const operators = phoneValidationService.getSupportedOperators();
    res.json({
      operators,
      message: 'Supported mobile operators',
      messageBn: 'সমর্থিত মোবাইল অপারেটর'
    });
  } catch (error) {
    console.error('Get operators error:', error);
    res.status(500).json({
      error: 'Failed to get operators',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'অপারেটর পাওতে ব্যর্থ হয়েছে'
    });
  }
});

// Remember me token validation endpoint
router.post('/validate-remember-me', [body('token').notEmpty().trim()], handleValidationErrors, async (req, res) => {
  try {
    const {
      token
    } = req.body;
    if (!token) {
      return res.status(400).json({
        error: 'Token required',
        message: 'Remember me token is required',
        messageBn: 'রিমেম্বার মি টোকেন প্রয়োজন'
      });
    }

    // Validate remember me token
    const validation = await sessionService.validateRememberMeToken(token);
    if (!validation.valid) {
      return res.status(400).json({
        error: 'Invalid token',
        message: validation.reason || 'Remember me token is invalid or expired',
        messageBn: validation.reason || 'রিমেম্বার মি টোকেন অবৈধ বা মেয়াদীপূর্ণ'
      });
    }

    // Get user details
    const user = await prisma.user.findUnique({
      where: {
        id: validation.userId
      },
      select: {
        id: true,
        email: true,
        firstName: true,
        lastName: true,
        phone: true,
        role: true,
        status: true
      }
    });
    if (!user) {
      return res.status(404).json({
        error: 'User not found',
        message: 'User account not found',
        messageBn: 'ব্যবহার্টার পাওয়া যায়নি'
      });
    }
    res.json({
      message: 'Remember me token is valid',
      messageBn: 'রিমেম্বার মি টোকেন বৈধ',
      user,
      tokenValid: true,
      createdAt: validation.createdAt
    });
  } catch (error) {
    console.error('Remember me token validation error:', error);
    res.status(500).json({
      error: 'Validation failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'যাচাই ব্যর্থ হয়েছে'
    });
  }
});

// Refresh session using remember me token
router.post('/refresh-from-remember-me', [body('token').notEmpty().trim()], handleValidationErrors, async (req, res) => {
  try {
    const {
      token
    } = req.body;
    if (!token) {
      return res.status(400).json({
        error: 'Token required',
        message: 'Remember me token is required',
        messageBn: 'রিমেম্বার মি টোকেন প্রয়োজন'
      });
    }

    // Refresh session using remember me token
    const refreshResult = await sessionService.refreshFromRememberMeToken(token, req);
    if (!refreshResult.success) {
      return res.status(400).json({
        error: 'Session refresh failed',
        message: refreshResult.reason || 'Failed to refresh session from remember me token',
        messageBn: refreshResult.reason || 'রিমেম্বার মি টোকেন থেকে সেশন রিফ্রেশ ব্যর্থ হয়েছে'
      });
    }

    // Get user details
    const user = await prisma.user.findUnique({
      where: {
        id: refreshResult.userId
      },
      select: {
        id: true,
        email: true,
        firstName: true,
        lastName: true,
        phone: true,
        role: true,
        status: true
      }
    });
    if (!user) {
      return res.status(404).json({
        error: 'User not found',
        message: 'User account not found',
        messageBn: 'ব্যবহার্টার পাওয়া যায়নি'
      });
    }

    // Set session cookie
    sessionMiddleware.setSessionCookie(res, refreshResult.sessionId, {
      maxAge: refreshResult.maxAge,
      rememberMe: true
    });

    // Add session headers
    const sessionHeaders = sessionMiddleware.sessionHeaders(refreshResult);
    Object.keys(sessionHeaders).forEach(key => {
      res.set(key, sessionHeaders[key]);
    });

    // Generate JWT token for API compatibility
    const jwtSecretLogin = process.env.JWT_SECRET;
    if (!jwtSecretLogin) {
      throw new Error('JWT_SECRET environment variable is required');
    }
    const jwtToken = jwt.sign({
      userId: user.id,
      email: user.email,
      phone: user.phone,
      role: user.role,
      sessionId: refreshResult.sessionId
    }, jwtSecretLogin, {
      expiresIn: process.env.JWT_EXPIRES_IN || '15m'
    });
    res.json({
      message: 'Session refreshed successfully',
      messageBn: 'সেশন সফল হয়েছে',
      user,
      token: jwtToken,
      sessionId: refreshResult.sessionId,
      expiresAt: refreshResult.expiresAt,
      maxAge: refreshResult.maxAge,
      rememberMe: true,
      refreshedFrom: 'remember_me_token'
    });
  } catch (error) {
    console.error('Remember me session refresh error:', error);
    res.status(500).json({
      error: 'Session refresh failed',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'সেশন রিফ্রেশ ব্যর্থ হয়েছে'
    });
  }
});

// Disable remember me functionality
router.post('/disable-remember-me', [authMiddleware.authenticate(), body('allDevices').optional().isBoolean()], handleValidationErrors, async (req, res) => {
  try {
    const {
      allDevices
    } = req.body;
    const userId = req.user.id;
    const currentSessionId = req.sessionId;
    if (allDevices) {
      // Destroy all remember me sessions for this user
      const result = await sessionService.destroyAllUserSessions(userId, currentSessionId);

      // Clear remember me cookies
      res.clearCookie('rememberMe');
      res.clearCookie('rememberMeEnabled');
      res.json({
        message: 'Remember me disabled on all devices',
        messageBn: 'সব ডিভাইসে রিমেম্বার মি নিষ্ক্রিয় করা হয়েছে',
        allDevices: true,
        destroyedCount: result.destroyedCount
      });
    } else {
      // Destroy current session only
      const result = await sessionService.destroySession(currentSessionId, 'disable_remember_me');

      // Clear remember me cookies
      res.clearCookie('rememberMe');
      res.clearCookie('rememberMeEnabled');
      res.json({
        message: 'Remember me disabled on current device',
        messageBn: 'বর্তমান ডিভাইসে রিমেম্বার মি নিষ্ক্রিয় করা হয়েছে',
        allDevices: false,
        destroyedCount: 1
      });
    }
  } catch (error) {
    console.error('Disable remember me error:', error);
    res.status(500).json({
      error: 'Failed to disable remember me',
      message: process.env.NODE_ENV === 'development' ? error.message : 'Internal server error',
      messageBn: 'রিমেম্বার মি নিষ্ক্রিয় করতে ব্যর্থ হয়েছে'
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvZHkiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiYmNyeXB0Iiwiand0IiwiUHJpc21hQ2xpZW50IiwiZW1haWxTZXJ2aWNlIiwic21zU2VydmljZSIsIm90cFNlcnZpY2UiLCJhdXRoTWlkZGxld2FyZSIsInNlc3Npb25NaWRkbGV3YXJlIiwic2Vzc2lvblNlcnZpY2UiLCJwYXNzd29yZFNlcnZpY2UiLCJwaG9uZVZhbGlkYXRpb25TZXJ2aWNlIiwiY29uZmlnU2VydmljZSIsImxvZ2dlclNlcnZpY2UiLCJsb2dpblNlY3VyaXR5U2VydmljZSIsImxvZ2luU2VjdXJpdHlNaWRkbGV3YXJlIiwicm91dGVyIiwiUm91dGVyIiwicHJpc21hIiwiaGFuZGxlVmFsaWRhdGlvbkVycm9ycyIsInJlcSIsInJlcyIsIm5leHQiLCJlcnJvcnMiLCJpc0VtcHR5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiZGV0YWlscyIsImFycmF5IiwicG9zdCIsIm9wdGlvbmFsIiwiaXNFbWFpbCIsIm5vcm1hbGl6ZUVtYWlsIiwiaXNMZW5ndGgiLCJtaW4iLCJtYXgiLCJub3RFbXB0eSIsInRyaW0iLCJlbWFpbCIsInBhc3N3b3JkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJmbmFtZSIsImxuYW1lIiwicGhvbmUiLCJwaG9uZU51bWJlciIsImNvbmZpcm1QYXNzd29yZCIsImZpbmFsRmlyc3ROYW1lIiwiZmluYWxMYXN0TmFtZSIsImZpbmFsUGhvbmUiLCJtZXNzYWdlIiwibWVzc2FnZUJuIiwidXNlckluZm8iLCJwYXNzd29yZFZhbGlkYXRpb24iLCJ2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgiLCJpc1ZhbGlkIiwic3RyZW5ndGgiLCJzY29yZSIsImZlZWRiYWNrIiwid2FybmluZ3MiLCJzdWdnZXN0aW9ucyIsInBhc3N3b3JkUG9saWN5IiwiZ2V0UGFzc3dvcmRQb2xpY3kiLCJ2YWxpZGF0ZUVtYWlsIiwiaXNEaXNwb3NhYmxlRW1haWwiLCJwaG9uZVZhbGlkYXRpb24iLCJ2YWxpZGF0ZUZvclVzZUNhc2UiLCJlcnJvckJuIiwiY29kZSIsImV4aXN0aW5nVXNlciIsInVzZXIiLCJmaW5kRmlyc3QiLCJ3aGVyZSIsIk9SIiwibm9ybWFsaXplZFBob25lIiwiZmllbGQiLCJoYXNoZWRQYXNzd29yZCIsImhhc2hQYXNzd29yZCIsImNyZWF0ZSIsImRhdGEiLCJyb2xlIiwic2VsZWN0IiwiaWQiLCJjcmVhdGVkQXQiLCJzYXZlUGFzc3dvcmRUb0hpc3RvcnkiLCJpc1Rlc3RpbmdNb2RlIiwiaXNFbWFpbFZlcmlmaWNhdGlvbkRpc2FibGVkIiwiaXNQaG9uZVZlcmlmaWNhdGlvbkRpc2FibGVkIiwidmVyaWZpY2F0aW9uVG9rZW4iLCJnZW5lcmF0ZVZlcmlmaWNhdGlvblRva2VuIiwiZXhwaXJlc0F0IiwiRGF0ZSIsIm5vdyIsImVtYWlsVmVyaWZpY2F0aW9uVG9rZW4iLCJ1c2VySWQiLCJ0b2tlbiIsImVtYWlsUmVzdWx0Iiwic2VuZFZlcmlmaWNhdGlvbkVtYWlsIiwic3VjY2VzcyIsImRlbGV0ZSIsInJlcXVpcmVzRW1haWxWZXJpZmljYXRpb24iLCJvdHBSZXN1bHQiLCJnZW5lcmF0ZVBob25lT1RQIiwicmVxdWlyZXNQaG9uZVZlcmlmaWNhdGlvbiIsIm9wZXJhdG9yIiwib3BlcmF0b3JEZXRhaWxzIiwidXBkYXRlZFVzZXIiLCJ1cGRhdGUiLCJlbWFpbFZlcmlmaWVkIiwicGhvbmVWZXJpZmllZCIsInRlc3RpbmdNb2RlIiwidmVyaWZpY2F0aW9uU2tpcHBlZCIsImNvbnNvbGUiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJpc0Jvb2xlYW4iLCJpc1N0cmluZyIsImVuZm9yY2UiLCJpZGVudGlmaWVyIiwicmVtZW1iZXJNZSIsImNhcHRjaGEiLCJkZXZpY2VGaW5nZXJwcmludCIsImluY2x1ZGVzIiwibG9naW5UeXBlIiwiZmluZFVuaXF1ZSIsImlzVmFsaWRQYXNzd29yZCIsImNvbXBhcmUiLCJyZXF1aXJlc1ZlcmlmaWNhdGlvbiIsInZlcmlmaWNhdGlvbk1lc3NhZ2UiLCJ2ZXJpZmljYXRpb25NZXNzYWdlQm4iLCJ2ZXJpZmljYXRpb25UeXBlIiwibGFzdExvZ2luQXQiLCJzZXNzaW9uUmVzdWx0IiwiY3JlYXRlU2Vzc2lvbiIsIm1heEFnZSIsInNlc3Npb25JZCIsInNldFNlc3Npb25Db29raWUiLCJzZXNzaW9uSGVhZGVycyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5Iiwic2V0Iiwiand0U2VjcmV0TG9naW4iLCJKV1RfU0VDUkVUIiwiRXJyb3IiLCJzaWduIiwiZXhwaXJlc0luIiwiSldUX0VYUElSRVNfSU4iLCJyZWNvcmRTdWNjZXNzZnVsTG9naW4iLCJzZWN1cml0eUNvbnRleHQiLCJuYW1lIiwic3RhY2siLCJhdXRoRXJyb3IiLCJyZWNvcmRGYWlsZWRMb2dpbiIsInZhbGlkYXRlQ2FwdGNoYSIsImlwIiwiYWxsRGV2aWNlcyIsImdldFNlc3Npb25JZCIsInZhbGlkYXRpb24iLCJ2YWxpZGF0ZVNlc3Npb24iLCJ2YWxpZCIsImNsZWFyU2Vzc2lvbkNvb2tpZSIsInNlc3Npb25FeHBpcmVkIiwicmVzdWx0IiwiZGVzdHJveUFsbFVzZXJTZXNzaW9ucyIsImRlc3Ryb3lTZXNzaW9uIiwicmVhc29uIiwiZGVzdHJveWVkQ291bnQiLCJqd3RTZWNyZXRSZWZyZXNoIiwiZGVjb2RlZCIsInZlcmlmeSIsImp3dFNlY3JldE5ldyIsIm5ld1Rva2VuIiwiaW5jbHVkZSIsInNlbmRXZWxjb21lRW1haWwiLCJlbWFpbFZlcmlmaWNhdGlvblRva2VucyIsImd0IiwicmVjZW50VG9rZW4iLCJnZXRUaW1lIiwiZGVsZXRlTWFueSIsImlzVmVyaWZpZWQiLCJpc1Bob25lVmVyaWZpZWQiLCJtb2NrIiwib3RwIiwidmVyaWZ5UmVzdWx0IiwidmVyaWZ5UGhvbmVPVFAiLCJ2ZXJpZmllZEF0IiwicmVzZW5kUmVzdWx0IiwicmVzZW5kUGhvbmVPVFAiLCJ3YWl0VGltZSIsImF1dGhlbnRpY2F0ZSIsImN1cnJlbnRQYXNzd29yZCIsIm5ld1Bhc3N3b3JkIiwiaXNDdXJyZW50UGFzc3dvcmRWYWxpZCIsInZlcmlmeVBhc3N3b3JkIiwiaXNTYW1lQXNDdXJyZW50IiwiaXNQYXNzd29yZFJldXNlZCIsImhhc2hlZE5ld1Bhc3N3b3JkIiwibG9nIiwidG9JU09TdHJpbmciLCJ0aW1lc3RhbXAiLCJyZXNldFRva2VuIiwidGVtcG9yYXJ5UGFzc3dvcmQiLCJnZW5lcmF0ZVN0cm9uZ1Bhc3N3b3JkIiwiaGFzaGVkVGVtcFBhc3N3b3JkIiwic2VuZFBhc3N3b3JkUmVzZXRFbWFpbCIsImdldCIsInBvbGljeSIsInZhbGlkYXRlQmFuZ2xhZGVzaFBob25lTnVtYmVyIiwib3BlcmF0b3JzIiwiZ2V0U3VwcG9ydGVkT3BlcmF0b3JzIiwidmFsaWRhdGVSZW1lbWJlck1lVG9rZW4iLCJ0b2tlblZhbGlkIiwicmVmcmVzaFJlc3VsdCIsInJlZnJlc2hGcm9tUmVtZW1iZXJNZVRva2VuIiwiand0VG9rZW4iLCJyZWZyZXNoZWRGcm9tIiwiY3VycmVudFNlc3Npb25JZCIsImNsZWFyQ29va2llIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbImF1dGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgeyBib2R5LCB2YWxpZGF0aW9uUmVzdWx0IH0gPSByZXF1aXJlKCdleHByZXNzLXZhbGlkYXRvcicpO1xyXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpO1xyXG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcclxuY29uc3QgeyBQcmlzbWFDbGllbnQgfSA9IHJlcXVpcmUoJ0BwcmlzbWEvY2xpZW50Jyk7XHJcbmNvbnN0IHsgZW1haWxTZXJ2aWNlIH0gPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9lbWFpbFNlcnZpY2UnKTtcclxuY29uc3QgeyBzbXNTZXJ2aWNlIH0gPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9zbXNTZXJ2aWNlJyk7XHJcbmNvbnN0IHsgb3RwU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvb3RwU2VydmljZScpO1xyXG5jb25zdCB7IGF1dGhNaWRkbGV3YXJlIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcclxuY29uc3QgeyBzZXNzaW9uTWlkZGxld2FyZSB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9zZXNzaW9uJyk7XHJcbmNvbnN0IHsgc2Vzc2lvblNlcnZpY2UgfSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL3Nlc3Npb25TZXJ2aWNlJyk7XHJcbmNvbnN0IHsgcGFzc3dvcmRTZXJ2aWNlIH0gPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9wYXNzd29yZFNlcnZpY2UnKTtcclxuY29uc3QgeyBwaG9uZVZhbGlkYXRpb25TZXJ2aWNlIH0gPSByZXF1aXJlKCcuLi9zZXJ2aWNlcy9waG9uZVZhbGlkYXRpb25TZXJ2aWNlJyk7XHJcbmNvbnN0IHsgY29uZmlnU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvY29uZmlnJyk7XHJcbmNvbnN0IHsgbG9nZ2VyU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMvbG9nZ2VyJyk7XHJcbmNvbnN0IHsgbG9naW5TZWN1cml0eVNlcnZpY2UgfSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL2xvZ2luU2VjdXJpdHlTZXJ2aWNlJyk7XHJcbmNvbnN0IHsgbG9naW5TZWN1cml0eU1pZGRsZXdhcmUgfSA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmUvbG9naW5TZWN1cml0eScpO1xyXG5cclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xyXG5cclxuLy8gVmFsaWRhdGlvbiBtaWRkbGV3YXJlXHJcbmNvbnN0IGhhbmRsZVZhbGlkYXRpb25FcnJvcnMgPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XHJcbiAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcclxuICAgICAgZGV0YWlsczogZXJyb3JzLmFycmF5KClcclxuICAgIH0pO1xyXG4gIH1cclxuICBuZXh0KCk7XHJcbn07XHJcblxyXG4vLyBSZWdpc3RlciBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL3JlZ2lzdGVyJywgW1xyXG4gIGJvZHkoJ2VtYWlsJykub3B0aW9uYWwoKS5pc0VtYWlsKCkubm9ybWFsaXplRW1haWwoKSxcclxuICBib2R5KCdwYXNzd29yZCcpLmlzTGVuZ3RoKHsgbWluOiA4LCBtYXg6IDEyOCB9KSxcclxuICBib2R5KCdmaXJzdE5hbWUnKS5vcHRpb25hbCgpLm5vdEVtcHR5KCkudHJpbSgpLFxyXG4gIGJvZHkoJ2xhc3ROYW1lJykub3B0aW9uYWwoKS5ub3RFbXB0eSgpLnRyaW0oKSxcclxuICBib2R5KCdmbmFtZScpLm9wdGlvbmFsKCkubm90RW1wdHkoKS50cmltKCksXHJcbiAgYm9keSgnbG5hbWUnKS5vcHRpb25hbCgpLm5vdEVtcHR5KCkudHJpbSgpLFxyXG4gIGJvZHkoJ3Bob25lJykub3B0aW9uYWwoKS5ub3RFbXB0eSgpLnRyaW0oKSxcclxuICBib2R5KCdwaG9uZU51bWJlcicpLm9wdGlvbmFsKCkubm90RW1wdHkoKS50cmltKCksXHJcbiAgYm9keSgnY29uZmlybVBhc3N3b3JkJykubm90RW1wdHkoKS50cmltKClcclxuXSwgaGFuZGxlVmFsaWRhdGlvbkVycm9ycywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICBjb25zdCB7XHJcbiAgICBlbWFpbCxcclxuICAgIHBhc3N3b3JkLFxyXG4gICAgZmlyc3ROYW1lLFxyXG4gICAgbGFzdE5hbWUsXHJcbiAgICBmbmFtZSxcclxuICAgIGxuYW1lLFxyXG4gICAgcGhvbmUsXHJcbiAgICBwaG9uZU51bWJlcixcclxuICAgIGNvbmZpcm1QYXNzd29yZFxyXG4gIH0gPSByZXEuYm9keTtcclxuICBcclxuICAvLyBIYW5kbGUgcHJvcGVydHkgbmFtZSB2YXJpYXRpb25zXHJcbiAgY29uc3QgZmluYWxGaXJzdE5hbWUgPSBmaXJzdE5hbWUgfHwgZm5hbWU7XHJcbiAgY29uc3QgZmluYWxMYXN0TmFtZSA9IGxhc3ROYW1lIHx8IGxuYW1lO1xyXG4gIGNvbnN0IGZpbmFsUGhvbmUgPSBwaG9uZSB8fCBwaG9uZU51bWJlcjtcclxuICBcclxuICAvLyBWYWxpZGF0ZSB0aGF0IGF0IGxlYXN0IGVtYWlsIG9yIHBob25lIGlzIHByb3ZpZGVkXHJcbiAgaWYgKCFlbWFpbCAmJiAhZmluYWxQaG9uZSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSByZXF1aXJlZCcsXHJcbiAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSBlaXRoZXIgZW1haWwgb3IgcGhvbmUgbnVtYmVyIGZvciByZWdpc3RyYXRpb24nLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpoXgpqjgp4Hgppfgp43gprDgprkg4KaH4Kau4KeH4KayIOCmrOCmviDgpqvgp4vgpqgg4Kao4Kau4KeN4Kas4KawIOCmpuCmv+CmqCdcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAvLyBWYWxpZGF0ZSBjb25maXJtIHBhc3N3b3JkIG1hdGNoZXNcclxuICBpZiAocGFzc3dvcmQgIT09IGNvbmZpcm1QYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdQYXNzd29yZHMgZG8gbm90IG1hdGNoJyxcclxuICAgICAgbWVzc2FnZTogJ1Bhc3N3b3JkIGFuZCBjb25maXJtIHBhc3N3b3JkIG11c3QgbWF0Y2gnLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4KaP4Kas4KaCIOCmqOCmv+CmtuCnjeCmmuCmv+CmpCDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kau4Ka/4Kay4Kak4KeHIOCmueCmrOCnhydcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIFZhbGlkYXRlIHBhc3N3b3JkIHN0cmVuZ3RoXHJcbiAgY29uc3QgdXNlckluZm8gPSB7IGZpcnN0TmFtZTogZmluYWxGaXJzdE5hbWUsIGxhc3ROYW1lOiBmaW5hbExhc3ROYW1lLCBlbWFpbCwgcGhvbmU6IGZpbmFsUGhvbmUgfTtcclxuICBjb25zdCBwYXNzd29yZFZhbGlkYXRpb24gPSBwYXNzd29yZFNlcnZpY2UudmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKHBhc3N3b3JkLCB1c2VySW5mbyk7XHJcbiAgXHJcbiAgaWYgKCFwYXNzd29yZFZhbGlkYXRpb24uaXNWYWxpZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdQYXNzd29yZCBkb2VzIG5vdCBtZWV0IHJlcXVpcmVtZW50cycsXHJcbiAgICAgIG1lc3NhZ2U6ICdQYXNzd29yZCBpcyB0b28gd2VhayBvciBkb2VzIG5vdCBtZWV0IHNlY3VyaXR5IHJlcXVpcmVtZW50cycsXHJcbiAgICAgIG1lc3NhZ2VCbjogJ+CmquCmvuCmuOCmk+Cmr+CmvOCmvuCmsOCnjeCmoSDgppbgp4Hgpqzgpocg4Kas4Ka+IOCmqOCmv+CmsOCmvuCmquCmpOCnjeCmpOCmv+Cml+Cmv+Cmr+CmvCDgpqrgp4LgprDgp43gpqwnLFxyXG4gICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgc3RyZW5ndGg6IHBhc3N3b3JkVmFsaWRhdGlvbi5zdHJlbmd0aCxcclxuICAgICAgICBzY29yZTogcGFzc3dvcmRWYWxpZGF0aW9uLnNjb3JlLFxyXG4gICAgICAgIGZlZWRiYWNrOiBwYXNzd29yZFZhbGlkYXRpb24uZmVlZGJhY2ssXHJcbiAgICAgICAgd2FybmluZ3M6IHBhc3N3b3JkVmFsaWRhdGlvbi53YXJuaW5ncyxcclxuICAgICAgICBzdWdnZXN0aW9uczogcGFzc3dvcmRWYWxpZGF0aW9uLnN1Z2dlc3Rpb25zLFxyXG4gICAgICAgIHBhc3N3b3JkUG9saWN5OiBwYXNzd29yZFNlcnZpY2UuZ2V0UGFzc3dvcmRQb2xpY3koKVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZW1haWwgaWYgcHJvdmlkZWRcclxuICAgIGlmIChlbWFpbCkge1xyXG4gICAgICBpZiAoIWVtYWlsU2VydmljZS52YWxpZGF0ZUVtYWlsKGVtYWlsKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgZW1haWwgZm9ybWF0JyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnLFxyXG4gICAgICAgICAgbWVzc2FnZUJuOiAn4KaF4Kao4KeB4KaX4KeN4Kaw4Ka5IOCmh+CmruCnh+CmsiDgpqDgpr/gppXgpr7gpqjgpr4g4Kam4Ka/4KaoJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZW1haWxTZXJ2aWNlLmlzRGlzcG9zYWJsZUVtYWlsKGVtYWlsKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBlcnJvcjogJ0Rpc3Bvc2FibGUgZW1haWwgbm90IGFsbG93ZWQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSB1c2UgYSBwZXJtYW5lbnQgZW1haWwgYWRkcmVzcyBmb3IgcmVnaXN0cmF0aW9uJyxcclxuICAgICAgICAgIG1lc3NhZ2VCbjogJ+CmqOCmv+CmrOCmqOCnjeCmp+CmqCDgpofgpq7gp4fgprIg4Kas4KeN4Kav4Kas4Ka54Ka+4KawIOCmleCmsOCngeCmqCwg4KaF4Kao4KeB4KaX4KeN4Kaw4Ka5IOCmh+CmruCnh+CmsiDgpqzgp43gpq/gpqzgprngpr7gprAg4KaV4Kaw4KeB4KaoJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgcGhvbmUgaWYgcHJvdmlkZWRcclxuICAgIGxldCBwaG9uZVZhbGlkYXRpb24gPSBudWxsO1xyXG4gICAgaWYgKGZpbmFsUGhvbmUpIHtcclxuICAgICAgcGhvbmVWYWxpZGF0aW9uID0gcGhvbmVWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZUZvclVzZUNhc2UoZmluYWxQaG9uZSwgJ3JlZ2lzdHJhdGlvbicpO1xyXG4gICAgICBpZiAoIXBob25lVmFsaWRhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBwaG9uZSBmb3JtYXQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogcGhvbmVWYWxpZGF0aW9uLmVycm9yLFxyXG4gICAgICAgICAgbWVzc2FnZUJuOiBwaG9uZVZhbGlkYXRpb24uZXJyb3JCbixcclxuICAgICAgICAgIGNvZGU6IHBob25lVmFsaWRhdGlvbi5jb2RlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kRmlyc3Qoe1xyXG4gICAgICB3aGVyZToge1xyXG4gICAgICAgIE9SOiBbXHJcbiAgICAgICAgICAuLi4oZW1haWwgPyBbeyBlbWFpbCB9XSA6IFtdKSxcclxuICAgICAgICAgIC4uLihwaG9uZVZhbGlkYXRpb24/LmlzVmFsaWQgPyBbeyBwaG9uZTogcGhvbmVWYWxpZGF0aW9uLm5vcm1hbGl6ZWRQaG9uZSB9XSA6IFtdKVxyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnVXNlciBhbHJlYWR5IGV4aXN0cycsXHJcbiAgICAgICAgbWVzc2FnZTogJ0FuIGFjY291bnQgd2l0aCB0aGlzIGVtYWlsIG9yIHBob25lIG51bWJlciBhbHJlYWR5IGV4aXN0cycsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4KaP4KaHIOCmh+CmruCnh+CmsiDgpqzgpr4g4Kar4KeL4KaoIOCmqOCmruCnjeCmrOCmsCDgpqbgpr/gpq/gprzgp4cg4KaP4KaV4Ka+4KaJ4Kao4KeN4KafIOCmrOCmv+CmpuCnjeCmr+CmruCmvuCmqCDgprDgpq/gprzgp4fgppvgp4cnLFxyXG4gICAgICAgIGZpZWxkOiBleGlzdGluZ1VzZXIuZW1haWwgPT09IGVtYWlsID8gJ2VtYWlsJyA6ICdwaG9uZSdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGFzaCBwYXNzd29yZCB1c2luZyBwYXNzd29yZCBzZXJ2aWNlXHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IHBhc3N3b3JkU2VydmljZS5oYXNoUGFzc3dvcmQocGFzc3dvcmQpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB1c2VyIHdpdGggUEVORElORyBzdGF0dXNcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgICAgIGZpcnN0TmFtZTogZmluYWxGaXJzdE5hbWUsXHJcbiAgICAgICAgbGFzdE5hbWU6IGZpbmFsTGFzdE5hbWUsXHJcbiAgICAgICAgcGhvbmU6IHBob25lVmFsaWRhdGlvbj8ubm9ybWFsaXplZFBob25lIHx8IGZpbmFsUGhvbmUsXHJcbiAgICAgICAgcm9sZTogJ0NVU1RPTUVSJyxcclxuICAgICAgICBzdGF0dXM6ICdQRU5ESU5HJ1xyXG4gICAgICB9LFxyXG4gICAgICBzZWxlY3Q6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICBmaXJzdE5hbWU6IHRydWUsXHJcbiAgICAgICAgbGFzdE5hbWU6IHRydWUsXHJcbiAgICAgICAgcGhvbmU6IHRydWUsXHJcbiAgICAgICAgcm9sZTogdHJ1ZSxcclxuICAgICAgICBzdGF0dXM6IHRydWUsXHJcbiAgICAgICAgY3JlYXRlZEF0OiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNhdmUgcGFzc3dvcmQgdG8gaGlzdG9yeVxyXG4gICAgYXdhaXQgcGFzc3dvcmRTZXJ2aWNlLnNhdmVQYXNzd29yZFRvSGlzdG9yeSh1c2VyLmlkLCBoYXNoZWRQYXNzd29yZCk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGVzdGluZyBtb2RlIGlzIGVuYWJsZWRcclxuICAgIGNvbnN0IGlzVGVzdGluZ01vZGUgPSBjb25maWdTZXJ2aWNlLmlzVGVzdGluZ01vZGUoKTtcclxuICAgIGNvbnN0IGlzRW1haWxWZXJpZmljYXRpb25EaXNhYmxlZCA9IGNvbmZpZ1NlcnZpY2UuaXNFbWFpbFZlcmlmaWNhdGlvbkRpc2FibGVkKCk7XHJcbiAgICBjb25zdCBpc1Bob25lVmVyaWZpY2F0aW9uRGlzYWJsZWQgPSBjb25maWdTZXJ2aWNlLmlzUGhvbmVWZXJpZmljYXRpb25EaXNhYmxlZCgpO1xyXG5cclxuICAgIC8vIEhhbmRsZSB2ZXJpZmljYXRpb24gYmFzZWQgb24gd2hhdCdzIHByb3ZpZGVkIGFuZCB0ZXN0aW5nIG1vZGVcclxuICAgIGlmIChlbWFpbCAmJiAhaXNFbWFpbFZlcmlmaWNhdGlvbkRpc2FibGVkKSB7XHJcbiAgICAgIC8vIEVtYWlsIHZlcmlmaWNhdGlvbiBmbG93XHJcbiAgICAgIGNvbnN0IHZlcmlmaWNhdGlvblRva2VuID0gZW1haWxTZXJ2aWNlLmdlbmVyYXRlVmVyaWZpY2F0aW9uVG9rZW4oKTtcclxuICAgICAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDI0ICogNjAgKiA2MCAqIDEwMDApOyAvLyAyNCBob3Vyc1xyXG5cclxuICAgICAgLy8gU2F2ZSB2ZXJpZmljYXRpb24gdG9rZW4gdG8gZGF0YWJhc2VcclxuICAgICAgYXdhaXQgcHJpc21hLmVtYWlsVmVyaWZpY2F0aW9uVG9rZW4uY3JlYXRlKHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICB0b2tlbjogdmVyaWZpY2F0aW9uVG9rZW4sXHJcbiAgICAgICAgICBleHBpcmVzQXRcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU2VuZCB2ZXJpZmljYXRpb24gZW1haWxcclxuICAgICAgY29uc3QgZW1haWxSZXN1bHQgPSBhd2FpdCBlbWFpbFNlcnZpY2Uuc2VuZFZlcmlmaWNhdGlvbkVtYWlsKFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gLFxyXG4gICAgICAgIHZlcmlmaWNhdGlvblRva2VuXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoIWVtYWlsUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAvLyBJZiBlbWFpbCBmYWlscywgZGVsZXRlIHVzZXIgYW5kIHRva2VuIGZvciBjbGVhbnVwXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLmVtYWlsVmVyaWZpY2F0aW9uVG9rZW4uZGVsZXRlKHtcclxuICAgICAgICAgIHdoZXJlOiB7IHVzZXJJZDogdXNlci5pZCB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnVzZXIuZGVsZXRlKHtcclxuICAgICAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLmlkIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgIGVycm9yOiAnUmVnaXN0cmF0aW9uIGZhaWxlZCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHNlbmQgdmVyaWZpY2F0aW9uIGVtYWlsLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXHJcbiAgICAgICAgICBtZXNzYWdlQm46ICfgpq/gpr7gpprgpr7gpocg4KaH4Kau4KeH4KayIOCmquCmvuCmoOCmvuCmqOCniyDgpqzgp43gpq/gprDgp43gpqUg4Ka54Kav4Ka84KeH4Kab4KeH4KWkIOCmheCmqOCngeCml+CnjeCmsOCmuSDgpprgp4fgprfgp43gpp/gpr4g4KaV4Kaw4KeB4Kao4KWkJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogJ1JlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsLiBQbGVhc2UgY2hlY2sgeW91ciBlbWFpbCB0byB2ZXJpZnkgeW91ciBhY2NvdW50LicsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4Kao4Ka/4Kas4Kao4KeN4Kan4KaoIOCmuOCmq+CmsuClpCDgpobgpqrgpqjgpr7gprAg4KaF4KeN4Kav4Ka+4KaV4Ka+4KaJ4Kao4KeN4KafIOCmr+CmvuCmmuCmvuCmhyDgppXgprDgpr7gprAg4Kac4Kao4KeN4KavIOCmh+CmruCnh+CmsiDgpprgp4fgppUg4KaV4Kaw4KeB4Kao4KWkJyxcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICBpZDogdXNlci5pZCxcclxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgICAgICAgc3RhdHVzOiB1c2VyLnN0YXR1c1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVxdWlyZXNFbWFpbFZlcmlmaWNhdGlvbjogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHBob25lVmFsaWRhdGlvbj8uaXNWYWxpZCAmJiAhaXNQaG9uZVZlcmlmaWNhdGlvbkRpc2FibGVkKSB7XHJcbiAgICAgIC8vIFBob25lIHZlcmlmaWNhdGlvbiBmbG93XHJcbiAgICAgIGNvbnN0IG90cFJlc3VsdCA9IGF3YWl0IG90cFNlcnZpY2UuZ2VuZXJhdGVQaG9uZU9UUChwaG9uZVZhbGlkYXRpb24ubm9ybWFsaXplZFBob25lLCB1c2VyLmlkKTtcclxuXHJcbiAgICAgIGlmICghb3RwUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAvLyBJZiBPVFAgZmFpbHMsIGRlbGV0ZSB1c2VyIGZvciBjbGVhbnVwXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnVzZXIuZGVsZXRlKHtcclxuICAgICAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLmlkIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgIGVycm9yOiAnUmVnaXN0cmF0aW9uIGZhaWxlZCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiBvdHBSZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byBzZW5kIE9UUC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxyXG4gICAgICAgICAgbWVzc2FnZUJuOiBvdHBSZXN1bHQuZXJyb3JCbiB8fCAnT1RQIOCmquCmvuCmoOCmvuCmqOCniyDgpqzgp43gpq/gprDgp43gpqUg4Ka54Kav4Ka84KeH4Kab4KeH4KWkIOCmheCmqOCngeCml+CnjeCmsOCmuSDgpprgp4fgprfgp43gpp/gpr4g4KaV4Kaw4KeB4Kao4KWkJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogJ1JlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsLiBQbGVhc2UgY2hlY2sgeW91ciBwaG9uZSBmb3IgT1RQIHZlcmlmaWNhdGlvbi4nLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmqOCmv+CmrOCmqOCnjeCmp+CmqCDgprjgpqvgprLgpaQg4KaG4Kaq4Kao4Ka+4KawIOCmq+Cni+CmqOCnhyBPVFAg4Kav4Ka+4Kaa4Ka+4KaHIOCmleCmsOCmvuCmsCDgppzgpqjgp43gpq8g4Kaa4KeH4KaVIOCmleCmsOCngeCmqOClpCcsXHJcbiAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICBwaG9uZTogdXNlci5waG9uZSxcclxuICAgICAgICAgIGZpcnN0TmFtZTogdXNlci5maXJzdE5hbWUsXHJcbiAgICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0TmFtZSxcclxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcclxuICAgICAgICAgIHN0YXR1czogdXNlci5zdGF0dXNcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcXVpcmVzUGhvbmVWZXJpZmljYXRpb246IHRydWUsXHJcbiAgICAgICAgcGhvbmU6IHBob25lVmFsaWRhdGlvbi5ub3JtYWxpemVkUGhvbmUsXHJcbiAgICAgICAgb3BlcmF0b3I6IHBob25lVmFsaWRhdGlvbi5vcGVyYXRvcixcclxuICAgICAgICBvcGVyYXRvckRldGFpbHM6IHBob25lVmFsaWRhdGlvbi5vcGVyYXRvckRldGFpbHNcclxuICAgICAgfSk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gU2tpcCB2ZXJpZmljYXRpb24gLSBhY3RpdmF0ZSBhY2NvdW50IGltbWVkaWF0ZWx5ICh0ZXN0aW5nIG1vZGUgb3IgdmVyaWZpY2F0aW9uIGRpc2FibGVkKVxyXG4gICAgICBjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXIuaWQgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxyXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogZW1haWwgPyBuZXcgRGF0ZSgpIDogbnVsbCxcclxuICAgICAgICAgIHBob25lVmVyaWZpZWQ6IHBob25lVmFsaWRhdGlvbj8uaXNWYWxpZCA/IG5ldyBEYXRlKCkgOiBudWxsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXHJcbiAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcclxuICAgICAgICAgIHBob25lOiB0cnVlLFxyXG4gICAgICAgICAgcm9sZTogdHJ1ZSxcclxuICAgICAgICAgIHN0YXR1czogdHJ1ZSxcclxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXHJcbiAgICAgICAgICBwaG9uZVZlcmlmaWVkOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBpc1Rlc3RpbmdNb2RlXHJcbiAgICAgICAgICA/ICdSZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCBpbiB0ZXN0aW5nIG1vZGUuIEFjY291bnQgaXMgYXV0b21hdGljYWxseSBhY3RpdmF0ZWQuJ1xyXG4gICAgICAgICAgOiAnUmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwuIEFjY291bnQgaXMgYWN0aXZhdGVkIHdpdGhvdXQgdmVyaWZpY2F0aW9uLicsXHJcbiAgICAgICAgbWVzc2FnZUJuOiBpc1Rlc3RpbmdNb2RlXHJcbiAgICAgICAgICA/ICfgpp/gp4fgprjgp43gpp/gpr/gpoIg4Kau4KeL4Kah4KeHIOCmqOCmv+CmrOCmqOCnjeCmp+CmqCDgprjgpqvgprLgpaQg4KaF4KeN4Kav4Ka+4KaV4Ka+4KaJ4Kao4KeN4KafIOCmuOCnjeCmrOCmr+CmvOCmguCmleCnjeCmsOCmv+Cmr+CmvCDgprjgppXgp43gprDgpr/gpq/gprwg4KaV4Kaw4Ka+IOCmueCmr+CmvOCnh+Cmm+Cnh+ClpCdcclxuICAgICAgICAgIDogJ+CmqOCmv+CmrOCmqOCnjeCmp+CmqCDgprjgpqvgprLgpaQg4Kav4Ka+4Kaa4Ka+4KaHIOCmm+CmvuCmoeCmvOCmviDgpoXgp43gpq/gpr7gppXgpr7gpongpqjgp43gpp8g4Ka44KaV4KeN4Kaw4Ka/4Kav4Ka8IOCmleCmsOCmviDgprngpq/gprzgp4fgppvgp4fgpaQnLFxyXG4gICAgICAgIHVzZXI6IHVwZGF0ZWRVc2VyLFxyXG4gICAgICAgIHRlc3RpbmdNb2RlOiBpc1Rlc3RpbmdNb2RlLFxyXG4gICAgICAgIHZlcmlmaWNhdGlvblNraXBwZWQ6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdSZWdpc3RyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ1JlZ2lzdHJhdGlvbiBmYWlsZWQnLFxyXG4gICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgbWVzc2FnZUJuOiAn4Kao4Ka/4Kas4Kao4KeN4Kan4KaoIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gTG9naW4gZW5kcG9pbnRcclxucm91dGVyLnBvc3QoJy9sb2dpbicsIFtcclxuICBib2R5KCdpZGVudGlmaWVyJykubm90RW1wdHkoKS50cmltKCksXHJcbiAgYm9keSgncGFzc3dvcmQnKS5ub3RFbXB0eSgpLnRyaW0oKSxcclxuICBib2R5KCdyZW1lbWJlck1lJykub3B0aW9uYWwoKS5pc0Jvb2xlYW4oKSxcclxuICBib2R5KCdjYXB0Y2hhJykub3B0aW9uYWwoKS5pc1N0cmluZygpLFxyXG4gIGJvZHkoJ2RldmljZUZpbmdlcnByaW50Jykub3B0aW9uYWwoKS5pc1N0cmluZygpXHJcbl0sIGhhbmRsZVZhbGlkYXRpb25FcnJvcnMsXHJcbiAgbG9naW5TZWN1cml0eU1pZGRsZXdhcmUuZW5mb3JjZSgpLFxyXG4gIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgaWRlbnRpZmllciwgcGFzc3dvcmQsIHJlbWVtYmVyTWUsIGNhcHRjaGEsIGRldmljZUZpbmdlcnByaW50IH0gPSByZXEuYm9keTtcclxuXHJcbiAgdHJ5IHtcclxuXHJcbiAgICAvLyBEZXRlcm1pbmUgaWYgaWRlbnRpZmllciBpcyBlbWFpbCBvciBwaG9uZVxyXG4gICAgY29uc3QgaXNFbWFpbCA9IGlkZW50aWZpZXIuaW5jbHVkZXMoJ0AnKTtcclxuICAgIGxldCB1c2VyO1xyXG4gICAgbGV0IGxvZ2luVHlwZTtcclxuXHJcbiAgICBpZiAoaXNFbWFpbCkge1xyXG4gICAgICAvLyBWYWxpZGF0ZSBlbWFpbCBmb3JtYXRcclxuICAgICAgaWYgKCFlbWFpbFNlcnZpY2UudmFsaWRhdGVFbWFpbChpZGVudGlmaWVyKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgZW1haWwgZm9ybWF0JyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnLFxyXG4gICAgICAgICAgbWVzc2FnZUJuOiAn4KaF4Kao4KeB4KaX4KeN4Kaw4Ka5IOCmh+CmruCnh+CmsiDgpqDgpr/gppXgpr7gpqjgpr4g4Kam4Ka/4KaoJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBGaW5kIHVzZXIgYnkgZW1haWxcclxuICAgICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGVtYWlsOiBpZGVudGlmaWVyIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGxvZ2luVHlwZSA9ICdlbWFpbCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBWYWxpZGF0ZSBwaG9uZSBudW1iZXJcclxuICAgICAgY29uc3QgcGhvbmVWYWxpZGF0aW9uID0gcGhvbmVWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZUZvclVzZUNhc2UoaWRlbnRpZmllciwgJ2xvZ2luJyk7XHJcbiAgICAgIGlmICghcGhvbmVWYWxpZGF0aW9uLmlzVmFsaWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHBob25lIGZvcm1hdCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiBwaG9uZVZhbGlkYXRpb24uZXJyb3IsXHJcbiAgICAgICAgICBtZXNzYWdlQm46IHBob25lVmFsaWRhdGlvbi5lcnJvckJuLFxyXG4gICAgICAgICAgY29kZTogcGhvbmVWYWxpZGF0aW9uLmNvZGVcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRmluZCB1c2VyIGJ5IHBob25lXHJcbiAgICAgIHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBwaG9uZTogcGhvbmVWYWxpZGF0aW9uLm5vcm1hbGl6ZWRQaG9uZSB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2dpblR5cGUgPSAncGhvbmUnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdXNlciB8fCAhdXNlci5wYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBjcmVkZW50aWFscycsXHJcbiAgICAgICAgbWVzc2FnZTogYEludmFsaWQgJHtsb2dpblR5cGV9IG9yIHBhc3N3b3JkYCxcclxuICAgICAgICBtZXNzYWdlQm46IGxvZ2luVHlwZSA9PT0gJ2VtYWlsJyA/ICfgpoXgpqzgp4jgpqcg4KaH4Kau4KeH4KayIOCmrOCmviDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEnIDogJ+CmheCmrOCniOCmpyDgpqvgp4vgpqgg4Kas4Ka+IOCmquCmvuCmuOCmk+Cmr+CmvOCmvuCmsOCnjeCmoSdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmVyaWZ5IHBhc3N3b3JkXHJcbiAgICBjb25zdCBpc1ZhbGlkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XHJcbiAgICBpZiAoIWlzVmFsaWRQYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCBjcmVkZW50aWFscycsXHJcbiAgICAgICAgbWVzc2FnZTogYEludmFsaWQgJHtsb2dpblR5cGV9IG9yIHBhc3N3b3JkYCxcclxuICAgICAgICBtZXNzYWdlQm46IGxvZ2luVHlwZSA9PT0gJ2VtYWlsJyA/ICfgpoXgpqzgp4jgpqcg4KaH4Kau4KeH4KayIOCmrOCmviDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEnIDogJ+CmheCmrOCniOCmpyDgpqvgp4vgpqgg4Kas4Ka+IOCmquCmvuCmuOCmk+Cmr+CmvOCmvuCmsOCnjeCmoSdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBpcyB2ZXJpZmllZCAoc2tpcCBpZiB0ZXN0aW5nIG1vZGUgb3IgdmVyaWZpY2F0aW9uIGRpc2FibGVkKVxyXG4gICAgY29uc3QgaXNUZXN0aW5nTW9kZSA9IGNvbmZpZ1NlcnZpY2UuaXNUZXN0aW5nTW9kZSgpO1xyXG4gICAgY29uc3QgaXNFbWFpbFZlcmlmaWNhdGlvbkRpc2FibGVkID0gY29uZmlnU2VydmljZS5pc0VtYWlsVmVyaWZpY2F0aW9uRGlzYWJsZWQoKTtcclxuICAgIGNvbnN0IGlzUGhvbmVWZXJpZmljYXRpb25EaXNhYmxlZCA9IGNvbmZpZ1NlcnZpY2UuaXNQaG9uZVZlcmlmaWNhdGlvbkRpc2FibGVkKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHJlcXVpcmVzVmVyaWZpY2F0aW9uID1cclxuICAgICAgKGxvZ2luVHlwZSA9PT0gJ2VtYWlsJyAmJiAhaXNFbWFpbFZlcmlmaWNhdGlvbkRpc2FibGVkKSB8fFxyXG4gICAgICAobG9naW5UeXBlID09PSAncGhvbmUnICYmICFpc1Bob25lVmVyaWZpY2F0aW9uRGlzYWJsZWQpO1xyXG4gICAgXHJcbiAgICBpZiAodXNlci5zdGF0dXMgPT09ICdQRU5ESU5HJyAmJiByZXF1aXJlc1ZlcmlmaWNhdGlvbiAmJiAhaXNUZXN0aW5nTW9kZSkge1xyXG4gICAgICBjb25zdCB2ZXJpZmljYXRpb25NZXNzYWdlID0gbG9naW5UeXBlID09PSAnZW1haWwnXHJcbiAgICAgICAgPyAnUGxlYXNlIHZlcmlmeSB5b3VyIGVtYWlsIGFkZHJlc3MgYmVmb3JlIGxvZ2dpbmcgaW4nXHJcbiAgICAgICAgOiAnUGxlYXNlIHZlcmlmeSB5b3VyIHBob25lIG51bWJlciBiZWZvcmUgbG9nZ2luZyBpbic7XHJcbiAgICAgIGNvbnN0IHZlcmlmaWNhdGlvbk1lc3NhZ2VCbiA9IGxvZ2luVHlwZSA9PT0gJ2VtYWlsJ1xyXG4gICAgICAgID8gJ+CmsuCml+Cmv+CmqCDgppXgprDgpr7gprAg4KaG4KaX4KeHIOCmh+CmruCnh+CmsiDgpq/gpr7gpprgpr7gpocg4KaV4Kaw4KeB4KaoJ1xyXG4gICAgICAgIDogJ+CmsuCml+Cmv+CmqCDgppXgprDgpr7gprAg4KaG4KaX4KeHIOCmq+Cni+CmqCDgpqjgpq7gp43gpqzgprAg4Kav4Ka+4Kaa4Ka+4KaHIOCmleCmsOCngeCmqCc7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnQWNjb3VudCBub3QgdmVyaWZpZWQnLFxyXG4gICAgICAgIG1lc3NhZ2U6IHZlcmlmaWNhdGlvbk1lc3NhZ2UsXHJcbiAgICAgICAgbWVzc2FnZUJuOiB2ZXJpZmljYXRpb25NZXNzYWdlQm4sXHJcbiAgICAgICAgcmVxdWlyZXNWZXJpZmljYXRpb246IHRydWUsXHJcbiAgICAgICAgdmVyaWZpY2F0aW9uVHlwZTogbG9naW5UeXBlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBdXRvLWFjdGl2YXRlIHBlbmRpbmcgdXNlcnMgaW4gdGVzdGluZyBtb2RlIG9yIHdoZW4gdmVyaWZpY2F0aW9uIGlzIGRpc2FibGVkXHJcbiAgICBpZiAodXNlci5zdGF0dXMgPT09ICdQRU5ESU5HJyAmJiAoaXNUZXN0aW5nTW9kZSB8fCAhcmVxdWlyZXNWZXJpZmljYXRpb24pKSB7XHJcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXIuaWQgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxyXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogbG9naW5UeXBlID09PSAnZW1haWwnID8gbmV3IERhdGUoKSA6IHVzZXIuZW1haWxWZXJpZmllZCxcclxuICAgICAgICAgIHBob25lVmVyaWZpZWQ6IGxvZ2luVHlwZSA9PT0gJ3Bob25lJyA/IG5ldyBEYXRlKCkgOiB1c2VyLnBob25lVmVyaWZpZWRcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gUmVmcmVzaCB1c2VyIGRhdGEgYWZ0ZXIgdXBkYXRlXHJcbiAgICAgIHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBpZDogdXNlci5pZCB9LFxyXG4gICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICAgIHBob25lOiB0cnVlLFxyXG4gICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgICAgbGFzdE5hbWU6IHRydWUsXHJcbiAgICAgICAgICByb2xlOiB0cnVlLFxyXG4gICAgICAgICAgc3RhdHVzOiB0cnVlLFxyXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogdHJ1ZSxcclxuICAgICAgICAgIHBob25lVmVyaWZpZWQ6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBsYXN0IGxvZ2luXHJcbiAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogdXNlci5pZCB9LFxyXG4gICAgICBkYXRhOiB7IGxhc3RMb2dpbkF0OiBuZXcgRGF0ZSgpIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENyZWF0ZSBzZWN1cmUgc2Vzc2lvbiBpbnN0ZWFkIG9mIEpXVCB0b2tlblxyXG4gICAgY29uc3Qgc2Vzc2lvblJlc3VsdCA9IGF3YWl0IHNlc3Npb25TZXJ2aWNlLmNyZWF0ZVNlc3Npb24odXNlci5pZCwgcmVxLCB7XHJcbiAgICAgIGxvZ2luVHlwZSxcclxuICAgICAgcmVtZW1iZXJNZTogcmVtZW1iZXJNZSB8fCBmYWxzZSxcclxuICAgICAgbWF4QWdlOiByZW1lbWJlck1lID8gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAgOiAyNCAqIDYwICogNjAgKiAxMDAwIC8vIDcgZGF5cyBpZiByZW1lbWJlciBtZSwgMjQgaG91cnMgZGVmYXVsdFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFzZXNzaW9uUmVzdWx0LnNlc3Npb25JZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnTG9naW4gZmFpbGVkJyxcclxuICAgICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIGNyZWF0ZSBzZXNzaW9uJyxcclxuICAgICAgICBtZXNzYWdlQm46ICfgprLgppfgpr/gpqgg4Kas4KeN4Kav4Kaw4KeN4KalIOCmueCmr+CmvOCnh+Cmm+CnhydcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHNlc3Npb24gY29va2llIHdpdGggcmVtZW1iZXIgbWUgb3B0aW9uc1xyXG4gICAgc2Vzc2lvbk1pZGRsZXdhcmUuc2V0U2Vzc2lvbkNvb2tpZShyZXMsIHNlc3Npb25SZXN1bHQuc2Vzc2lvbklkLCB7XHJcbiAgICAgIG1heEFnZTogc2Vzc2lvblJlc3VsdC5tYXhBZ2UsXHJcbiAgICAgIHJlbWVtYmVyTWU6IHJlbWVtYmVyTWUgfHwgZmFsc2VcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFkZCBzZXNzaW9uIGhlYWRlcnNcclxuICAgIGNvbnN0IHNlc3Npb25IZWFkZXJzID0gc2Vzc2lvbk1pZGRsZXdhcmUuc2Vzc2lvbkhlYWRlcnMoc2Vzc2lvblJlc3VsdCk7XHJcbiAgICBPYmplY3Qua2V5cyhzZXNzaW9uSGVhZGVycykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICByZXMuc2V0KGtleSwgc2Vzc2lvbkhlYWRlcnNba2V5XSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBKV1QgdG9rZW4gZm9yIEFQSSBjb21wYXRpYmlsaXR5IChzaG9ydGVyIGV4cGlyeSlcclxuICAgIGNvbnN0IGp3dFNlY3JldExvZ2luID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVDtcclxuICAgIGlmICghand0U2VjcmV0TG9naW4pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oXHJcbiAgICAgIHtcclxuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgcGhvbmU6IHVzZXIucGhvbmUsXHJcbiAgICAgICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgICAgIHNlc3Npb25JZDogc2Vzc2lvblJlc3VsdC5zZXNzaW9uSWRcclxuICAgICAgfSxcclxuICAgICAgand0U2VjcmV0TG9naW4sXHJcbiAgICAgIHsgZXhwaXJlc0luOiBwcm9jZXNzLmVudi5KV1RfRVhQSVJFU19JTiB8fCAnMTVtJyB9IC8vIFNob3J0ZXIgZXhwaXJ5IGZvciBKV1QsIHNlc3Npb24gbWFuYWdlcyBsb25nLXRlcm0gYXV0aFxyXG4gICAgKTtcclxuXHJcblxyXG4gICAgLy8gUmVjb3JkIHN1Y2Nlc3NmdWwgbG9naW4gYW5kIGNsZWFyIGZhaWxlZCBhdHRlbXB0c1xyXG4gICAgcmV0dXJuIGxvZ2luU2VjdXJpdHlNaWRkbGV3YXJlLnJlY29yZFN1Y2Nlc3NmdWxMb2dpbihyZXEsIHsgaWQ6IHVzZXIuaWQgfSwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgIHJlcy5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiAnTG9naW4gc3VjY2Vzc2Z1bCcsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4Kay4KaX4Ka/4KaoIOCmuOCmq+CmsicsXHJcbiAgICAgICAgdXNlcjoge1xyXG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgIHBob25lOiB1c2VyLnBob25lLFxyXG4gICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxyXG4gICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgICAgICAgc3RhdHVzOiB1c2VyLnN0YXR1c1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG9rZW4sIC8vIEZvciBBUEkgY29tcGF0aWJpbGl0eVxyXG4gICAgICAgIHNlc3Npb25JZDogc2Vzc2lvblJlc3VsdC5zZXNzaW9uSWQsXHJcbiAgICAgICAgZXhwaXJlc0F0OiBzZXNzaW9uUmVzdWx0LmV4cGlyZXNBdCxcclxuICAgICAgICBtYXhBZ2U6IHNlc3Npb25SZXN1bHQubWF4QWdlLFxyXG4gICAgICAgIGxvZ2luVHlwZSxcclxuICAgICAgICByZW1lbWJlck1lOiByZW1lbWJlck1lIHx8IGZhbHNlLFxyXG4gICAgICAgIHNlY3VyaXR5Q29udGV4dDogcmVxLnNlY3VyaXR5Q29udGV4dFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignTG9naW4gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgY29uc29sZS5lcnJvcignTG9naW4gZXJyb3IgZGV0YWlsczonLCB7XHJcbiAgICAgIG5hbWU6IGVycm9yLm5hbWUsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIHN0YWNrOiBlcnJvci5zdGFja1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIFJlY29yZCBmYWlsZWQgYXR0ZW1wdCBkdWUgdG8gc3lzdGVtIGVycm9yXHJcbiAgICByZXEuYXV0aEVycm9yID0gJ3N5c3RlbV9lcnJvcic7XHJcbiAgICByZXR1cm4gbG9naW5TZWN1cml0eU1pZGRsZXdhcmUucmVjb3JkRmFpbGVkTG9naW4oKShyZXEsIHJlcywgKCkgPT4ge1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdMb2dpbiBmYWlsZWQnLFxyXG4gICAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmsuCml+Cmv+CmqCDgpqzgp43gpq/gprDgp43gpqUg4Ka54Kav4Ka84KeH4Kab4KeHJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBCYXNpYyBjYXB0Y2hhIHZhbGlkYXRpb24gZnVuY3Rpb24gKGludGVncmF0ZSB3aXRoIGFjdHVhbCBjYXB0Y2hhIHNlcnZpY2UpXHJcbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlQ2FwdGNoYShjYXB0Y2hhLCBpcCkge1xyXG4gIC8vIFRoaXMgaXMgYSBwbGFjZWhvbGRlciAtIGludGVncmF0ZSB3aXRoIHJlQ0FQVENIQSwgaENhcHRjaGEsIG9yIHNpbWlsYXJcclxuICAvLyBGb3Igbm93LCB3ZSdsbCBhY2NlcHQgYW55IGNhcHRjaGEgaWYgc2VjdXJpdHkgZG9lc24ndCByZXF1aXJlIGl0XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8vIExvZ291dCBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL2xvZ291dCcsIFtcclxuICBib2R5KCdhbGxEZXZpY2VzJykub3B0aW9uYWwoKS5pc0Jvb2xlYW4oKVxyXG5dLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBhbGxEZXZpY2VzIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHNlc3Npb25JZCA9IHNlc3Npb25NaWRkbGV3YXJlLmdldFNlc3Npb25JZChyZXEpO1xyXG5cclxuICAgIGlmICghc2Vzc2lvbklkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdObyBzZXNzaW9uIGZvdW5kJyxcclxuICAgICAgICBtZXNzYWdlOiAnTm8gYWN0aXZlIHNlc3Npb24gdG8gbG9nb3V0JyxcclxuICAgICAgICBtZXNzYWdlQm46ICfgprLgppfgpobgpongpp8g4KaV4Kaw4Ka+4KawIOCmnOCmqOCnjeCmryDgppXgp4vgpqjgp4sg4Ka44KeH4Ka24KaoIOCmquCmvuCmk+Cmr+CmvOCmviDgpq/gpr7gpq/gprzgpqjgpr8nXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIHNlc3Npb24gdG8gZ2V0IHVzZXIgSURcclxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBzZXNzaW9uU2VydmljZS52YWxpZGF0ZVNlc3Npb24oc2Vzc2lvbklkLCByZXEpO1xyXG4gICAgXHJcbiAgICBpZiAoIXZhbGlkYXRpb24udmFsaWQpIHtcclxuICAgICAgLy8gQ2xlYXIgc2Vzc2lvbiBjb29raWUgYW55d2F5XHJcbiAgICAgIHNlc3Npb25NaWRkbGV3YXJlLmNsZWFyU2Vzc2lvbkNvb2tpZShyZXMpO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiAnTG9nb3V0IHN1Y2Nlc3NmdWwnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmsuCml+CmhuCmieCmnyDgprjgpqvgprInLFxyXG4gICAgICAgIHNlc3Npb25FeHBpcmVkOiB0cnVlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHQ7XHJcbiAgICBpZiAoYWxsRGV2aWNlcykge1xyXG4gICAgICAvLyBEZXN0cm95IGFsbCBzZXNzaW9ucyBmb3IgdGhpcyB1c2VyXHJcbiAgICAgIHJlc3VsdCA9IGF3YWl0IHNlc3Npb25TZXJ2aWNlLmRlc3Ryb3lBbGxVc2VyU2Vzc2lvbnModmFsaWRhdGlvbi51c2VySWQsIHNlc3Npb25JZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBEZXN0cm95IGN1cnJlbnQgc2Vzc2lvbiBvbmx5XHJcbiAgICAgIHJlc3VsdCA9IGF3YWl0IHNlc3Npb25TZXJ2aWNlLmRlc3Ryb3lTZXNzaW9uKHNlc3Npb25JZCwgJ3VzZXJfbG9nb3V0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnTG9nb3V0IGZhaWxlZCcsXHJcbiAgICAgICAgbWVzc2FnZTogcmVzdWx0LnJlYXNvbixcclxuICAgICAgICBtZXNzYWdlQm46ICfgprLgppfgpobgpongpp8g4Kas4KeN4Kav4Kaw4KeN4KalIOCmueCmr+CmvOCnh+Cmm+CnhydcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xlYXIgc2Vzc2lvbiBjb29raWVcclxuICAgIHNlc3Npb25NaWRkbGV3YXJlLmNsZWFyU2Vzc2lvbkNvb2tpZShyZXMpO1xyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ0xvZ291dCBzdWNjZXNzZnVsJyxcclxuICAgICAgbWVzc2FnZUJuOiAn4Kay4KaX4KaG4KaJ4KafIOCmuOCmq+CmsicsXHJcbiAgICAgIGFsbERldmljZXM6IGFsbERldmljZXMgfHwgZmFsc2UsXHJcbiAgICAgIGRlc3Ryb3llZENvdW50OiBhbGxEZXZpY2VzID8gcmVzdWx0LmRlc3Ryb3llZENvdW50IDogMVxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdMb2dvdXQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ0xvZ291dCBmYWlsZWQnLFxyXG4gICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgbWVzc2FnZUJuOiAn4Kay4KaX4KaG4KaJ4KafIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gUmVmcmVzaCB0b2tlbiBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL3JlZnJlc2gnLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB0b2tlbiB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnVG9rZW4gcmVxdWlyZWQnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+Cmn+Cni+CmleCnh+CmqCDgpqrgp43gprDgpq/gprzgp4vgppzgpqgnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZlcmlmeSB0b2tlblxyXG4gICAgY29uc3Qgand0U2VjcmV0UmVmcmVzaCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7XHJcbiAgICBpZiAoIWp3dFNlY3JldFJlZnJlc2gpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBqd3RTZWNyZXRSZWZyZXNoKTtcclxuICAgIFxyXG4gICAgLy8gR2V0IHVzZXIgaW5mb1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC51c2VySWQgfSxcclxuICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgIGxhc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgIHJvbGU6IHRydWUsXHJcbiAgICAgICAgc3RhdHVzOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnVXNlciBub3QgZm91bmQnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmrOCnjeCmr+CmrOCmueCmvuCmsOCnjeCmn+CmvuCmsCDgpqrgpr7gppPgpq/gprzgpr4g4Kav4Ka+4Kav4Ka84Kao4Ka/J1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBuZXcgdG9rZW5cclxuICAgIGNvbnN0IGp3dFNlY3JldE5ldyA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7XHJcbiAgICBpZiAoIWp3dFNlY3JldE5ldykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pXVF9TRUNSRVQgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgcmVxdWlyZWQnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgbmV3VG9rZW4gPSBqd3Quc2lnbihcclxuICAgICAgeyB1c2VySWQ6IHVzZXIuaWQsIGVtYWlsOiB1c2VyLmVtYWlsLCByb2xlOiB1c2VyLnJvbGUgfSxcclxuICAgICAgand0U2VjcmV0TmV3LFxyXG4gICAgICB7IGV4cGlyZXNJbjogcHJvY2Vzcy5lbnYuSldUX0VYUElSRVNfSU4gfHwgJzdkJyB9XHJcbiAgICApO1xyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ1Rva2VuIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpp/gp4vgppXgp4fgpqgg4Ka44Kar4KayIOCmueCmr+CmvOCnh+Cmm+CnhycsXHJcbiAgICAgIHVzZXIsXHJcbiAgICAgIHRva2VuOiBuZXdUb2tlblxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdUb2tlbiByZWZyZXNoIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdJbnZhbGlkIHRva2VuJyxcclxuICAgICAgbWVzc2FnZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnJvci5tZXNzYWdlIDogJ1Rva2VuIGV4cGlyZWQgb3IgaW52YWxpZCcsXHJcbiAgICAgIG1lc3NhZ2VCbjogJ+Cmn+Cni+CmleCnh+CmqCDgpq7gp4fgpq/gprzgpr7gpqbgp4Dgpqrgp4LgprDgp43gpqMg4Kas4Ka+IOCmheCmrOCniOCmpydcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBFbWFpbCB2ZXJpZmljYXRpb24gZW5kcG9pbnRcclxucm91dGVyLnBvc3QoJy92ZXJpZnktZW1haWwnLCBbXHJcbiAgYm9keSgndG9rZW4nKS5ub3RFbXB0eSgpLnRyaW0oKVxyXG5dLCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB0b2tlbiB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnVG9rZW4gcmVxdWlyZWQnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdWZXJpZmljYXRpb24gdG9rZW4gaXMgcmVxdWlyZWQnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+Cmr+CmvuCmmuCmvuCmhyDgpp/gp4vgppXgp4fgpqgg4Kaq4KeN4Kaw4Kav4Ka84KeL4Kac4KaoJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaW5kIHZlcmlmaWNhdGlvbiB0b2tlblxyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uVG9rZW4gPSBhd2FpdCBwcmlzbWEuZW1haWxWZXJpZmljYXRpb25Ub2tlbi5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgdG9rZW4gfSxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIHVzZXI6IHRydWVcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF2ZXJpZmljYXRpb25Ub2tlbikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCB0b2tlbicsXHJcbiAgICAgICAgbWVzc2FnZTogJ1ZlcmlmaWNhdGlvbiB0b2tlbiBpcyBpbnZhbGlkIG9yIGhhcyBiZWVuIHVzZWQnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+Cmr+CmvuCmmuCmvuCmhyDgpp/gp4vgppXgp4fgpqgg4KaF4Kas4KeI4KanIOCmrOCmviDgpqzgp43gpq/gpqzgprngpr7gprAg4Ka54Kav4Ka84KeH4Kab4KeHJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiB0b2tlbiBoYXMgZXhwaXJlZFxyXG4gICAgaWYgKHZlcmlmaWNhdGlvblRva2VuLmV4cGlyZXNBdCA8IG5ldyBEYXRlKCkpIHtcclxuICAgICAgLy8gRGVsZXRlIGV4cGlyZWQgdG9rZW5cclxuICAgICAgYXdhaXQgcHJpc21hLmVtYWlsVmVyaWZpY2F0aW9uVG9rZW4uZGVsZXRlKHtcclxuICAgICAgICB3aGVyZTogeyBpZDogdmVyaWZpY2F0aW9uVG9rZW4uaWQgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdUb2tlbiBleHBpcmVkJyxcclxuICAgICAgICBtZXNzYWdlOiAnVmVyaWZpY2F0aW9uIHRva2VuIGhhcyBleHBpcmVkLiBQbGVhc2UgcmVxdWVzdCBhIG5ldyBvbmUuJyxcclxuICAgICAgICBtZXNzYWdlQm46ICfgpq/gpr7gpprgpr7gpocg4Kaf4KeL4KaV4KeH4KaoIOCmruCnh+Cmr+CmvOCmvuCmpuCngOCmquCnguCmsOCnjeCmoyDgprngpq/gprzgp4fgppvgp4fgpaQg4Kao4Kak4KeB4KaoIOCmj+CmleCmn+CmvyDgpoXgpqjgp4HgprDgp4vgpqcg4KaV4Kaw4KeB4Kao4KWkJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGlzIGFscmVhZHkgdmVyaWZpZWRcclxuICAgIGlmICh2ZXJpZmljYXRpb25Ub2tlbi51c2VyLmVtYWlsVmVyaWZpZWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ0FscmVhZHkgdmVyaWZpZWQnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdFbWFpbCBoYXMgYWxyZWFkeSBiZWVuIHZlcmlmaWVkJyxcclxuICAgICAgICBtZXNzYWdlQm46ICfgpofgpq7gp4fgprIg4KaG4KaX4KeH4KaHIOCmr+CmvuCmmuCmvuCmhyDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyBhbmQgZW1haWwgdmVyaWZpY2F0aW9uIHRpbWVzdGFtcFxyXG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogdmVyaWZpY2F0aW9uVG9rZW4udXNlcklkIH0sXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxyXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IG5ldyBEYXRlKClcclxuICAgICAgfSxcclxuICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgIGxhc3ROYW1lOiB0cnVlLFxyXG4gICAgICAgIHJvbGU6IHRydWUsXHJcbiAgICAgICAgc3RhdHVzOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWVcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRGVsZXRlIHZlcmlmaWNhdGlvbiB0b2tlblxyXG4gICAgYXdhaXQgcHJpc21hLmVtYWlsVmVyaWZpY2F0aW9uVG9rZW4uZGVsZXRlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHZlcmlmaWNhdGlvblRva2VuLmlkIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNlbmQgd2VsY29tZSBlbWFpbFxyXG4gICAgYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRXZWxjb21lRW1haWwoXHJcbiAgICAgIHZlcmlmaWNhdGlvblRva2VuLnVzZXIuZW1haWwsXHJcbiAgICAgIGAke3ZlcmlmaWNhdGlvblRva2VuLnVzZXIuZmlyc3ROYW1lfSAke3ZlcmlmaWNhdGlvblRva2VuLnVzZXIubGFzdE5hbWV9YFxyXG4gICAgKTtcclxuXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdFbWFpbCB2ZXJpZmllZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpofgpq7gp4fgprIg4Ka44Kar4KayIOCmr+CmvuCmmuCmvuCmhyDgprngpq/gprzgp4fgppvgp4cnLFxyXG4gICAgICB1c2VyOiB1cGRhdGVkVXNlclxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFbWFpbCB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ1ZlcmlmaWNhdGlvbiBmYWlsZWQnLFxyXG4gICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgbWVzc2FnZUJuOiAn4Kav4Ka+4Kaa4Ka+4KaHIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gUmVzZW5kIHZlcmlmaWNhdGlvbiBlbWFpbCBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL3Jlc2VuZC12ZXJpZmljYXRpb24nLCBbXHJcbiAgYm9keSgnZW1haWwnKS5pc0VtYWlsKCkubm9ybWFsaXplRW1haWwoKVxyXG5dLCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gRmluZCB1c2VyXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGVtYWlsIH0sXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICBlbWFpbFZlcmlmaWNhdGlvblRva2Vuczoge1xyXG4gICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgZXhwaXJlc0F0OiB7XHJcbiAgICAgICAgICAgICAgZ3Q6IG5ldyBEYXRlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ05vIGFjY291bnQgZm91bmQgd2l0aCB0aGlzIGVtYWlsIGFkZHJlc3MnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+Cmj+CmhyDgpofgpq7gp4fgprIg4Kag4Ka/4KaV4Ka+4Kao4Ka+IOCmleCni+CmqOCniyDgpqzgp43gpq/gpqzgprngpr7gprDgp43gpp/gpr7gprAg4Kaq4Ka+4KaT4Kav4Ka84Ka+IOCmr+CmvuCmr+CmvOCmqOCmvydcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgZW1haWwgaXMgYWxyZWFkeSB2ZXJpZmllZFxyXG4gICAgaWYgKHVzZXIuZW1haWxWZXJpZmllZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnQWxyZWFkeSB2ZXJpZmllZCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ0VtYWlsIGhhcyBhbHJlYWR5IGJlZW4gdmVyaWZpZWQnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+Cmh+CmruCnh+CmsiDgpobgppfgp4fgpocg4Kav4Ka+4Kaa4Ka+4KaHIOCmueCmr+CmvOCnh+Cmm+CnhydcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhbHJlYWR5IGEgcmVjZW50IHZlcmlmaWNhdGlvbiB0b2tlbiAod2l0aGluIDUgbWludXRlcylcclxuICAgIGNvbnN0IHJlY2VudFRva2VuID0gdXNlci5lbWFpbFZlcmlmaWNhdGlvblRva2Vuc1swXTtcclxuICAgIGlmIChyZWNlbnRUb2tlbiAmJiAoRGF0ZS5ub3coKSAtIHJlY2VudFRva2VuLmNyZWF0ZWRBdC5nZXRUaW1lKCkpIDwgNSAqIDYwICogMTAwMCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjkpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnVG9vIG1hbnkgcmVxdWVzdHMnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdQbGVhc2Ugd2FpdCBiZWZvcmUgcmVxdWVzdGluZyBhbm90aGVyIHZlcmlmaWNhdGlvbiBlbWFpbCcsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4KaF4Kao4KeN4KavIOCmr+CmvuCmmuCmvuCmhyDgpofgpq7gp4fgprIg4KaF4Kao4KeB4Kaw4KeL4KanIOCmleCmsOCmvuCmsCDgppzgpqjgp43gpq8g4KaF4Kaq4KeH4KaV4KeN4Ka34Ka+IOCmleCmsOCngeCmqCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVsZXRlIGFueSBleGlzdGluZyB0b2tlbnMgZm9yIHRoaXMgdXNlclxyXG4gICAgYXdhaXQgcHJpc21hLmVtYWlsVmVyaWZpY2F0aW9uVG9rZW4uZGVsZXRlTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7IHVzZXJJZDogdXNlci5pZCB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBuZXcgdmVyaWZpY2F0aW9uIHRva2VuXHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25Ub2tlbiA9IGVtYWlsU2VydmljZS5nZW5lcmF0ZVZlcmlmaWNhdGlvblRva2VuKCk7XHJcbiAgICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgMjQgKiA2MCAqIDYwICogMTAwMCk7IC8vIDI0IGhvdXJzXHJcblxyXG4gICAgLy8gU2F2ZSBuZXcgdmVyaWZpY2F0aW9uIHRva2VuXHJcbiAgICBhd2FpdCBwcmlzbWEuZW1haWxWZXJpZmljYXRpb25Ub2tlbi5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgIHRva2VuOiB2ZXJpZmljYXRpb25Ub2tlbixcclxuICAgICAgICBleHBpcmVzQXRcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU2VuZCB2ZXJpZmljYXRpb24gZW1haWxcclxuICAgIGNvbnN0IGVtYWlsUmVzdWx0ID0gYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRWZXJpZmljYXRpb25FbWFpbChcclxuICAgICAgZW1haWwsXHJcbiAgICAgIGAke3VzZXIuZmlyc3ROYW1lfSAke3VzZXIubGFzdE5hbWV9YCxcclxuICAgICAgdmVyaWZpY2F0aW9uVG9rZW5cclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFlbWFpbFJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gc2VuZCBlbWFpbCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byBzZW5kIHZlcmlmaWNhdGlvbiBlbWFpbC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+Cmr+CmvuCmmuCmvuCmhyDgpofgpq7gp4fgprIg4Kaq4Ka+4Kag4Ka+4Kao4KeLIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4fgpaQg4KaF4Kao4KeB4KaX4KeN4Kaw4Ka5IOCmmuCnh+Cmt+CnjeCmn+CmviDgppXgprDgp4HgpqjgpaQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ1ZlcmlmaWNhdGlvbiBlbWFpbCBzZW50IHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIG1lc3NhZ2VCbjogJ+Cmr+CmvuCmmuCmvuCmhyDgpofgpq7gp4fgprIg4Ka44Kar4KayIOCmquCmvuCmoOCmvuCmqOCniyDgprngpq/gprzgp4fgppvgp4cnLFxyXG4gICAgICBlbWFpbDogZW1haWxcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUmVzZW5kIHZlcmlmaWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHJlc2VuZCB2ZXJpZmljYXRpb24nLFxyXG4gICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgbWVzc2FnZUJuOiAn4Kav4Ka+4Kaa4Ka+4KaHIOCmquCngeCmqOCmsOCmvuCmr+CmvOCmviDgpqrgpr7gpqDgpr7gpqjgp4sg4Kas4KeN4Kav4Kaw4KeN4KalIOCmueCmr+CmvOCnh+Cmm+CnhydcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBTZW5kIE9UUCBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL3NlbmQtb3RwJywgW1xyXG4gIGJvZHkoJ3Bob25lJykubm90RW1wdHkoKS50cmltKClcclxuXSwgaGFuZGxlVmFsaWRhdGlvbkVycm9ycywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgcGhvbmUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIHBob25lIG51bWJlciB3aXRoIGVuaGFuY2VkIHNlcnZpY2VcclxuICAgIGNvbnN0IHBob25lVmFsaWRhdGlvbiA9IHBob25lVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVGb3JVc2VDYXNlKHBob25lLCAnb3RwJyk7XHJcbiAgICBpZiAoIXBob25lVmFsaWRhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHBob25lIGZvcm1hdCcsXHJcbiAgICAgICAgbWVzc2FnZTogcGhvbmVWYWxpZGF0aW9uLmVycm9yLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogcGhvbmVWYWxpZGF0aW9uLmVycm9yQm4sXHJcbiAgICAgICAgY29kZTogcGhvbmVWYWxpZGF0aW9uLmNvZGVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgbm9ybWFsaXplZFBob25lID0gcGhvbmVWYWxpZGF0aW9uLm5vcm1hbGl6ZWRQaG9uZTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBwaG9uZSBpcyBhbHJlYWR5IHZlcmlmaWVkXHJcbiAgICBjb25zdCBpc1ZlcmlmaWVkID0gYXdhaXQgb3RwU2VydmljZS5pc1Bob25lVmVyaWZpZWQobm9ybWFsaXplZFBob25lKTtcclxuICAgIGlmIChpc1ZlcmlmaWVkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdQaG9uZSBhbHJlYWR5IHZlcmlmaWVkJyxcclxuICAgICAgICBtZXNzYWdlOiAnVGhpcyBwaG9uZSBudW1iZXIgaXMgYWxyZWFkeSByZWdpc3RlcmVkIGFuZCB2ZXJpZmllZCcsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4KaP4KaHIOCmq+Cni+CmqCDgpqjgpq7gp43gpqzgprAg4KaG4KaX4KeH4KaHIOCmqOCmv+CmrOCmqOCnjeCmp+CmqCDgppMg4Kav4Ka+4Kaa4Ka+4KaHIOCmueCmr+CmvOCnh+Cmm+CnhydcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgYW5kIHNlbmQgT1RQXHJcbiAgICBjb25zdCBvdHBSZXN1bHQgPSBhd2FpdCBvdHBTZXJ2aWNlLmdlbmVyYXRlUGhvbmVPVFAobm9ybWFsaXplZFBob25lKTtcclxuXHJcbiAgICBpZiAoIW90cFJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gc2VuZCBPVFAnLFxyXG4gICAgICAgIG1lc3NhZ2U6IG90cFJlc3VsdC5lcnJvcixcclxuICAgICAgICBtZXNzYWdlQm46IG90cFJlc3VsdC5lcnJvckJuLFxyXG4gICAgICAgIGNvZGU6IG90cFJlc3VsdC5jb2RlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ09UUCBzZW50IHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIG1lc3NhZ2VCbjogJ09UUCDgprjgpqvgprIg4Kaq4Ka+4Kag4Ka+4Kao4KeLIOCmueCmr+CmvOCnh+Cmm+CnhycsXHJcbiAgICAgIHBob25lOiBub3JtYWxpemVkUGhvbmUsXHJcbiAgICAgIG9wZXJhdG9yOiBvdHBSZXN1bHQub3BlcmF0b3IsXHJcbiAgICAgIG9wZXJhdG9yRGV0YWlsczogb3RwUmVzdWx0Lm9wZXJhdG9yRGV0YWlscyxcclxuICAgICAgZXhwaXJlc0F0OiBvdHBSZXN1bHQuZXhwaXJlc0F0LFxyXG4gICAgICBtb2NrOiBvdHBSZXN1bHQubW9jayB8fCBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTZW5kIE9UUCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHNlbmQgT1RQJyxcclxuICAgICAgbWVzc2FnZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnJvci5tZXNzYWdlIDogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgIG1lc3NhZ2VCbjogJ09UUCDgpqrgpr7gpqDgpr7gpqjgp4sg4Kas4KeN4Kav4Kaw4KeN4KalIOCmueCmr+CmvOCnh+Cmm+CnhydcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBWZXJpZnkgT1RQIGVuZHBvaW50XHJcbnJvdXRlci5wb3N0KCcvdmVyaWZ5LW90cCcsIFtcclxuICBib2R5KCdwaG9uZScpLm5vdEVtcHR5KCkudHJpbSgpLFxyXG4gIGJvZHkoJ290cCcpLm5vdEVtcHR5KCkudHJpbSgpLmlzTGVuZ3RoKHsgbWluOiA2LCBtYXg6IDYgfSlcclxuXSwgaGFuZGxlVmFsaWRhdGlvbkVycm9ycywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgcGhvbmUsIG90cCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgcGhvbmUgbnVtYmVyIHdpdGggZW5oYW5jZWQgc2VydmljZVxyXG4gICAgY29uc3QgcGhvbmVWYWxpZGF0aW9uID0gcGhvbmVWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZUZvclVzZUNhc2UocGhvbmUsICdvdHAnKTtcclxuICAgIGlmICghcGhvbmVWYWxpZGF0aW9uLmlzVmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ0ludmFsaWQgcGhvbmUgZm9ybWF0JyxcclxuICAgICAgICBtZXNzYWdlOiBwaG9uZVZhbGlkYXRpb24uZXJyb3IsXHJcbiAgICAgICAgbWVzc2FnZUJuOiBwaG9uZVZhbGlkYXRpb24uZXJyb3JCbixcclxuICAgICAgICBjb2RlOiBwaG9uZVZhbGlkYXRpb24uY29kZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBub3JtYWxpemVkUGhvbmUgPSBwaG9uZVZhbGlkYXRpb24ubm9ybWFsaXplZFBob25lO1xyXG5cclxuICAgIC8vIFZlcmlmeSBPVFBcclxuICAgIGNvbnN0IHZlcmlmeVJlc3VsdCA9IGF3YWl0IG90cFNlcnZpY2UudmVyaWZ5UGhvbmVPVFAobm9ybWFsaXplZFBob25lLCBvdHApO1xyXG5cclxuICAgIGlmICghdmVyaWZ5UmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ09UUCB2ZXJpZmljYXRpb24gZmFpbGVkJyxcclxuICAgICAgICBtZXNzYWdlOiB2ZXJpZnlSZXN1bHQuZXJyb3IsXHJcbiAgICAgICAgbWVzc2FnZUJuOiB2ZXJpZnlSZXN1bHQuZXJyb3JCbixcclxuICAgICAgICBjb2RlOiB2ZXJpZnlSZXN1bHQuY29kZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBPVFAgd2FzIGZvciByZWdpc3RyYXRpb24sIGZpbmQgYW5kIHVwZGF0ZSB1c2VyXHJcbiAgICBpZiAodmVyaWZ5UmVzdWx0LnVzZXJJZCkge1xyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHZlcmlmeVJlc3VsdC51c2VySWQgfSxcclxuICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXHJcbiAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcclxuICAgICAgICAgIHBob25lOiB0cnVlLFxyXG4gICAgICAgICAgcm9sZTogdHJ1ZSxcclxuICAgICAgICAgIHN0YXR1czogdHJ1ZSxcclxuICAgICAgICAgIHBob25lVmVyaWZpZWQ6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oe1xyXG4gICAgICAgICAgbWVzc2FnZTogJ1Bob25lIHZlcmlmaWVkIHN1Y2Nlc3NmdWxseS4gQWNjb3VudCBpcyBub3cgYWN0aXZlLicsXHJcbiAgICAgICAgICBtZXNzYWdlQm46ICfgpqvgp4vgpqgg4Ka44Kar4KayIOCmr+CmvuCmmuCmvuCmhyDgprngpq/gprzgp4fgppvgp4fgpaQg4KaF4KeN4Kav4Ka+4KaV4Ka+4KaJ4Kao4KeN4KafIOCmj+CmluCmqCDgprjgppXgp43gprDgpr/gpq/gprzgpaQnLFxyXG4gICAgICAgICAgdXNlcixcclxuICAgICAgICAgIHZlcmlmaWVkQXQ6IHZlcmlmeVJlc3VsdC52ZXJpZmllZEF0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdPVFAgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgbWVzc2FnZUJuOiAnT1RQIOCmuOCmq+CmsiDgpq/gpr7gpprgpr7gpocg4Ka54Kav4Ka84KeH4Kab4KeHJyxcclxuICAgICAgcGhvbmU6IG5vcm1hbGl6ZWRQaG9uZSxcclxuICAgICAgdmVyaWZpZWRBdDogdmVyaWZ5UmVzdWx0LnZlcmlmaWVkQXRcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignVmVyaWZ5IE9UUCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnT1RQIHZlcmlmaWNhdGlvbiBmYWlsZWQnLFxyXG4gICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgbWVzc2FnZUJuOiAnT1RQIOCmr+CmvuCmmuCmvuCmhyDgpqzgp43gpq/gprDgp43gpqUg4Ka54Kav4Ka84KeH4Kab4KeHJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIFJlc2VuZCBPVFAgZW5kcG9pbnRcclxucm91dGVyLnBvc3QoJy9yZXNlbmQtb3RwJywgW1xyXG4gIGJvZHkoJ3Bob25lJykubm90RW1wdHkoKS50cmltKClcclxuXSwgaGFuZGxlVmFsaWRhdGlvbkVycm9ycywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgcGhvbmUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIHBob25lIG51bWJlciB3aXRoIGVuaGFuY2VkIHNlcnZpY2VcclxuICAgIGNvbnN0IHBob25lVmFsaWRhdGlvbiA9IHBob25lVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVGb3JVc2VDYXNlKHBob25lLCAnb3RwJyk7XHJcbiAgICBpZiAoIXBob25lVmFsaWRhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHBob25lIGZvcm1hdCcsXHJcbiAgICAgICAgbWVzc2FnZTogcGhvbmVWYWxpZGF0aW9uLmVycm9yLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogcGhvbmVWYWxpZGF0aW9uLmVycm9yQm4sXHJcbiAgICAgICAgY29kZTogcGhvbmVWYWxpZGF0aW9uLmNvZGVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgbm9ybWFsaXplZFBob25lID0gcGhvbmVWYWxpZGF0aW9uLm5vcm1hbGl6ZWRQaG9uZTtcclxuXHJcbiAgICAvLyBSZXNlbmQgT1RQXHJcbiAgICBjb25zdCByZXNlbmRSZXN1bHQgPSBhd2FpdCBvdHBTZXJ2aWNlLnJlc2VuZFBob25lT1RQKG5vcm1hbGl6ZWRQaG9uZSk7XHJcblxyXG4gICAgaWYgKCFyZXNlbmRSZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHJlc2VuZCBPVFAnLFxyXG4gICAgICAgIG1lc3NhZ2U6IHJlc2VuZFJlc3VsdC5lcnJvcixcclxuICAgICAgICBtZXNzYWdlQm46IHJlc2VuZFJlc3VsdC5lcnJvckJuLFxyXG4gICAgICAgIGNvZGU6IHJlc2VuZFJlc3VsdC5jb2RlLFxyXG4gICAgICAgIHdhaXRUaW1lOiByZXNlbmRSZXN1bHQud2FpdFRpbWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiAnT1RQIHJlc2VudCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBtZXNzYWdlQm46ICdPVFAg4Kaq4KeB4Kao4Kaw4Ka+4Kav4Ka84Ka+IOCmquCmvuCmoOCmvuCmqOCniyDgprngpq/gprzgp4fgppvgp4cnLFxyXG4gICAgICBwaG9uZTogbm9ybWFsaXplZFBob25lLFxyXG4gICAgICBvcGVyYXRvcjogcmVzZW5kUmVzdWx0Lm9wZXJhdG9yLFxyXG4gICAgICBvcGVyYXRvckRldGFpbHM6IHJlc2VuZFJlc3VsdC5vcGVyYXRvckRldGFpbHMsXHJcbiAgICAgIGV4cGlyZXNBdDogcmVzZW5kUmVzdWx0LmV4cGlyZXNBdCxcclxuICAgICAgbW9jazogcmVzZW5kUmVzdWx0Lm1vY2sgfHwgZmFsc2VcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUmVzZW5kIE9UUCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHJlc2VuZCBPVFAnLFxyXG4gICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgbWVzc2FnZUJuOiAnT1RQIOCmquCngeCmqOCmsOCmvuCmr+CmvOCmviDgpqzgp43gpq/gprDgp43gpqUg4Ka54Kav4Ka84KeH4Kab4KeHJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIENoYW5nZSBwYXNzd29yZCBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL2NoYW5nZS1wYXNzd29yZCcsIFtcclxuICBhdXRoTWlkZGxld2FyZS5hdXRoZW50aWNhdGUoKSxcclxuICBib2R5KCdjdXJyZW50UGFzc3dvcmQnKS5ub3RFbXB0eSgpLnRyaW0oKSxcclxuICBib2R5KCduZXdQYXNzd29yZCcpLmlzTGVuZ3RoKHsgbWluOiA4LCBtYXg6IDEyOCB9KSxcclxuICBib2R5KCdjb25maXJtUGFzc3dvcmQnKS5ub3RFbXB0eSgpLnRyaW0oKVxyXG5dLCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBjdXJyZW50UGFzc3dvcmQsIG5ld1Bhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgdXNlcklkID0gcmVxLnVzZXIuaWQ7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgbmV3IHBhc3N3b3JkcyBtYXRjaFxyXG4gICAgaWYgKG5ld1Bhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ1Bhc3N3b3JkcyBkbyBub3QgbWF0Y2gnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdOZXcgcGFzc3dvcmQgYW5kIGNvbmZpcm1hdGlvbiBwYXNzd29yZCBtdXN0IGJlIHNhbWUnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmqOCmpOCngeCmqCDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4KaP4KaV4KaHIOCmueCmrOCmvyDgprngpqTgp4cg4Ka54Kas4KeHJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdXNlciB3aXRoIGN1cnJlbnQgcGFzc3dvcmRcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxyXG4gICAgICBzZWxlY3Q6IHtcclxuICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICBmaXJzdE5hbWU6IHRydWUsXHJcbiAgICAgICAgbGFzdE5hbWU6IHRydWUsXHJcbiAgICAgICAgcGhvbmU6IHRydWUsXHJcbiAgICAgICAgcGFzc3dvcmQ6IHRydWVcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdVc2VyIG5vdCBmb3VuZCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ1VzZXIgYWNjb3VudCBub3QgZm91bmQnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmrOCnjeCmr+CmrOCmueCmvuCmsOCnjeCmn+CmvuCmsCDgpqrgpr7gppPgpq/gprzgpr4g4Kav4Ka+4Kav4Ka84Kao4Ka/J1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgY3VycmVudCBwYXNzd29yZFxyXG4gICAgY29uc3QgaXNDdXJyZW50UGFzc3dvcmRWYWxpZCA9IGF3YWl0IHBhc3N3b3JkU2VydmljZS52ZXJpZnlQYXNzd29yZChjdXJyZW50UGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xyXG4gICAgaWYgKCFpc0N1cnJlbnRQYXNzd29yZFZhbGlkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGN1cnJlbnQgcGFzc3dvcmQnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdUaGUgY3VycmVudCBwYXNzd29yZCB5b3UgZW50ZXJlZCBpcyBpbmNvcnJlY3QnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmhuCmquCmqOCmvyDgpq/gp4cg4Kaq4Ka+4Ka44KaT4Kav4Ka84Ka+4Kaw4KeN4KahIOCmpuCmv+Cmr+CmvOCnh+Cmm+Cnh+CmqCDgprjgp4fgpp/gpr4g4Kat4KeB4KayJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiBuZXcgcGFzc3dvcmQgaXMgc2FtZSBhcyBjdXJyZW50IHBhc3N3b3JkXHJcbiAgICBjb25zdCBpc1NhbWVBc0N1cnJlbnQgPSBhd2FpdCBwYXNzd29yZFNlcnZpY2UudmVyaWZ5UGFzc3dvcmQobmV3UGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xyXG4gICAgaWYgKGlzU2FtZUFzQ3VycmVudCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnU2FtZSBwYXNzd29yZCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ05ldyBwYXNzd29yZCBtdXN0IGJlIGRpZmZlcmVudCBmcm9tIGN1cnJlbnQgcGFzc3dvcmQnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmqOCmpOCngeCmqCDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kas4Kaw4KeN4Kak4Kau4Ka+4KaoIOCmquCmvuCmuOCmk+Cmr+CmvOCmvuCmsOCnjeCmoSDgpqXgp4fgppXgp4cg4Ka54Kak4KeHIOCmueCmrOCnhydcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgbmV3IHBhc3N3b3JkIHN0cmVuZ3RoXHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcclxuICAgICAgbGFzdE5hbWU6IHVzZXIubGFzdE5hbWUsXHJcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICBwaG9uZTogdXNlci5waG9uZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHBhc3N3b3JkVmFsaWRhdGlvbiA9IHBhc3N3b3JkU2VydmljZS52YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgobmV3UGFzc3dvcmQsIHVzZXJJbmZvKTtcclxuICAgIFxyXG4gICAgaWYgKCFwYXNzd29yZFZhbGlkYXRpb24uaXNWYWxpZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnUGFzc3dvcmQgZG9lcyBub3QgbWVldCByZXF1aXJlbWVudHMnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdOZXcgcGFzc3dvcmQgaXMgdG9vIHdlYWsgb3IgZG9lcyBub3QgbWVldCBzZWN1cml0eSByZXF1aXJlbWVudHMnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmqOCmpOCngeCmqCDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4KaW4KeB4Kas4KaHIOCmrOCmviDgpqjgpr/gprDgpr7gpqrgpqTgp43gpqTgpr/gppfgpr/gpq/gprwg4Kaq4KeC4Kaw4KeN4KasJyxcclxuICAgICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgICBzdHJlbmd0aDogcGFzc3dvcmRWYWxpZGF0aW9uLnN0cmVuZ3RoLFxyXG4gICAgICAgICAgc2NvcmU6IHBhc3N3b3JkVmFsaWRhdGlvbi5zY29yZSxcclxuICAgICAgICAgIGZlZWRiYWNrOiBwYXNzd29yZFZhbGlkYXRpb24uZmVlZGJhY2ssXHJcbiAgICAgICAgICB3YXJuaW5nczogcGFzc3dvcmRWYWxpZGF0aW9uLndhcm5pbmdzLFxyXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IHBhc3N3b3JkVmFsaWRhdGlvbi5zdWdnZXN0aW9ucyxcclxuICAgICAgICAgIHBhc3N3b3JkUG9saWN5OiBwYXNzd29yZFNlcnZpY2UuZ2V0UGFzc3dvcmRQb2xpY3koKVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgcGFzc3dvcmQgaGFzIGJlZW4gdXNlZCBiZWZvcmVcclxuICAgIGNvbnN0IGlzUGFzc3dvcmRSZXVzZWQgPSBhd2FpdCBwYXNzd29yZFNlcnZpY2UuaXNQYXNzd29yZFJldXNlZCh1c2VySWQsIG5ld1Bhc3N3b3JkKTtcclxuICAgIGlmIChpc1Bhc3N3b3JkUmV1c2VkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdQYXNzd29yZCBhbHJlYWR5IHVzZWQnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdZb3UgY2Fubm90IHJldXNlIGEgcGFzc3dvcmQgdGhhdCBoYXMgYmVlbiB1c2VkIGluIHRoZSBsYXN0IDUgY2hhbmdlcycsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4KaG4Kaq4Kao4Ka/IOCmtuCnh+CmtyA14Kaf4Ka/IOCmquCmvuCmuOCmk+Cmr+CmvOCmvuCmsOCnjeCmoSDgpqrgprDgpr/gpqzgprDgp43gpqTgpqgg4Kas4KeN4Kav4Kas4Ka54Ka+4KawIOCmleCmsOCmviDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kas4KeN4Kav4Kas4Ka54Ka+4KawIOCmleCmsOCmpOCnhyDgpqrgpr7gprDgp4fgpqgnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEhhc2ggbmV3IHBhc3N3b3JkXHJcbiAgICBjb25zdCBoYXNoZWROZXdQYXNzd29yZCA9IGF3YWl0IHBhc3N3b3JkU2VydmljZS5oYXNoUGFzc3dvcmQobmV3UGFzc3dvcmQpO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB1c2VyIHBhc3N3b3JkXHJcbiAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xyXG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXHJcbiAgICAgIGRhdGE6IHsgcGFzc3dvcmQ6IGhhc2hlZE5ld1Bhc3N3b3JkIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNhdmUgbmV3IHBhc3N3b3JkIHRvIGhpc3RvcnlcclxuICAgIGF3YWl0IHBhc3N3b3JkU2VydmljZS5zYXZlUGFzc3dvcmRUb0hpc3RvcnkodXNlcklkLCBoYXNoZWROZXdQYXNzd29yZCk7XHJcblxyXG4gICAgLy8gTG9nIHBhc3N3b3JkIGNoYW5nZSAoeW91IG1pZ2h0IHdhbnQgdG8gYWRkIHByb3BlciBsb2dnaW5nIGhlcmUpXHJcbiAgICBjb25zb2xlLmxvZyhgUGFzc3dvcmQgY2hhbmdlZCBmb3IgdXNlciAke3VzZXJJZH0gYXQgJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YCk7XHJcblxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiAnUGFzc3dvcmQgY2hhbmdlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Ka44Kar4KayIOCmueCmr+CmvOCnh+Cmm+CnhycsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0NoYW5nZSBwYXNzd29yZCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnUGFzc3dvcmQgY2hhbmdlIGZhaWxlZCcsXHJcbiAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kaq4Kaw4Ka/4Kas4Kaw4KeN4Kak4KaoIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gUmVxdWVzdCBwYXNzd29yZCByZXNldCBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL2ZvcmdvdC1wYXNzd29yZCcsIFtcclxuICBib2R5KCdlbWFpbCcpLmlzRW1haWwoKS5ub3JtYWxpemVFbWFpbCgpXHJcbl0sIGhhbmRsZVZhbGlkYXRpb25FcnJvcnMsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVtYWlsIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBGaW5kIHVzZXJcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgZW1haWwgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIC8vIERvbid0IHJldmVhbCBpZiB1c2VyIGV4aXN0cyBvciBub3QgZm9yIHNlY3VyaXR5XHJcbiAgICAgIHJldHVybiByZXMuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogJ0lmIGFuIGFjY291bnQgd2l0aCB0aGF0IGVtYWlsIGV4aXN0cywgYSBwYXNzd29yZCByZXNldCBsaW5rIGhhcyBiZWVuIHNlbnQnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+Cmr+CmpuCmvyDgpo/gpocg4KaH4Kau4KeH4KayIOCmoOCmv+CmleCmvuCmqOCmviDgppXgp4vgpqjgp4sg4KaF4KeN4Kav4Ka+4KaV4Ka+4KaJ4Kao4KeN4KafIOCmpeCmvuCmleCmsuCnhywg4KaP4KaV4Kaf4Ka/IOCmquCmvuCmuOCmk+Cmr+CmvOCmvuCmsOCnjeCmoSDgprDgpr/gprjgp4fgpp8g4Kay4Ka/4KaZ4KeN4KaVIOCmquCmvuCmoOCmvuCmqOCniyDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIHJlc2V0IHRva2VuICh5b3UgbWlnaHQgd2FudCB0byB1c2UgYSBzZXBhcmF0ZSB0b2tlbiBzZXJ2aWNlKVxyXG4gICAgY29uc3QgcmVzZXRUb2tlbiA9IGVtYWlsU2VydmljZS5nZW5lcmF0ZVZlcmlmaWNhdGlvblRva2VuKCk7XHJcbiAgICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgMSAqIDYwICogNjAgKiAxMDAwKTsgLy8gMSBob3VyXHJcblxyXG4gICAgLy8gU2F2ZSByZXNldCB0b2tlbiAodXNpbmcgZW1haWwgdmVyaWZpY2F0aW9uIHRva2VuIHRhYmxlIGZvciBzaW1wbGljaXR5KVxyXG4gICAgYXdhaXQgcHJpc21hLmVtYWlsVmVyaWZpY2F0aW9uVG9rZW4uY3JlYXRlKHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgICB0b2tlbjogcmVzZXRUb2tlbixcclxuICAgICAgICBleHBpcmVzQXRcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgdGVtcG9yYXJ5IHN0cm9uZyBwYXNzd29yZFxyXG4gICAgY29uc3QgdGVtcG9yYXJ5UGFzc3dvcmQgPSBwYXNzd29yZFNlcnZpY2UuZ2VuZXJhdGVTdHJvbmdQYXNzd29yZCgxMik7XHJcbiAgICBjb25zdCBoYXNoZWRUZW1wUGFzc3dvcmQgPSBhd2FpdCBwYXNzd29yZFNlcnZpY2UuaGFzaFBhc3N3b3JkKHRlbXBvcmFyeVBhc3N3b3JkKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdXNlciB3aXRoIHRlbXBvcmFyeSBwYXNzd29yZFxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXIuaWQgfSxcclxuICAgICAgZGF0YTogeyBwYXNzd29yZDogaGFzaGVkVGVtcFBhc3N3b3JkIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNhdmUgdGVtcG9yYXJ5IHBhc3N3b3JkIHRvIGhpc3RvcnlcclxuICAgIGF3YWl0IHBhc3N3b3JkU2VydmljZS5zYXZlUGFzc3dvcmRUb0hpc3RvcnkodXNlci5pZCwgaGFzaGVkVGVtcFBhc3N3b3JkKTtcclxuXHJcbiAgICAvLyBTZW5kIHJlc2V0IGVtYWlsIHdpdGggdGVtcG9yYXJ5IHBhc3N3b3JkXHJcbiAgICBjb25zdCBlbWFpbFJlc3VsdCA9IGF3YWl0IGVtYWlsU2VydmljZS5zZW5kUGFzc3dvcmRSZXNldEVtYWlsKFxyXG4gICAgICBlbWFpbCxcclxuICAgICAgYCR7dXNlci5maXJzdE5hbWV9ICR7dXNlci5sYXN0TmFtZX1gLFxyXG4gICAgICB0ZW1wb3JhcnlQYXNzd29yZCxcclxuICAgICAgcmVzZXRUb2tlblxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIWVtYWlsUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBzZW5kIHJlc2V0IGVtYWlsJyxcclxuICAgICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIHNlbmQgcGFzc3dvcmQgcmVzZXQgZW1haWwuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcclxuICAgICAgICBtZXNzYWdlQm46ICfgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kaw4Ka/4Ka44KeH4KafIOCmh+CmruCnh+CmsiDgpqrgpr7gpqDgpr7gpqjgp4sg4Kas4KeN4Kav4Kaw4KeN4KalIOCmueCmr+CmvOCnh+Cmm+Cnh+ClpCDgpoXgpqjgp4Hgppfgp43gprDgprkg4Kaa4KeH4Ka34KeN4Kaf4Ka+IOCmleCmsOCngeCmqOClpCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiAnUGFzc3dvcmQgcmVzZXQgZW1haWwgc2VudCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kaw4Ka/4Ka44KeH4KafIOCmh+CmruCnh+CmsiDgprjgpqvgprIg4Kaq4Ka+4Kag4Ka+4Kao4KeLIOCmueCmr+CmvOCnh+Cmm+CnhycsXHJcbiAgICAgIGVtYWlsOiBlbWFpbFxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGb3Jnb3QgcGFzc3dvcmQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ1Bhc3N3b3JkIHJlc2V0IGZhaWxlZCcsXHJcbiAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kaw4Ka/4Ka44KeH4KafIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gUmVzZXQgcGFzc3dvcmQgZW5kcG9pbnQgKHdpdGggdG9rZW4pXHJcbnJvdXRlci5wb3N0KCcvcmVzZXQtcGFzc3dvcmQnLCBbXHJcbiAgYm9keSgndG9rZW4nKS5ub3RFbXB0eSgpLnRyaW0oKSxcclxuICBib2R5KCduZXdQYXNzd29yZCcpLmlzTGVuZ3RoKHsgbWluOiA4LCBtYXg6IDEyOCB9KSxcclxuICBib2R5KCdjb25maXJtUGFzc3dvcmQnKS5ub3RFbXB0eSgpLnRyaW0oKVxyXG5dLCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB0b2tlbiwgbmV3UGFzc3dvcmQsIGNvbmZpcm1QYXNzd29yZCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgbmV3IHBhc3N3b3JkcyBtYXRjaFxyXG4gICAgaWYgKG5ld1Bhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ1Bhc3N3b3JkcyBkbyBub3QgbWF0Y2gnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdOZXcgcGFzc3dvcmQgYW5kIGNvbmZpcm1hdGlvbiBwYXNzd29yZCBtdXN0IGJlIHNhbWUnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmqOCmpOCngeCmqCDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4KaP4KaV4KaHIOCmueCmrOCmvyDgprngpqTgp4cg4Ka54Kas4KeHJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaW5kIHJlc2V0IHRva2VuXHJcbiAgICBjb25zdCByZXNldFRva2VuID0gYXdhaXQgcHJpc21hLmVtYWlsVmVyaWZpY2F0aW9uVG9rZW4uZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IHRva2VuIH0sXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICB1c2VyOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmVzZXRUb2tlbikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCB0b2tlbicsXHJcbiAgICAgICAgbWVzc2FnZTogJ1Bhc3N3b3JkIHJlc2V0IHRva2VuIGlzIGludmFsaWQgb3IgaGFzIGJlZW4gdXNlZCcsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4Kaq4Ka+4Ka44KaT4Kav4Ka84Ka+4Kaw4KeN4KahIOCmsOCmv+CmuOCnh+CmnyDgpp/gp4vgppXgp4fgpqgg4KaF4Kas4KeI4KanIOCmrOCmviDgpqzgp43gpq/gpqzgprngpr7gprAg4Ka54Kav4Ka84KeH4Kab4KeHJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiB0b2tlbiBoYXMgZXhwaXJlZFxyXG4gICAgaWYgKHJlc2V0VG9rZW4uZXhwaXJlc0F0IDwgbmV3IERhdGUoKSkge1xyXG4gICAgICAvLyBEZWxldGUgZXhwaXJlZCB0b2tlblxyXG4gICAgICBhd2FpdCBwcmlzbWEuZW1haWxWZXJpZmljYXRpb25Ub2tlbi5kZWxldGUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiByZXNldFRva2VuLmlkIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnVG9rZW4gZXhwaXJlZCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ1Bhc3N3b3JkIHJlc2V0IHRva2VuIGhhcyBleHBpcmVkLiBQbGVhc2UgcmVxdWVzdCBhIG5ldyBvbmUuJyxcclxuICAgICAgICBtZXNzYWdlQm46ICfgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kaw4Ka/4Ka44KeH4KafIOCmn+Cni+CmleCnh+CmqCDgpq7gp4fgpq/gprzgpr7gpqbgp4Dgpqrgp4LgprDgp43gpqMg4Ka54Kav4Ka84KeH4Kab4KeH4KWkIOCmqOCmpOCngeCmqCDgpo/gppXgpp/gpr8g4KaF4Kao4KeB4Kaw4KeL4KanIOCmleCmsOCngeCmqOClpCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgbmV3IHBhc3N3b3JkIHN0cmVuZ3RoXHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgZmlyc3ROYW1lOiByZXNldFRva2VuLnVzZXIuZmlyc3ROYW1lLFxyXG4gICAgICBsYXN0TmFtZTogcmVzZXRUb2tlbi51c2VyLmxhc3ROYW1lLFxyXG4gICAgICBlbWFpbDogcmVzZXRUb2tlbi51c2VyLmVtYWlsLFxyXG4gICAgICBwaG9uZTogcmVzZXRUb2tlbi51c2VyLnBob25lXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcGFzc3dvcmRWYWxpZGF0aW9uID0gcGFzc3dvcmRTZXJ2aWNlLnZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aChuZXdQYXNzd29yZCwgdXNlckluZm8pO1xyXG4gICAgXHJcbiAgICBpZiAoIXBhc3N3b3JkVmFsaWRhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgZXJyb3I6ICdQYXNzd29yZCBkb2VzIG5vdCBtZWV0IHJlcXVpcmVtZW50cycsXHJcbiAgICAgICAgbWVzc2FnZTogJ05ldyBwYXNzd29yZCBpcyB0b28gd2VhayBvciBkb2VzIG5vdCBtZWV0IHNlY3VyaXR5IHJlcXVpcmVtZW50cycsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4Kao4Kak4KeB4KaoIOCmquCmvuCmuOCmk+Cmr+CmvOCmvuCmsOCnjeCmoSDgppbgp4Hgpqzgpocg4Kas4Ka+IOCmqOCmv+CmsOCmvuCmquCmpOCnjeCmpOCmv+Cml+Cmv+Cmr+CmvCDgpqrgp4LgprDgp43gpqwnLFxyXG4gICAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICAgIHN0cmVuZ3RoOiBwYXNzd29yZFZhbGlkYXRpb24uc3RyZW5ndGgsXHJcbiAgICAgICAgICBzY29yZTogcGFzc3dvcmRWYWxpZGF0aW9uLnNjb3JlLFxyXG4gICAgICAgICAgZmVlZGJhY2s6IHBhc3N3b3JkVmFsaWRhdGlvbi5mZWVkYmFjayxcclxuICAgICAgICAgIHdhcm5pbmdzOiBwYXNzd29yZFZhbGlkYXRpb24ud2FybmluZ3MsXHJcbiAgICAgICAgICBzdWdnZXN0aW9uczogcGFzc3dvcmRWYWxpZGF0aW9uLnN1Z2dlc3Rpb25zLFxyXG4gICAgICAgICAgcGFzc3dvcmRQb2xpY3k6IHBhc3N3b3JkU2VydmljZS5nZXRQYXNzd29yZFBvbGljeSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiBwYXNzd29yZCBoYXMgYmVlbiB1c2VkIGJlZm9yZVxyXG4gICAgY29uc3QgaXNQYXNzd29yZFJldXNlZCA9IGF3YWl0IHBhc3N3b3JkU2VydmljZS5pc1Bhc3N3b3JkUmV1c2VkKHJlc2V0VG9rZW4udXNlcklkLCBuZXdQYXNzd29yZCk7XHJcbiAgICBpZiAoaXNQYXNzd29yZFJldXNlZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnUGFzc3dvcmQgYWxyZWFkeSB1c2VkJyxcclxuICAgICAgICBtZXNzYWdlOiAnWW91IGNhbm5vdCByZXVzZSBhIHBhc3N3b3JkIHRoYXQgaGFzIGJlZW4gdXNlZCBpbiB0aGUgbGFzdCA1IGNoYW5nZXMnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmhuCmquCmqOCmvyDgprbgp4fgprcgNeCmn+CmvyDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kaq4Kaw4Ka/4Kas4Kaw4KeN4Kak4KaoIOCmrOCnjeCmr+CmrOCmueCmvuCmsCDgppXgprDgpr4g4Kaq4Ka+4Ka44KaT4Kav4Ka84Ka+4Kaw4KeN4KahIOCmrOCnjeCmr+CmrOCmueCmvuCmsCDgppXgprDgpqTgp4cg4Kaq4Ka+4Kaw4KeH4KaoJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIYXNoIG5ldyBwYXNzd29yZFxyXG4gICAgY29uc3QgaGFzaGVkTmV3UGFzc3dvcmQgPSBhd2FpdCBwYXNzd29yZFNlcnZpY2UuaGFzaFBhc3N3b3JkKG5ld1Bhc3N3b3JkKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdXNlciBwYXNzd29yZFxyXG4gICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHJlc2V0VG9rZW4udXNlcklkIH0sXHJcbiAgICAgIGRhdGE6IHsgcGFzc3dvcmQ6IGhhc2hlZE5ld1Bhc3N3b3JkIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNhdmUgbmV3IHBhc3N3b3JkIHRvIGhpc3RvcnlcclxuICAgIGF3YWl0IHBhc3N3b3JkU2VydmljZS5zYXZlUGFzc3dvcmRUb0hpc3RvcnkocmVzZXRUb2tlbi51c2VySWQsIGhhc2hlZE5ld1Bhc3N3b3JkKTtcclxuXHJcbiAgICAvLyBEZWxldGUgcmVzZXQgdG9rZW5cclxuICAgIGF3YWl0IHByaXNtYS5lbWFpbFZlcmlmaWNhdGlvblRva2VuLmRlbGV0ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiByZXNldFRva2VuLmlkIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyB0byBhY3RpdmUgaWYgcGVuZGluZ1xyXG4gICAgaWYgKHJlc2V0VG9rZW4udXNlci5zdGF0dXMgPT09ICdQRU5ESU5HJykge1xyXG4gICAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiByZXNldFRva2VuLnVzZXJJZCB9LFxyXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnQUNUSVZFJyB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZyBwYXNzd29yZCByZXNldFxyXG4gICAgY29uc29sZS5sb2coYFBhc3N3b3JkIHJlc2V0IGZvciB1c2VyICR7cmVzZXRUb2tlbi51c2VySWR9IGF0ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfWApO1xyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ1Bhc3N3b3JkIHJlc2V0IHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIG1lc3NhZ2VCbjogJ+CmquCmvuCmuOCmk+Cmr+CmvOCmvuCmsOCnjeCmoSDgprjgpqvgprIg4Ka54Kav4Ka84KeH4Kab4KeHJyxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignUmVzZXQgcGFzc3dvcmQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ1Bhc3N3b3JkIHJlc2V0IGZhaWxlZCcsXHJcbiAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kaw4Ka/4Ka44KeH4KafIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gR2V0IHBhc3N3b3JkIHBvbGljeSBlbmRwb2ludFxyXG5yb3V0ZXIuZ2V0KCcvcGFzc3dvcmQtcG9saWN5JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBvbGljeSA9IHBhc3N3b3JkU2VydmljZS5nZXRQYXNzd29yZFBvbGljeSgpO1xyXG4gICAgXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIHBvbGljeSxcclxuICAgICAgbWVzc2FnZTogJ0N1cnJlbnQgcGFzc3dvcmQgcG9saWN5IHJlcXVpcmVtZW50cycsXHJcbiAgICAgIG1lc3NhZ2VCbjogJ+CmrOCmsOCnjeCmpOCmruCmvuCmqCDgpqrgpr7gprjgppPgpq/gprzgpr7gprDgp43gpqEg4Kao4KeA4Kak4Ka/4Kau4Ka+4Kay4Ka+J1xyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0dldCBwYXNzd29yZCBwb2xpY3kgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZXQgcGFzc3dvcmQgcG9saWN5JyxcclxuICAgICAgbWVzc2FnZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnJvci5tZXNzYWdlIDogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgIG1lc3NhZ2VCbjogJ+CmquCmvuCmuOCmk+Cmr+CmvOCmvuCmsOCnjeCmoSDgpqjgp4DgpqTgpr/gpq7gpr7gprLgpr4g4Kaq4Ka+4KaT4Kak4KeHIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gR2V0IHBob25lIHZhbGlkYXRpb24gaW5mbyBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL3ZhbGlkYXRlLXBob25lJywgW1xyXG4gIGJvZHkoJ3Bob25lJykubm90RW1wdHkoKS50cmltKClcclxuXSwgaGFuZGxlVmFsaWRhdGlvbkVycm9ycywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgcGhvbmUgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBwaG9uZVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlQmFuZ2xhZGVzaFBob25lTnVtYmVyKHBob25lKTtcclxuXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIHZhbGlkYXRpb24sXHJcbiAgICAgIG1lc3NhZ2U6IHZhbGlkYXRpb24uaXNWYWxpZCA/ICdWYWxpZCBwaG9uZSBudW1iZXInIDogJ0ludmFsaWQgcGhvbmUgbnVtYmVyJyxcclxuICAgICAgbWVzc2FnZUJuOiB2YWxpZGF0aW9uLmlzVmFsaWQgPyAn4Kas4KeI4KanIOCmq+Cni+CmqCDgpqjgpq7gp43gpqzgprAnIDogJ+CmheCmrOCniOCmpyDgpqvgp4vgpqgg4Kao4Kau4KeN4Kas4KawJ1xyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdQaG9uZSB2YWxpZGF0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXHJcbiAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpq/gpr7gpprgpr7gpocg4Kas4KeN4Kav4Kaw4KeN4KalIOCmueCmr+CmvOCnh+Cmm+CnhydcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBHZXQgc3VwcG9ydGVkIG9wZXJhdG9ycyBlbmRwb2ludFxyXG5yb3V0ZXIuZ2V0KCcvb3BlcmF0b3JzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG9wZXJhdG9ycyA9IHBob25lVmFsaWRhdGlvblNlcnZpY2UuZ2V0U3VwcG9ydGVkT3BlcmF0b3JzKCk7XHJcblxyXG4gICAgcmVzLmpzb24oe1xyXG4gICAgICBvcGVyYXRvcnMsXHJcbiAgICAgIG1lc3NhZ2U6ICdTdXBwb3J0ZWQgbW9iaWxlIG9wZXJhdG9ycycsXHJcbiAgICAgIG1lc3NhZ2VCbjogJ+CmuOCmruCmsOCnjeCmpeCmv+CmpCDgpq7gp4vgpqzgpr7gpofgprIg4KaF4Kaq4Ka+4Kaw4KeH4Kaf4KawJ1xyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgb3BlcmF0b3JzIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZ2V0IG9wZXJhdG9ycycsXHJcbiAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpoXgpqrgpr7gprDgp4fgpp/gprAg4Kaq4Ka+4KaT4Kak4KeHIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gUmVtZW1iZXIgbWUgdG9rZW4gdmFsaWRhdGlvbiBlbmRwb2ludFxyXG5yb3V0ZXIucG9zdCgnL3ZhbGlkYXRlLXJlbWVtYmVyLW1lJywgW1xyXG4gIGJvZHkoJ3Rva2VuJykubm90RW1wdHkoKS50cmltKClcclxuXSwgaGFuZGxlVmFsaWRhdGlvbkVycm9ycywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdG9rZW4gfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ1Rva2VuIHJlcXVpcmVkJyxcclxuICAgICAgICBtZXNzYWdlOiAnUmVtZW1iZXIgbWUgdG9rZW4gaXMgcmVxdWlyZWQnLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogJ+CmsOCmv+CmruCnh+CmruCnjeCmrOCmvuCmsCDgpq7gpr8g4Kaf4KeL4KaV4KeH4KaoIOCmquCnjeCmsOCmr+CmvOCni+CmnOCmqCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgcmVtZW1iZXIgbWUgdG9rZW5cclxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBzZXNzaW9uU2VydmljZS52YWxpZGF0ZVJlbWVtYmVyTWVUb2tlbih0b2tlbik7XHJcbiAgICBcclxuICAgIGlmICghdmFsaWRhdGlvbi52YWxpZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCB0b2tlbicsXHJcbiAgICAgICAgbWVzc2FnZTogdmFsaWRhdGlvbi5yZWFzb24gfHwgJ1JlbWVtYmVyIG1lIHRva2VuIGlzIGludmFsaWQgb3IgZXhwaXJlZCcsXHJcbiAgICAgICAgbWVzc2FnZUJuOiB2YWxpZGF0aW9uLnJlYXNvbiB8fCAn4Kaw4Ka/4Kau4KeH4Kau4KeN4Kas4Ka+4KawIOCmruCmvyDgpp/gp4vgppXgp4fgpqgg4KaF4Kas4KeI4KanIOCmrOCmviDgpq7gp4fgpq/gprzgpr7gpqbgp4Dgpqrgp4LgprDgp43gpqMnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB1c2VyIGRldGFpbHNcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHZhbGlkYXRpb24udXNlcklkIH0sXHJcbiAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsOiB0cnVlLFxyXG4gICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcclxuICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcclxuICAgICAgICBwaG9uZTogdHJ1ZSxcclxuICAgICAgICByb2xlOiB0cnVlLFxyXG4gICAgICAgIHN0YXR1czogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyxcclxuICAgICAgICBtZXNzYWdlOiAnVXNlciBhY2NvdW50IG5vdCBmb3VuZCcsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4Kas4KeN4Kav4Kas4Ka54Ka+4Kaw4KeN4Kaf4Ka+4KawIOCmquCmvuCmk+Cmr+CmvOCmviDgpq/gpr7gpq/gprzgpqjgpr8nXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ1JlbWVtYmVyIG1lIHRva2VuIGlzIHZhbGlkJyxcclxuICAgICAgbWVzc2FnZUJuOiAn4Kaw4Ka/4Kau4KeH4Kau4KeN4Kas4Ka+4KawIOCmruCmvyDgpp/gp4vgppXgp4fgpqgg4Kas4KeI4KanJyxcclxuICAgICAgdXNlcixcclxuICAgICAgdG9rZW5WYWxpZDogdHJ1ZSxcclxuICAgICAgY3JlYXRlZEF0OiB2YWxpZGF0aW9uLmNyZWF0ZWRBdFxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdSZW1lbWJlciBtZSB0b2tlbiB2YWxpZGF0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXHJcbiAgICAgIG1lc3NhZ2U6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IubWVzc2FnZSA6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICBtZXNzYWdlQm46ICfgpq/gpr7gpprgpr7gpocg4Kas4KeN4Kav4Kaw4KeN4KalIOCmueCmr+CmvOCnh+Cmm+CnhydcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBSZWZyZXNoIHNlc3Npb24gdXNpbmcgcmVtZW1iZXIgbWUgdG9rZW5cclxucm91dGVyLnBvc3QoJy9yZWZyZXNoLWZyb20tcmVtZW1iZXItbWUnLCBbXHJcbiAgYm9keSgndG9rZW4nKS5ub3RFbXB0eSgpLnRyaW0oKVxyXG5dLCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JzLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB0b2tlbiB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAnVG9rZW4gcmVxdWlyZWQnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdSZW1lbWJlciBtZSB0b2tlbiBpcyByZXF1aXJlZCcsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4Kaw4Ka/4Kau4KeH4Kau4KeN4Kas4Ka+4KawIOCmruCmvyDgpp/gp4vgppXgp4fgpqgg4Kaq4KeN4Kaw4Kav4Ka84KeL4Kac4KaoJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZWZyZXNoIHNlc3Npb24gdXNpbmcgcmVtZW1iZXIgbWUgdG9rZW5cclxuICAgIGNvbnN0IHJlZnJlc2hSZXN1bHQgPSBhd2FpdCBzZXNzaW9uU2VydmljZS5yZWZyZXNoRnJvbVJlbWVtYmVyTWVUb2tlbih0b2tlbiwgcmVxKTtcclxuICAgIFxyXG4gICAgaWYgKCFyZWZyZXNoUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ1Nlc3Npb24gcmVmcmVzaCBmYWlsZWQnLFxyXG4gICAgICAgIG1lc3NhZ2U6IHJlZnJlc2hSZXN1bHQucmVhc29uIHx8ICdGYWlsZWQgdG8gcmVmcmVzaCBzZXNzaW9uIGZyb20gcmVtZW1iZXIgbWUgdG9rZW4nLFxyXG4gICAgICAgIG1lc3NhZ2VCbjogcmVmcmVzaFJlc3VsdC5yZWFzb24gfHwgJ+CmsOCmv+CmruCnh+CmruCnjeCmrOCmvuCmsCDgpq7gpr8g4Kaf4KeL4KaV4KeH4KaoIOCmpeCnh+CmleCnhyDgprjgp4fgprbgpqgg4Kaw4Ka/4Kar4KeN4Kaw4KeH4Ka2IOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB1c2VyIGRldGFpbHNcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IHJlZnJlc2hSZXN1bHQudXNlcklkIH0sXHJcbiAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsOiB0cnVlLFxyXG4gICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcclxuICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcclxuICAgICAgICBwaG9uZTogdHJ1ZSxcclxuICAgICAgICByb2xlOiB0cnVlLFxyXG4gICAgICAgIHN0YXR1czogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyxcclxuICAgICAgICBtZXNzYWdlOiAnVXNlciBhY2NvdW50IG5vdCBmb3VuZCcsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4Kas4KeN4Kav4Kas4Ka54Ka+4Kaw4KeN4Kaf4Ka+4KawIOCmquCmvuCmk+Cmr+CmvOCmviDgpq/gpr7gpq/gprzgpqjgpr8nXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCBzZXNzaW9uIGNvb2tpZVxyXG4gICAgc2Vzc2lvbk1pZGRsZXdhcmUuc2V0U2Vzc2lvbkNvb2tpZShyZXMsIHJlZnJlc2hSZXN1bHQuc2Vzc2lvbklkLCB7XHJcbiAgICAgIG1heEFnZTogcmVmcmVzaFJlc3VsdC5tYXhBZ2UsXHJcbiAgICAgIHJlbWVtYmVyTWU6IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFkZCBzZXNzaW9uIGhlYWRlcnNcclxuICAgIGNvbnN0IHNlc3Npb25IZWFkZXJzID0gc2Vzc2lvbk1pZGRsZXdhcmUuc2Vzc2lvbkhlYWRlcnMocmVmcmVzaFJlc3VsdCk7XHJcbiAgICBPYmplY3Qua2V5cyhzZXNzaW9uSGVhZGVycykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICByZXMuc2V0KGtleSwgc2Vzc2lvbkhlYWRlcnNba2V5XSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBKV1QgdG9rZW4gZm9yIEFQSSBjb21wYXRpYmlsaXR5XHJcbiAgICBjb25zdCBqd3RTZWNyZXRMb2dpbiA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7XHJcbiAgICBpZiAoIWp3dFNlY3JldExvZ2luKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSldUX1NFQ1JFVCBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBqd3RUb2tlbiA9IGp3dC5zaWduKFxyXG4gICAgICB7XHJcbiAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxyXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgIHBob25lOiB1c2VyLnBob25lLFxyXG4gICAgICAgIHJvbGU6IHVzZXIucm9sZSxcclxuICAgICAgICBzZXNzaW9uSWQ6IHJlZnJlc2hSZXN1bHQuc2Vzc2lvbklkXHJcbiAgICAgIH0sXHJcbiAgICAgIGp3dFNlY3JldExvZ2luLFxyXG4gICAgICB7IGV4cGlyZXNJbjogcHJvY2Vzcy5lbnYuSldUX0VYUElSRVNfSU4gfHwgJzE1bScgfVxyXG4gICAgKTtcclxuXHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdTZXNzaW9uIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICBtZXNzYWdlQm46ICfgprjgp4fgprbgpqgg4Ka44Kar4KayIOCmueCmr+CmvOCnh+Cmm+CnhycsXHJcbiAgICAgIHVzZXIsXHJcbiAgICAgIHRva2VuOiBqd3RUb2tlbixcclxuICAgICAgc2Vzc2lvbklkOiByZWZyZXNoUmVzdWx0LnNlc3Npb25JZCxcclxuICAgICAgZXhwaXJlc0F0OiByZWZyZXNoUmVzdWx0LmV4cGlyZXNBdCxcclxuICAgICAgbWF4QWdlOiByZWZyZXNoUmVzdWx0Lm1heEFnZSxcclxuICAgICAgcmVtZW1iZXJNZTogdHJ1ZSxcclxuICAgICAgcmVmcmVzaGVkRnJvbTogJ3JlbWVtYmVyX21lX3Rva2VuJ1xyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdSZW1lbWJlciBtZSBzZXNzaW9uIHJlZnJlc2ggZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogJ1Nlc3Npb24gcmVmcmVzaCBmYWlsZWQnLFxyXG4gICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgbWVzc2FnZUJuOiAn4Ka44KeH4Ka24KaoIOCmsOCmv+Cmq+CnjeCmsOCnh+CmtiDgpqzgp43gpq/gprDgp43gpqUg4Ka54Kav4Ka84KeH4Kab4KeHJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIERpc2FibGUgcmVtZW1iZXIgbWUgZnVuY3Rpb25hbGl0eVxyXG5yb3V0ZXIucG9zdCgnL2Rpc2FibGUtcmVtZW1iZXItbWUnLCBbXHJcbiAgYXV0aE1pZGRsZXdhcmUuYXV0aGVudGljYXRlKCksXHJcbiAgYm9keSgnYWxsRGV2aWNlcycpLm9wdGlvbmFsKCkuaXNCb29sZWFuKClcclxuXSwgaGFuZGxlVmFsaWRhdGlvbkVycm9ycywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgYWxsRGV2aWNlcyB9ID0gcmVxLmJvZHk7XHJcbiAgICBjb25zdCB1c2VySWQgPSByZXEudXNlci5pZDtcclxuICAgIGNvbnN0IGN1cnJlbnRTZXNzaW9uSWQgPSByZXEuc2Vzc2lvbklkO1xyXG5cclxuICAgIGlmIChhbGxEZXZpY2VzKSB7XHJcbiAgICAgIC8vIERlc3Ryb3kgYWxsIHJlbWVtYmVyIG1lIHNlc3Npb25zIGZvciB0aGlzIHVzZXJcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2Vzc2lvblNlcnZpY2UuZGVzdHJveUFsbFVzZXJTZXNzaW9ucyh1c2VySWQsIGN1cnJlbnRTZXNzaW9uSWQpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2xlYXIgcmVtZW1iZXIgbWUgY29va2llc1xyXG4gICAgICByZXMuY2xlYXJDb29raWUoJ3JlbWVtYmVyTWUnKTtcclxuICAgICAgcmVzLmNsZWFyQ29va2llKCdyZW1lbWJlck1lRW5hYmxlZCcpO1xyXG5cclxuICAgICAgcmVzLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6ICdSZW1lbWJlciBtZSBkaXNhYmxlZCBvbiBhbGwgZGV2aWNlcycsXHJcbiAgICAgICAgbWVzc2FnZUJuOiAn4Ka44KasIOCmoeCmv+CmreCmvuCmh+CmuOCnhyDgprDgpr/gpq7gp4fgpq7gp43gpqzgpr7gprAg4Kau4Ka/IOCmqOCmv+Cmt+CnjeCmleCnjeCmsOCmv+Cmr+CmvCDgppXgprDgpr4g4Ka54Kav4Ka84KeH4Kab4KeHJyxcclxuICAgICAgICBhbGxEZXZpY2VzOiB0cnVlLFxyXG4gICAgICAgIGRlc3Ryb3llZENvdW50OiByZXN1bHQuZGVzdHJveWVkQ291bnRcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBEZXN0cm95IGN1cnJlbnQgc2Vzc2lvbiBvbmx5XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlc3Npb25TZXJ2aWNlLmRlc3Ryb3lTZXNzaW9uKGN1cnJlbnRTZXNzaW9uSWQsICdkaXNhYmxlX3JlbWVtYmVyX21lJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDbGVhciByZW1lbWJlciBtZSBjb29raWVzXHJcbiAgICAgIHJlcy5jbGVhckNvb2tpZSgncmVtZW1iZXJNZScpO1xyXG4gICAgICByZXMuY2xlYXJDb29raWUoJ3JlbWVtYmVyTWVFbmFibGVkJyk7XHJcblxyXG4gICAgICByZXMuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogJ1JlbWVtYmVyIG1lIGRpc2FibGVkIG9uIGN1cnJlbnQgZGV2aWNlJyxcclxuICAgICAgICBtZXNzYWdlQm46ICfgpqzgprDgp43gpqTgpq7gpr7gpqgg4Kah4Ka/4Kat4Ka+4KaH4Ka44KeHIOCmsOCmv+CmruCnh+CmruCnjeCmrOCmvuCmsCDgpq7gpr8g4Kao4Ka/4Ka34KeN4KaV4KeN4Kaw4Ka/4Kav4Ka8IOCmleCmsOCmviDgprngpq/gprzgp4fgppvgp4cnLFxyXG4gICAgICAgIGFsbERldmljZXM6IGZhbHNlLFxyXG4gICAgICAgIGRlc3Ryb3llZENvdW50OiAxXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRGlzYWJsZSByZW1lbWJlciBtZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGRpc2FibGUgcmVtZW1iZXIgbWUnLFxyXG4gICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgbWVzc2FnZUJuOiAn4Kaw4Ka/4Kau4KeH4Kau4KeN4Kas4Ka+4KawIOCmruCmvyDgpqjgpr/gprfgp43gppXgp43gprDgpr/gpq/gprwg4KaV4Kaw4Kak4KeHIOCmrOCnjeCmr+CmsOCnjeCmpSDgprngpq/gprzgp4fgppvgp4cnXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFQyxJQUFJO0VBQUVDO0FBQWlCLENBQUMsR0FBR0YsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQy9ELE1BQU1HLE1BQU0sR0FBR0gsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNsQyxNQUFNSSxHQUFHLEdBQUdKLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDbkMsTUFBTTtFQUFFSztBQUFhLENBQUMsR0FBR0wsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ2xELE1BQU07RUFBRU07QUFBYSxDQUFDLEdBQUdOLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQztBQUM1RCxNQUFNO0VBQUVPO0FBQVcsQ0FBQyxHQUFHUCxPQUFPLENBQUMsd0JBQXdCLENBQUM7QUFDeEQsTUFBTTtFQUFFUTtBQUFXLENBQUMsR0FBR1IsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBQ3hELE1BQU07RUFBRVM7QUFBZSxDQUFDLEdBQUdULE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUN4RCxNQUFNO0VBQUVVO0FBQWtCLENBQUMsR0FBR1YsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQzlELE1BQU07RUFBRVc7QUFBZSxDQUFDLEdBQUdYLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUNoRSxNQUFNO0VBQUVZO0FBQWdCLENBQUMsR0FBR1osT0FBTyxDQUFDLDZCQUE2QixDQUFDO0FBQ2xFLE1BQU07RUFBRWE7QUFBdUIsQ0FBQyxHQUFHYixPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDaEYsTUFBTTtFQUFFYztBQUFjLENBQUMsR0FBR2QsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQ3ZELE1BQU07RUFBRWU7QUFBYyxDQUFDLEdBQUdmLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUN2RCxNQUFNO0VBQUVnQjtBQUFxQixDQUFDLEdBQUdoQixPQUFPLENBQUMsa0NBQWtDLENBQUM7QUFDNUUsTUFBTTtFQUFFaUI7QUFBd0IsQ0FBQyxHQUFHakIsT0FBTyxDQUFDLDZCQUE2QixDQUFDO0FBRTFFLE1BQU1rQixNQUFNLEdBQUduQixPQUFPLENBQUNvQixNQUFNLENBQUMsQ0FBQztBQUMvQixNQUFNQyxNQUFNLEdBQUcsSUFBSWYsWUFBWSxDQUFDLENBQUM7O0FBRWpDO0FBQ0EsTUFBTWdCLHNCQUFzQixHQUFHQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ2pELE1BQU1DLE1BQU0sR0FBR3ZCLGdCQUFnQixDQUFDb0IsR0FBRyxDQUFDO0VBQ3BDLElBQUksQ0FBQ0csTUFBTSxDQUFDQyxPQUFPLENBQUMsQ0FBQyxFQUFFO0lBQ3JCLE9BQU9ILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDMUJDLEtBQUssRUFBRSxtQkFBbUI7TUFDMUJDLE9BQU8sRUFBRUwsTUFBTSxDQUFDTSxLQUFLLENBQUM7SUFDeEIsQ0FBQyxDQUFDO0VBQ0o7RUFDQVAsSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDOztBQUVEO0FBQ0FOLE1BQU0sQ0FBQ2MsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUN2Qi9CLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQ2dDLFFBQVEsQ0FBQyxDQUFDLENBQUNDLE9BQU8sQ0FBQyxDQUFDLENBQUNDLGNBQWMsQ0FBQyxDQUFDLEVBQ25EbEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDbUMsUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxFQUMvQ3JDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQ2dDLFFBQVEsQ0FBQyxDQUFDLENBQUNNLFFBQVEsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLEVBQzlDdkMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDZ0MsUUFBUSxDQUFDLENBQUMsQ0FBQ00sUUFBUSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsRUFDN0N2QyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUNnQyxRQUFRLENBQUMsQ0FBQyxDQUFDTSxRQUFRLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUMxQ3ZDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQ2dDLFFBQVEsQ0FBQyxDQUFDLENBQUNNLFFBQVEsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLEVBQzFDdkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDZ0MsUUFBUSxDQUFDLENBQUMsQ0FBQ00sUUFBUSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsRUFDMUN2QyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUNnQyxRQUFRLENBQUMsQ0FBQyxDQUFDTSxRQUFRLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUNoRHZDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FDMUMsRUFBRW5CLHNCQUFzQixFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzdDLElBQUk7SUFDSixNQUFNO01BQ0prQixLQUFLO01BQ0xDLFFBQVE7TUFDUkMsU0FBUztNQUNUQyxRQUFRO01BQ1JDLEtBQUs7TUFDTEMsS0FBSztNQUNMQyxLQUFLO01BQ0xDLFdBQVc7TUFDWEM7SUFDRixDQUFDLEdBQUczQixHQUFHLENBQUNyQixJQUFJOztJQUVaO0lBQ0EsTUFBTWlELGNBQWMsR0FBR1AsU0FBUyxJQUFJRSxLQUFLO0lBQ3pDLE1BQU1NLGFBQWEsR0FBR1AsUUFBUSxJQUFJRSxLQUFLO0lBQ3ZDLE1BQU1NLFVBQVUsR0FBR0wsS0FBSyxJQUFJQyxXQUFXOztJQUV2QztJQUNBLElBQUksQ0FBQ1AsS0FBSyxJQUFJLENBQUNXLFVBQVUsRUFBRTtNQUN6QixPQUFPN0IsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLHlCQUF5QjtRQUNoQ3dCLE9BQU8sRUFBRSw4REFBOEQ7UUFDdkVDLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsSUFBSVosUUFBUSxLQUFLTyxlQUFlLEVBQUU7TUFDaEMsT0FBTzFCLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSx3QkFBd0I7UUFDL0J3QixPQUFPLEVBQUUsMENBQTBDO1FBQ25EQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjs7SUFHQTtJQUNBLE1BQU1DLFFBQVEsR0FBRztNQUFFWixTQUFTLEVBQUVPLGNBQWM7TUFBRU4sUUFBUSxFQUFFTyxhQUFhO01BQUVWLEtBQUs7TUFBRU0sS0FBSyxFQUFFSztJQUFXLENBQUM7SUFDakcsTUFBTUksa0JBQWtCLEdBQUc1QyxlQUFlLENBQUM2Qyx3QkFBd0IsQ0FBQ2YsUUFBUSxFQUFFYSxRQUFRLENBQUM7SUFFdkYsSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ0UsT0FBTyxFQUFFO01BQy9CLE9BQU9uQyxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUscUNBQXFDO1FBQzVDd0IsT0FBTyxFQUFFLDZEQUE2RDtRQUN0RUMsU0FBUyxFQUFFLHdDQUF3QztRQUNuRHhCLE9BQU8sRUFBRTtVQUNQNkIsUUFBUSxFQUFFSCxrQkFBa0IsQ0FBQ0csUUFBUTtVQUNyQ0MsS0FBSyxFQUFFSixrQkFBa0IsQ0FBQ0ksS0FBSztVQUMvQkMsUUFBUSxFQUFFTCxrQkFBa0IsQ0FBQ0ssUUFBUTtVQUNyQ0MsUUFBUSxFQUFFTixrQkFBa0IsQ0FBQ00sUUFBUTtVQUNyQ0MsV0FBVyxFQUFFUCxrQkFBa0IsQ0FBQ08sV0FBVztVQUMzQ0MsY0FBYyxFQUFFcEQsZUFBZSxDQUFDcUQsaUJBQWlCLENBQUM7UUFDcEQ7TUFDRixDQUFDLENBQUM7SUFDSjs7SUFFRTtJQUNBLElBQUl4QixLQUFLLEVBQUU7TUFDVCxJQUFJLENBQUNuQyxZQUFZLENBQUM0RCxhQUFhLENBQUN6QixLQUFLLENBQUMsRUFBRTtRQUN0QyxPQUFPbEIsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUMxQkMsS0FBSyxFQUFFLHNCQUFzQjtVQUM3QndCLE9BQU8sRUFBRSxzQ0FBc0M7VUFDL0NDLFNBQVMsRUFBRTtRQUNiLENBQUMsQ0FBQztNQUNKO01BRUEsSUFBSWhELFlBQVksQ0FBQzZELGlCQUFpQixDQUFDMUIsS0FBSyxDQUFDLEVBQUU7UUFDekMsT0FBT2xCLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFDMUJDLEtBQUssRUFBRSw4QkFBOEI7VUFDckN3QixPQUFPLEVBQUUsdURBQXVEO1VBQ2hFQyxTQUFTLEVBQUU7UUFDYixDQUFDLENBQUM7TUFDSjtJQUNGOztJQUVBO0lBQ0EsSUFBSWMsZUFBZSxHQUFHLElBQUk7SUFDMUIsSUFBSWhCLFVBQVUsRUFBRTtNQUNkZ0IsZUFBZSxHQUFHdkQsc0JBQXNCLENBQUN3RCxrQkFBa0IsQ0FBQ2pCLFVBQVUsRUFBRSxjQUFjLENBQUM7TUFDdkYsSUFBSSxDQUFDZ0IsZUFBZSxDQUFDVixPQUFPLEVBQUU7UUFDNUIsT0FBT25DLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFDMUJDLEtBQUssRUFBRSxzQkFBc0I7VUFDN0J3QixPQUFPLEVBQUVlLGVBQWUsQ0FBQ3ZDLEtBQUs7VUFDOUJ5QixTQUFTLEVBQUVjLGVBQWUsQ0FBQ0UsT0FBTztVQUNsQ0MsSUFBSSxFQUFFSCxlQUFlLENBQUNHO1FBQ3hCLENBQUMsQ0FBQztNQUNKO0lBQ0Y7O0lBRUE7SUFDQSxNQUFNQyxZQUFZLEdBQUcsTUFBTXBELE1BQU0sQ0FBQ3FELElBQUksQ0FBQ0MsU0FBUyxDQUFDO01BQy9DQyxLQUFLLEVBQUU7UUFDTEMsRUFBRSxFQUFFLENBQ0YsSUFBSW5DLEtBQUssR0FBRyxDQUFDO1VBQUVBO1FBQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQzdCLElBQUkyQixlQUFlLEVBQUVWLE9BQU8sR0FBRyxDQUFDO1VBQUVYLEtBQUssRUFBRXFCLGVBQWUsQ0FBQ1M7UUFBZ0IsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO01BRXJGO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsSUFBSUwsWUFBWSxFQUFFO01BQ2hCLE9BQU9qRCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUscUJBQXFCO1FBQzVCd0IsT0FBTyxFQUFFLDJEQUEyRDtRQUNwRUMsU0FBUyxFQUFFLG9EQUFvRDtRQUMvRHdCLEtBQUssRUFBRU4sWUFBWSxDQUFDL0IsS0FBSyxLQUFLQSxLQUFLLEdBQUcsT0FBTyxHQUFHO01BQ2xELENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTXNDLGNBQWMsR0FBRyxNQUFNbkUsZUFBZSxDQUFDb0UsWUFBWSxDQUFDdEMsUUFBUSxDQUFDOztJQUVuRTtJQUNBLE1BQU0rQixJQUFJLEdBQUcsTUFBTXJELE1BQU0sQ0FBQ3FELElBQUksQ0FBQ1EsTUFBTSxDQUFDO01BQ3BDQyxJQUFJLEVBQUU7UUFDSnpDLEtBQUs7UUFDTEMsUUFBUSxFQUFFcUMsY0FBYztRQUN4QnBDLFNBQVMsRUFBRU8sY0FBYztRQUN6Qk4sUUFBUSxFQUFFTyxhQUFhO1FBQ3ZCSixLQUFLLEVBQUVxQixlQUFlLEVBQUVTLGVBQWUsSUFBSXpCLFVBQVU7UUFDckQrQixJQUFJLEVBQUUsVUFBVTtRQUNoQnhELE1BQU0sRUFBRTtNQUNWLENBQUM7TUFDRHlELE1BQU0sRUFBRTtRQUNOQyxFQUFFLEVBQUUsSUFBSTtRQUNSNUMsS0FBSyxFQUFFLElBQUk7UUFDWEUsU0FBUyxFQUFFLElBQUk7UUFDZkMsUUFBUSxFQUFFLElBQUk7UUFDZEcsS0FBSyxFQUFFLElBQUk7UUFDWG9DLElBQUksRUFBRSxJQUFJO1FBQ1Z4RCxNQUFNLEVBQUUsSUFBSTtRQUNaMkQsU0FBUyxFQUFFO01BQ2I7SUFDRixDQUFDLENBQUM7O0lBRUY7SUFDQSxNQUFNMUUsZUFBZSxDQUFDMkUscUJBQXFCLENBQUNkLElBQUksQ0FBQ1ksRUFBRSxFQUFFTixjQUFjLENBQUM7O0lBRXBFO0lBQ0EsTUFBTVMsYUFBYSxHQUFHMUUsYUFBYSxDQUFDMEUsYUFBYSxDQUFDLENBQUM7SUFDbkQsTUFBTUMsMkJBQTJCLEdBQUczRSxhQUFhLENBQUMyRSwyQkFBMkIsQ0FBQyxDQUFDO0lBQy9FLE1BQU1DLDJCQUEyQixHQUFHNUUsYUFBYSxDQUFDNEUsMkJBQTJCLENBQUMsQ0FBQzs7SUFFL0U7SUFDQSxJQUFJakQsS0FBSyxJQUFJLENBQUNnRCwyQkFBMkIsRUFBRTtNQUN6QztNQUNBLE1BQU1FLGlCQUFpQixHQUFHckYsWUFBWSxDQUFDc0YseUJBQXlCLENBQUMsQ0FBQztNQUNsRSxNQUFNQyxTQUFTLEdBQUcsSUFBSUMsSUFBSSxDQUFDQSxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQzs7TUFFOUQ7TUFDQSxNQUFNM0UsTUFBTSxDQUFDNEUsc0JBQXNCLENBQUNmLE1BQU0sQ0FBQztRQUN6Q0MsSUFBSSxFQUFFO1VBQ0plLE1BQU0sRUFBRXhCLElBQUksQ0FBQ1ksRUFBRTtVQUNmYSxLQUFLLEVBQUVQLGlCQUFpQjtVQUN4QkU7UUFDRjtNQUNGLENBQUMsQ0FBQzs7TUFFRjtNQUNBLE1BQU1NLFdBQVcsR0FBRyxNQUFNN0YsWUFBWSxDQUFDOEYscUJBQXFCLENBQzFEM0QsS0FBSyxFQUNMLEdBQUdFLFNBQVMsSUFBSUMsUUFBUSxFQUFFLEVBQzFCK0MsaUJBQ0YsQ0FBQztNQUVELElBQUksQ0FBQ1EsV0FBVyxDQUFDRSxPQUFPLEVBQUU7UUFDeEI7UUFDQSxNQUFNakYsTUFBTSxDQUFDNEUsc0JBQXNCLENBQUNNLE1BQU0sQ0FBQztVQUN6QzNCLEtBQUssRUFBRTtZQUFFc0IsTUFBTSxFQUFFeEIsSUFBSSxDQUFDWTtVQUFHO1FBQzNCLENBQUMsQ0FBQztRQUNGLE1BQU1qRSxNQUFNLENBQUNxRCxJQUFJLENBQUM2QixNQUFNLENBQUM7VUFDdkIzQixLQUFLLEVBQUU7WUFBRVUsRUFBRSxFQUFFWixJQUFJLENBQUNZO1VBQUc7UUFDdkIsQ0FBQyxDQUFDO1FBRUYsT0FBTzlELEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFDMUJDLEtBQUssRUFBRSxxQkFBcUI7VUFDNUJ3QixPQUFPLEVBQUUsNERBQTREO1VBQ3JFQyxTQUFTLEVBQUU7UUFDYixDQUFDLENBQUM7TUFDSjtNQUVBL0IsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUNuQnlCLE9BQU8sRUFBRSwwRUFBMEU7UUFDbkZDLFNBQVMsRUFBRSw4REFBOEQ7UUFDekVtQixJQUFJLEVBQUU7VUFDSlksRUFBRSxFQUFFWixJQUFJLENBQUNZLEVBQUU7VUFDWDVDLEtBQUssRUFBRWdDLElBQUksQ0FBQ2hDLEtBQUs7VUFDakJFLFNBQVMsRUFBRThCLElBQUksQ0FBQzlCLFNBQVM7VUFDekJDLFFBQVEsRUFBRTZCLElBQUksQ0FBQzdCLFFBQVE7VUFDdkJ1QyxJQUFJLEVBQUVWLElBQUksQ0FBQ1UsSUFBSTtVQUNmeEQsTUFBTSxFQUFFOEMsSUFBSSxDQUFDOUM7UUFDZixDQUFDO1FBQ0Q0RSx5QkFBeUIsRUFBRTtNQUM3QixDQUFDLENBQUM7SUFFSixDQUFDLE1BQU0sSUFBSW5DLGVBQWUsRUFBRVYsT0FBTyxJQUFJLENBQUNnQywyQkFBMkIsRUFBRTtNQUNuRTtNQUNBLE1BQU1jLFNBQVMsR0FBRyxNQUFNaEcsVUFBVSxDQUFDaUcsZ0JBQWdCLENBQUNyQyxlQUFlLENBQUNTLGVBQWUsRUFBRUosSUFBSSxDQUFDWSxFQUFFLENBQUM7TUFFN0YsSUFBSSxDQUFDbUIsU0FBUyxDQUFDSCxPQUFPLEVBQUU7UUFDdEI7UUFDQSxNQUFNakYsTUFBTSxDQUFDcUQsSUFBSSxDQUFDNkIsTUFBTSxDQUFDO1VBQ3ZCM0IsS0FBSyxFQUFFO1lBQUVVLEVBQUUsRUFBRVosSUFBSSxDQUFDWTtVQUFHO1FBQ3ZCLENBQUMsQ0FBQztRQUVGLE9BQU85RCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQzFCQyxLQUFLLEVBQUUscUJBQXFCO1VBQzVCd0IsT0FBTyxFQUFFbUQsU0FBUyxDQUFDM0UsS0FBSyxJQUFJLDZDQUE2QztVQUN6RXlCLFNBQVMsRUFBRWtELFNBQVMsQ0FBQ2xDLE9BQU8sSUFBSTtRQUNsQyxDQUFDLENBQUM7TUFDSjtNQUVBL0MsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUNuQnlCLE9BQU8sRUFBRSx3RUFBd0U7UUFDakZDLFNBQVMsRUFBRSx1REFBdUQ7UUFDbEVtQixJQUFJLEVBQUU7VUFDSlksRUFBRSxFQUFFWixJQUFJLENBQUNZLEVBQUU7VUFDWHRDLEtBQUssRUFBRTBCLElBQUksQ0FBQzFCLEtBQUs7VUFDakJKLFNBQVMsRUFBRThCLElBQUksQ0FBQzlCLFNBQVM7VUFDekJDLFFBQVEsRUFBRTZCLElBQUksQ0FBQzdCLFFBQVE7VUFDdkJ1QyxJQUFJLEVBQUVWLElBQUksQ0FBQ1UsSUFBSTtVQUNmeEQsTUFBTSxFQUFFOEMsSUFBSSxDQUFDOUM7UUFDZixDQUFDO1FBQ0QrRSx5QkFBeUIsRUFBRSxJQUFJO1FBQy9CM0QsS0FBSyxFQUFFcUIsZUFBZSxDQUFDUyxlQUFlO1FBQ3RDOEIsUUFBUSxFQUFFdkMsZUFBZSxDQUFDdUMsUUFBUTtRQUNsQ0MsZUFBZSxFQUFFeEMsZUFBZSxDQUFDd0M7TUFDbkMsQ0FBQyxDQUFDO0lBRUosQ0FBQyxNQUFNO01BQ0w7TUFDQSxNQUFNQyxXQUFXLEdBQUcsTUFBTXpGLE1BQU0sQ0FBQ3FELElBQUksQ0FBQ3FDLE1BQU0sQ0FBQztRQUMzQ25DLEtBQUssRUFBRTtVQUFFVSxFQUFFLEVBQUVaLElBQUksQ0FBQ1k7UUFBRyxDQUFDO1FBQ3RCSCxJQUFJLEVBQUU7VUFDSnZELE1BQU0sRUFBRSxRQUFRO1VBQ2hCb0YsYUFBYSxFQUFFdEUsS0FBSyxHQUFHLElBQUlxRCxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUk7VUFDeENrQixhQUFhLEVBQUU1QyxlQUFlLEVBQUVWLE9BQU8sR0FBRyxJQUFJb0MsSUFBSSxDQUFDLENBQUMsR0FBRztRQUN6RCxDQUFDO1FBQ0RWLE1BQU0sRUFBRTtVQUNOQyxFQUFFLEVBQUUsSUFBSTtVQUNSNUMsS0FBSyxFQUFFLElBQUk7VUFDWEUsU0FBUyxFQUFFLElBQUk7VUFDZkMsUUFBUSxFQUFFLElBQUk7VUFDZEcsS0FBSyxFQUFFLElBQUk7VUFDWG9DLElBQUksRUFBRSxJQUFJO1VBQ1Z4RCxNQUFNLEVBQUUsSUFBSTtVQUNab0YsYUFBYSxFQUFFLElBQUk7VUFDbkJDLGFBQWEsRUFBRTtRQUNqQjtNQUNGLENBQUMsQ0FBQztNQUVGekYsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUNuQnlCLE9BQU8sRUFBRW1DLGFBQWEsR0FDbEIsOEVBQThFLEdBQzlFLHFFQUFxRTtRQUN6RWxDLFNBQVMsRUFBRWtDLGFBQWEsR0FDcEIsdUVBQXVFLEdBQ3ZFLHlEQUF5RDtRQUM3RGYsSUFBSSxFQUFFb0MsV0FBVztRQUNqQkksV0FBVyxFQUFFekIsYUFBYTtRQUMxQjBCLG1CQUFtQixFQUFFO01BQ3ZCLENBQUMsQ0FBQztJQUNKO0VBRUYsQ0FBQyxDQUFDLE9BQU9yRixLQUFLLEVBQUU7SUFDZHNGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyxxQkFBcUIsRUFBRUEsS0FBSyxDQUFDO0lBQzNDTixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxLQUFLLEVBQUUscUJBQXFCO01BQzVCd0IsT0FBTyxFQUFFK0QsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxhQUFhLEdBQUd6RixLQUFLLENBQUN3QixPQUFPLEdBQUcsdUJBQXVCO01BQ3pGQyxTQUFTLEVBQUU7SUFDYixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBcEMsTUFBTSxDQUFDYyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQ3BCL0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsRUFDcEN2QyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUNzQyxRQUFRLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUNsQ3ZDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQ2dDLFFBQVEsQ0FBQyxDQUFDLENBQUNzRixTQUFTLENBQUMsQ0FBQyxFQUN6Q3RILElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQ2dDLFFBQVEsQ0FBQyxDQUFDLENBQUN1RixRQUFRLENBQUMsQ0FBQyxFQUNyQ3ZILElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDZ0MsUUFBUSxDQUFDLENBQUMsQ0FBQ3VGLFFBQVEsQ0FBQyxDQUFDLENBQ2hELEVBQUVuRyxzQkFBc0IsRUFDdkJKLHVCQUF1QixDQUFDd0csT0FBTyxDQUFDLENBQUMsRUFDakMsT0FBT25HLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3BCLE1BQU07SUFBRW1HLFVBQVU7SUFBRWhGLFFBQVE7SUFBRWlGLFVBQVU7SUFBRUMsT0FBTztJQUFFQztFQUFrQixDQUFDLEdBQUd2RyxHQUFHLENBQUNyQixJQUFJO0VBRWpGLElBQUk7SUFFRjtJQUNBLE1BQU1pQyxPQUFPLEdBQUd3RixVQUFVLENBQUNJLFFBQVEsQ0FBQyxHQUFHLENBQUM7SUFDeEMsSUFBSXJELElBQUk7SUFDUixJQUFJc0QsU0FBUztJQUViLElBQUk3RixPQUFPLEVBQUU7TUFDWDtNQUNBLElBQUksQ0FBQzVCLFlBQVksQ0FBQzRELGFBQWEsQ0FBQ3dELFVBQVUsQ0FBQyxFQUFFO1FBQzNDLE9BQU9uRyxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQzFCQyxLQUFLLEVBQUUsc0JBQXNCO1VBQzdCd0IsT0FBTyxFQUFFLHNDQUFzQztVQUMvQ0MsU0FBUyxFQUFFO1FBQ2IsQ0FBQyxDQUFDO01BQ0o7O01BRUE7TUFDQW1CLElBQUksR0FBRyxNQUFNckQsTUFBTSxDQUFDcUQsSUFBSSxDQUFDdUQsVUFBVSxDQUFDO1FBQ2xDckQsS0FBSyxFQUFFO1VBQUVsQyxLQUFLLEVBQUVpRjtRQUFXO01BQzdCLENBQUMsQ0FBQztNQUNGSyxTQUFTLEdBQUcsT0FBTztJQUNyQixDQUFDLE1BQU07TUFDTDtNQUNBLE1BQU0zRCxlQUFlLEdBQUd2RCxzQkFBc0IsQ0FBQ3dELGtCQUFrQixDQUFDcUQsVUFBVSxFQUFFLE9BQU8sQ0FBQztNQUN0RixJQUFJLENBQUN0RCxlQUFlLENBQUNWLE9BQU8sRUFBRTtRQUM1QixPQUFPbkMsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUMxQkMsS0FBSyxFQUFFLHNCQUFzQjtVQUM3QndCLE9BQU8sRUFBRWUsZUFBZSxDQUFDdkMsS0FBSztVQUM5QnlCLFNBQVMsRUFBRWMsZUFBZSxDQUFDRSxPQUFPO1VBQ2xDQyxJQUFJLEVBQUVILGVBQWUsQ0FBQ0c7UUFDeEIsQ0FBQyxDQUFDO01BQ0o7O01BRUE7TUFDQUUsSUFBSSxHQUFHLE1BQU1yRCxNQUFNLENBQUNxRCxJQUFJLENBQUN1RCxVQUFVLENBQUM7UUFDbENyRCxLQUFLLEVBQUU7VUFBRTVCLEtBQUssRUFBRXFCLGVBQWUsQ0FBQ1M7UUFBZ0I7TUFDbEQsQ0FBQyxDQUFDO01BQ0ZrRCxTQUFTLEdBQUcsT0FBTztJQUNyQjtJQUVBLElBQUksQ0FBQ3RELElBQUksSUFBSSxDQUFDQSxJQUFJLENBQUMvQixRQUFRLEVBQUU7TUFDM0IsT0FBT25CLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSxxQkFBcUI7UUFDNUJ3QixPQUFPLEVBQUUsV0FBVzBFLFNBQVMsY0FBYztRQUMzQ3pFLFNBQVMsRUFBRXlFLFNBQVMsS0FBSyxPQUFPLEdBQUcseUJBQXlCLEdBQUc7TUFDakUsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNRSxlQUFlLEdBQUcsTUFBTTlILE1BQU0sQ0FBQytILE9BQU8sQ0FBQ3hGLFFBQVEsRUFBRStCLElBQUksQ0FBQy9CLFFBQVEsQ0FBQztJQUNyRSxJQUFJLENBQUN1RixlQUFlLEVBQUU7TUFDcEIsT0FBTzFHLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSxxQkFBcUI7UUFDNUJ3QixPQUFPLEVBQUUsV0FBVzBFLFNBQVMsY0FBYztRQUMzQ3pFLFNBQVMsRUFBRXlFLFNBQVMsS0FBSyxPQUFPLEdBQUcseUJBQXlCLEdBQUc7TUFDakUsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNdkMsYUFBYSxHQUFHMUUsYUFBYSxDQUFDMEUsYUFBYSxDQUFDLENBQUM7SUFDbkQsTUFBTUMsMkJBQTJCLEdBQUczRSxhQUFhLENBQUMyRSwyQkFBMkIsQ0FBQyxDQUFDO0lBQy9FLE1BQU1DLDJCQUEyQixHQUFHNUUsYUFBYSxDQUFDNEUsMkJBQTJCLENBQUMsQ0FBQztJQUUvRSxNQUFNeUMsb0JBQW9CLEdBQ3ZCSixTQUFTLEtBQUssT0FBTyxJQUFJLENBQUN0QywyQkFBMkIsSUFDckRzQyxTQUFTLEtBQUssT0FBTyxJQUFJLENBQUNyQywyQkFBNEI7SUFFekQsSUFBSWpCLElBQUksQ0FBQzlDLE1BQU0sS0FBSyxTQUFTLElBQUl3RyxvQkFBb0IsSUFBSSxDQUFDM0MsYUFBYSxFQUFFO01BQ3ZFLE1BQU00QyxtQkFBbUIsR0FBR0wsU0FBUyxLQUFLLE9BQU8sR0FDN0Msb0RBQW9ELEdBQ3BELG1EQUFtRDtNQUN2RCxNQUFNTSxxQkFBcUIsR0FBR04sU0FBUyxLQUFLLE9BQU8sR0FDL0MsK0JBQStCLEdBQy9CLG9DQUFvQztNQUV4QyxPQUFPeEcsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QndCLE9BQU8sRUFBRStFLG1CQUFtQjtRQUM1QjlFLFNBQVMsRUFBRStFLHFCQUFxQjtRQUNoQ0Ysb0JBQW9CLEVBQUUsSUFBSTtRQUMxQkcsZ0JBQWdCLEVBQUVQO01BQ3BCLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsSUFBSXRELElBQUksQ0FBQzlDLE1BQU0sS0FBSyxTQUFTLEtBQUs2RCxhQUFhLElBQUksQ0FBQzJDLG9CQUFvQixDQUFDLEVBQUU7TUFDekUsTUFBTS9HLE1BQU0sQ0FBQ3FELElBQUksQ0FBQ3FDLE1BQU0sQ0FBQztRQUN2Qm5DLEtBQUssRUFBRTtVQUFFVSxFQUFFLEVBQUVaLElBQUksQ0FBQ1k7UUFBRyxDQUFDO1FBQ3RCSCxJQUFJLEVBQUU7VUFDSnZELE1BQU0sRUFBRSxRQUFRO1VBQ2hCb0YsYUFBYSxFQUFFZ0IsU0FBUyxLQUFLLE9BQU8sR0FBRyxJQUFJakMsSUFBSSxDQUFDLENBQUMsR0FBR3JCLElBQUksQ0FBQ3NDLGFBQWE7VUFDdEVDLGFBQWEsRUFBRWUsU0FBUyxLQUFLLE9BQU8sR0FBRyxJQUFJakMsSUFBSSxDQUFDLENBQUMsR0FBR3JCLElBQUksQ0FBQ3VDO1FBQzNEO01BQ0YsQ0FBQyxDQUFDOztNQUVGO01BQ0F2QyxJQUFJLEdBQUcsTUFBTXJELE1BQU0sQ0FBQ3FELElBQUksQ0FBQ3VELFVBQVUsQ0FBQztRQUNsQ3JELEtBQUssRUFBRTtVQUFFVSxFQUFFLEVBQUVaLElBQUksQ0FBQ1k7UUFBRyxDQUFDO1FBQ3RCRCxNQUFNLEVBQUU7VUFDTkMsRUFBRSxFQUFFLElBQUk7VUFDUjVDLEtBQUssRUFBRSxJQUFJO1VBQ1hNLEtBQUssRUFBRSxJQUFJO1VBQ1hKLFNBQVMsRUFBRSxJQUFJO1VBQ2ZDLFFBQVEsRUFBRSxJQUFJO1VBQ2R1QyxJQUFJLEVBQUUsSUFBSTtVQUNWeEQsTUFBTSxFQUFFLElBQUk7VUFDWm9GLGFBQWEsRUFBRSxJQUFJO1VBQ25CQyxhQUFhLEVBQUU7UUFDakI7TUFDRixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLE1BQU01RixNQUFNLENBQUNxRCxJQUFJLENBQUNxQyxNQUFNLENBQUM7TUFDdkJuQyxLQUFLLEVBQUU7UUFBRVUsRUFBRSxFQUFFWixJQUFJLENBQUNZO01BQUcsQ0FBQztNQUN0QkgsSUFBSSxFQUFFO1FBQUVxRCxXQUFXLEVBQUUsSUFBSXpDLElBQUksQ0FBQztNQUFFO0lBQ2xDLENBQUMsQ0FBQzs7SUFFRjtJQUNBLE1BQU0wQyxhQUFhLEdBQUcsTUFBTTdILGNBQWMsQ0FBQzhILGFBQWEsQ0FBQ2hFLElBQUksQ0FBQ1ksRUFBRSxFQUFFL0QsR0FBRyxFQUFFO01BQ3JFeUcsU0FBUztNQUNUSixVQUFVLEVBQUVBLFVBQVUsSUFBSSxLQUFLO01BQy9CZSxNQUFNLEVBQUVmLFVBQVUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztJQUNyRSxDQUFDLENBQUM7SUFFRixJQUFJLENBQUNhLGFBQWEsQ0FBQ0csU0FBUyxFQUFFO01BQzVCLE9BQU9wSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsY0FBYztRQUNyQndCLE9BQU8sRUFBRSwwQkFBMEI7UUFDbkNDLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0E1QyxpQkFBaUIsQ0FBQ2tJLGdCQUFnQixDQUFDckgsR0FBRyxFQUFFaUgsYUFBYSxDQUFDRyxTQUFTLEVBQUU7TUFDL0RELE1BQU0sRUFBRUYsYUFBYSxDQUFDRSxNQUFNO01BQzVCZixVQUFVLEVBQUVBLFVBQVUsSUFBSTtJQUM1QixDQUFDLENBQUM7O0lBRUY7SUFDQSxNQUFNa0IsY0FBYyxHQUFHbkksaUJBQWlCLENBQUNtSSxjQUFjLENBQUNMLGFBQWEsQ0FBQztJQUN0RU0sTUFBTSxDQUFDQyxJQUFJLENBQUNGLGNBQWMsQ0FBQyxDQUFDRyxPQUFPLENBQUNDLEdBQUcsSUFBSTtNQUN6QzFILEdBQUcsQ0FBQzJILEdBQUcsQ0FBQ0QsR0FBRyxFQUFFSixjQUFjLENBQUNJLEdBQUcsQ0FBQyxDQUFDO0lBQ25DLENBQUMsQ0FBQzs7SUFFRjtJQUNBLE1BQU1FLGNBQWMsR0FBRy9CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDK0IsVUFBVTtJQUM3QyxJQUFJLENBQUNELGNBQWMsRUFBRTtNQUNuQixNQUFNLElBQUlFLEtBQUssQ0FBQyw2Q0FBNkMsQ0FBQztJQUNoRTtJQUVBLE1BQU1uRCxLQUFLLEdBQUc5RixHQUFHLENBQUNrSixJQUFJLENBQ3BCO01BQ0VyRCxNQUFNLEVBQUV4QixJQUFJLENBQUNZLEVBQUU7TUFDZjVDLEtBQUssRUFBRWdDLElBQUksQ0FBQ2hDLEtBQUs7TUFDakJNLEtBQUssRUFBRTBCLElBQUksQ0FBQzFCLEtBQUs7TUFDakJvQyxJQUFJLEVBQUVWLElBQUksQ0FBQ1UsSUFBSTtNQUNmd0QsU0FBUyxFQUFFSCxhQUFhLENBQUNHO0lBQzNCLENBQUMsRUFDRFEsY0FBYyxFQUNkO01BQUVJLFNBQVMsRUFBRW5DLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDbUMsY0FBYyxJQUFJO0lBQU0sQ0FBQyxDQUFDO0lBQ3JELENBQUM7O0lBR0Q7SUFDQSxPQUFPdkksdUJBQXVCLENBQUN3SSxxQkFBcUIsQ0FBQ25JLEdBQUcsRUFBRTtNQUFFK0QsRUFBRSxFQUFFWixJQUFJLENBQUNZO0lBQUcsQ0FBQyxFQUFFLENBQUMvRCxHQUFHLEVBQUVDLEdBQUcsS0FBSztNQUN2RkEsR0FBRyxDQUFDSyxJQUFJLENBQUM7UUFDUHlCLE9BQU8sRUFBRSxrQkFBa0I7UUFDM0JDLFNBQVMsRUFBRSxVQUFVO1FBQ3JCbUIsSUFBSSxFQUFFO1VBQ0pZLEVBQUUsRUFBRVosSUFBSSxDQUFDWSxFQUFFO1VBQ1g1QyxLQUFLLEVBQUVnQyxJQUFJLENBQUNoQyxLQUFLO1VBQ2pCTSxLQUFLLEVBQUUwQixJQUFJLENBQUMxQixLQUFLO1VBQ2pCSixTQUFTLEVBQUU4QixJQUFJLENBQUM5QixTQUFTO1VBQ3pCQyxRQUFRLEVBQUU2QixJQUFJLENBQUM3QixRQUFRO1VBQ3ZCdUMsSUFBSSxFQUFFVixJQUFJLENBQUNVLElBQUk7VUFDZnhELE1BQU0sRUFBRThDLElBQUksQ0FBQzlDO1FBQ2YsQ0FBQztRQUNEdUUsS0FBSztRQUFFO1FBQ1B5QyxTQUFTLEVBQUVILGFBQWEsQ0FBQ0csU0FBUztRQUNsQzlDLFNBQVMsRUFBRTJDLGFBQWEsQ0FBQzNDLFNBQVM7UUFDbEM2QyxNQUFNLEVBQUVGLGFBQWEsQ0FBQ0UsTUFBTTtRQUM1QlgsU0FBUztRQUNUSixVQUFVLEVBQUVBLFVBQVUsSUFBSSxLQUFLO1FBQy9CK0IsZUFBZSxFQUFFcEksR0FBRyxDQUFDb0k7TUFDdkIsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU83SCxLQUFLLEVBQUU7SUFDZHNGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyxjQUFjLEVBQUVBLEtBQUssQ0FBQztJQUNwQ3NGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyxzQkFBc0IsRUFBRTtNQUNwQzhILElBQUksRUFBRTlILEtBQUssQ0FBQzhILElBQUk7TUFDaEJ0RyxPQUFPLEVBQUV4QixLQUFLLENBQUN3QixPQUFPO01BQ3RCdUcsS0FBSyxFQUFFL0gsS0FBSyxDQUFDK0g7SUFDZixDQUFDLENBQUM7O0lBRUY7SUFDQXRJLEdBQUcsQ0FBQ3VJLFNBQVMsR0FBRyxjQUFjO0lBQzlCLE9BQU81SSx1QkFBdUIsQ0FBQzZJLGlCQUFpQixDQUFDLENBQUMsQ0FBQ3hJLEdBQUcsRUFBRUMsR0FBRyxFQUFFLE1BQU07TUFDakVBLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDbkJDLEtBQUssRUFBRSxjQUFjO1FBQ3JCd0IsT0FBTyxFQUFFK0QsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxhQUFhLEdBQUd6RixLQUFLLENBQUN3QixPQUFPLEdBQUcsdUJBQXVCO1FBQ3pGQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBLGVBQWV5RyxlQUFlQSxDQUFDbkMsT0FBTyxFQUFFb0MsRUFBRSxFQUFFO0VBQzFDO0VBQ0E7RUFDQSxPQUFPLElBQUk7QUFDYjs7QUFFQTtBQUNBOUksTUFBTSxDQUFDYyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQ3JCL0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDZ0MsUUFBUSxDQUFDLENBQUMsQ0FBQ3NGLFNBQVMsQ0FBQyxDQUFDLENBQzFDLEVBQUUsT0FBT2pHLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3JCLElBQUk7SUFDRixNQUFNO01BQUUwSTtJQUFXLENBQUMsR0FBRzNJLEdBQUcsQ0FBQ3JCLElBQUk7SUFDL0IsTUFBTTBJLFNBQVMsR0FBR2pJLGlCQUFpQixDQUFDd0osWUFBWSxDQUFDNUksR0FBRyxDQUFDO0lBRXJELElBQUksQ0FBQ3FILFNBQVMsRUFBRTtNQUNkLE9BQU9wSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsa0JBQWtCO1FBQ3pCd0IsT0FBTyxFQUFFLDZCQUE2QjtRQUN0Q0MsU0FBUyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNNkcsVUFBVSxHQUFHLE1BQU14SixjQUFjLENBQUN5SixlQUFlLENBQUN6QixTQUFTLEVBQUVySCxHQUFHLENBQUM7SUFFdkUsSUFBSSxDQUFDNkksVUFBVSxDQUFDRSxLQUFLLEVBQUU7TUFDckI7TUFDQTNKLGlCQUFpQixDQUFDNEosa0JBQWtCLENBQUMvSSxHQUFHLENBQUM7TUFFekMsT0FBT0EsR0FBRyxDQUFDSyxJQUFJLENBQUM7UUFDZHlCLE9BQU8sRUFBRSxtQkFBbUI7UUFDNUJDLFNBQVMsRUFBRSxXQUFXO1FBQ3RCaUgsY0FBYyxFQUFFO01BQ2xCLENBQUMsQ0FBQztJQUNKO0lBRUEsSUFBSUMsTUFBTTtJQUNWLElBQUlQLFVBQVUsRUFBRTtNQUNkO01BQ0FPLE1BQU0sR0FBRyxNQUFNN0osY0FBYyxDQUFDOEosc0JBQXNCLENBQUNOLFVBQVUsQ0FBQ2xFLE1BQU0sRUFBRTBDLFNBQVMsQ0FBQztJQUNwRixDQUFDLE1BQU07TUFDTDtNQUNBNkIsTUFBTSxHQUFHLE1BQU03SixjQUFjLENBQUMrSixjQUFjLENBQUMvQixTQUFTLEVBQUUsYUFBYSxDQUFDO0lBQ3hFO0lBRUEsSUFBSSxDQUFDNkIsTUFBTSxDQUFDbkUsT0FBTyxFQUFFO01BQ25CLE9BQU85RSxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsZUFBZTtRQUN0QndCLE9BQU8sRUFBRW1ILE1BQU0sQ0FBQ0csTUFBTTtRQUN0QnJILFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0E1QyxpQkFBaUIsQ0FBQzRKLGtCQUFrQixDQUFDL0ksR0FBRyxDQUFDO0lBRXpDQSxHQUFHLENBQUNLLElBQUksQ0FBQztNQUNQeUIsT0FBTyxFQUFFLG1CQUFtQjtNQUM1QkMsU0FBUyxFQUFFLFdBQVc7TUFDdEIyRyxVQUFVLEVBQUVBLFVBQVUsSUFBSSxLQUFLO01BQy9CVyxjQUFjLEVBQUVYLFVBQVUsR0FBR08sTUFBTSxDQUFDSSxjQUFjLEdBQUc7SUFDdkQsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU8vSSxLQUFLLEVBQUU7SUFDZHNGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyxlQUFlLEVBQUVBLEtBQUssQ0FBQztJQUNyQ04sR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNuQkMsS0FBSyxFQUFFLGVBQWU7TUFDdEJ3QixPQUFPLEVBQUUrRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLGFBQWEsR0FBR3pGLEtBQUssQ0FBQ3dCLE9BQU8sR0FBRyx1QkFBdUI7TUFDekZDLFNBQVMsRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FwQyxNQUFNLENBQUNjLElBQUksQ0FBQyxVQUFVLEVBQUUsT0FBT1YsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDMUMsSUFBSTtJQUNGLE1BQU07TUFBRTJFO0lBQU0sQ0FBQyxHQUFHNUUsR0FBRyxDQUFDckIsSUFBSTtJQUUxQixJQUFJLENBQUNpRyxLQUFLLEVBQUU7TUFDVixPQUFPM0UsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLGdCQUFnQjtRQUN2QnlCLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTXVILGdCQUFnQixHQUFHekQsT0FBTyxDQUFDQyxHQUFHLENBQUMrQixVQUFVO0lBQy9DLElBQUksQ0FBQ3lCLGdCQUFnQixFQUFFO01BQ3JCLE1BQU0sSUFBSXhCLEtBQUssQ0FBQyw2Q0FBNkMsQ0FBQztJQUNoRTtJQUVBLE1BQU15QixPQUFPLEdBQUcxSyxHQUFHLENBQUMySyxNQUFNLENBQUM3RSxLQUFLLEVBQUUyRSxnQkFBZ0IsQ0FBQzs7SUFFbkQ7SUFDQSxNQUFNcEcsSUFBSSxHQUFHLE1BQU1yRCxNQUFNLENBQUNxRCxJQUFJLENBQUN1RCxVQUFVLENBQUM7TUFDeENyRCxLQUFLLEVBQUU7UUFBRVUsRUFBRSxFQUFFeUYsT0FBTyxDQUFDN0U7TUFBTyxDQUFDO01BQzdCYixNQUFNLEVBQUU7UUFDTkMsRUFBRSxFQUFFLElBQUk7UUFDUjVDLEtBQUssRUFBRSxJQUFJO1FBQ1hFLFNBQVMsRUFBRSxJQUFJO1FBQ2ZDLFFBQVEsRUFBRSxJQUFJO1FBQ2R1QyxJQUFJLEVBQUUsSUFBSTtRQUNWeEQsTUFBTSxFQUFFO01BQ1Y7SUFDRixDQUFDLENBQUM7SUFFRixJQUFJLENBQUM4QyxJQUFJLEVBQUU7TUFDVCxPQUFPbEQsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLGdCQUFnQjtRQUN2QnlCLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTTBILFlBQVksR0FBRzVELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDK0IsVUFBVTtJQUMzQyxJQUFJLENBQUM0QixZQUFZLEVBQUU7TUFDakIsTUFBTSxJQUFJM0IsS0FBSyxDQUFDLDZDQUE2QyxDQUFDO0lBQ2hFO0lBRUEsTUFBTTRCLFFBQVEsR0FBRzdLLEdBQUcsQ0FBQ2tKLElBQUksQ0FDdkI7TUFBRXJELE1BQU0sRUFBRXhCLElBQUksQ0FBQ1ksRUFBRTtNQUFFNUMsS0FBSyxFQUFFZ0MsSUFBSSxDQUFDaEMsS0FBSztNQUFFMEMsSUFBSSxFQUFFVixJQUFJLENBQUNVO0lBQUssQ0FBQyxFQUN2RDZGLFlBQVksRUFDWjtNQUFFekIsU0FBUyxFQUFFbkMsT0FBTyxDQUFDQyxHQUFHLENBQUNtQyxjQUFjLElBQUk7SUFBSyxDQUNsRCxDQUFDO0lBRURqSSxHQUFHLENBQUNLLElBQUksQ0FBQztNQUNQeUIsT0FBTyxFQUFFLDhCQUE4QjtNQUN2Q0MsU0FBUyxFQUFFLGtCQUFrQjtNQUM3Qm1CLElBQUk7TUFDSnlCLEtBQUssRUFBRStFO0lBQ1QsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU9wSixLQUFLLEVBQUU7SUFDZHNGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyxzQkFBc0IsRUFBRUEsS0FBSyxDQUFDO0lBQzVDTixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxLQUFLLEVBQUUsZUFBZTtNQUN0QndCLE9BQU8sRUFBRStELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxHQUFHekYsS0FBSyxDQUFDd0IsT0FBTyxHQUFHLDBCQUEwQjtNQUM1RkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQXBDLE1BQU0sQ0FBQ2MsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUMzQi9CLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQ3NDLFFBQVEsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQ2hDLEVBQUVuQixzQkFBc0IsRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUM3QyxJQUFJO0lBQ0YsTUFBTTtNQUFFMkU7SUFBTSxDQUFDLEdBQUc1RSxHQUFHLENBQUNyQixJQUFJO0lBRTFCLElBQUksQ0FBQ2lHLEtBQUssRUFBRTtNQUNWLE9BQU8zRSxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsZ0JBQWdCO1FBQ3ZCd0IsT0FBTyxFQUFFLGdDQUFnQztRQUN6Q0MsU0FBUyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNcUMsaUJBQWlCLEdBQUcsTUFBTXZFLE1BQU0sQ0FBQzRFLHNCQUFzQixDQUFDZ0MsVUFBVSxDQUFDO01BQ3ZFckQsS0FBSyxFQUFFO1FBQUV1QjtNQUFNLENBQUM7TUFDaEJnRixPQUFPLEVBQUU7UUFDUHpHLElBQUksRUFBRTtNQUNSO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDa0IsaUJBQWlCLEVBQUU7TUFDdEIsT0FBT3BFLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSxlQUFlO1FBQ3RCd0IsT0FBTyxFQUFFLGdEQUFnRDtRQUN6REMsU0FBUyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxJQUFJcUMsaUJBQWlCLENBQUNFLFNBQVMsR0FBRyxJQUFJQyxJQUFJLENBQUMsQ0FBQyxFQUFFO01BQzVDO01BQ0EsTUFBTTFFLE1BQU0sQ0FBQzRFLHNCQUFzQixDQUFDTSxNQUFNLENBQUM7UUFDekMzQixLQUFLLEVBQUU7VUFBRVUsRUFBRSxFQUFFTSxpQkFBaUIsQ0FBQ047UUFBRztNQUNwQyxDQUFDLENBQUM7TUFFRixPQUFPOUQsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLGVBQWU7UUFDdEJ3QixPQUFPLEVBQUUsMkRBQTJEO1FBQ3BFQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLElBQUlxQyxpQkFBaUIsQ0FBQ2xCLElBQUksQ0FBQ3NDLGFBQWEsRUFBRTtNQUN4QyxPQUFPeEYsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLGtCQUFrQjtRQUN6QndCLE9BQU8sRUFBRSxpQ0FBaUM7UUFDMUNDLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTXVELFdBQVcsR0FBRyxNQUFNekYsTUFBTSxDQUFDcUQsSUFBSSxDQUFDcUMsTUFBTSxDQUFDO01BQzNDbkMsS0FBSyxFQUFFO1FBQUVVLEVBQUUsRUFBRU0saUJBQWlCLENBQUNNO01BQU8sQ0FBQztNQUN2Q2YsSUFBSSxFQUFFO1FBQ0p2RCxNQUFNLEVBQUUsUUFBUTtRQUNoQm9GLGFBQWEsRUFBRSxJQUFJakIsSUFBSSxDQUFDO01BQzFCLENBQUM7TUFDRFYsTUFBTSxFQUFFO1FBQ05DLEVBQUUsRUFBRSxJQUFJO1FBQ1I1QyxLQUFLLEVBQUUsSUFBSTtRQUNYRSxTQUFTLEVBQUUsSUFBSTtRQUNmQyxRQUFRLEVBQUUsSUFBSTtRQUNkdUMsSUFBSSxFQUFFLElBQUk7UUFDVnhELE1BQU0sRUFBRSxJQUFJO1FBQ1pvRixhQUFhLEVBQUU7TUFDakI7SUFDRixDQUFDLENBQUM7O0lBRUY7SUFDQSxNQUFNM0YsTUFBTSxDQUFDNEUsc0JBQXNCLENBQUNNLE1BQU0sQ0FBQztNQUN6QzNCLEtBQUssRUFBRTtRQUFFVSxFQUFFLEVBQUVNLGlCQUFpQixDQUFDTjtNQUFHO0lBQ3BDLENBQUMsQ0FBQzs7SUFFRjtJQUNBLE1BQU0vRSxZQUFZLENBQUM2SyxnQkFBZ0IsQ0FDakN4RixpQkFBaUIsQ0FBQ2xCLElBQUksQ0FBQ2hDLEtBQUssRUFDNUIsR0FBR2tELGlCQUFpQixDQUFDbEIsSUFBSSxDQUFDOUIsU0FBUyxJQUFJZ0QsaUJBQWlCLENBQUNsQixJQUFJLENBQUM3QixRQUFRLEVBQ3hFLENBQUM7SUFFRHJCLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO01BQ1B5QixPQUFPLEVBQUUsNkJBQTZCO01BQ3RDQyxTQUFTLEVBQUUsdUJBQXVCO01BQ2xDbUIsSUFBSSxFQUFFb0M7SUFDUixDQUFDLENBQUM7RUFFSixDQUFDLENBQUMsT0FBT2hGLEtBQUssRUFBRTtJQUNkc0YsT0FBTyxDQUFDdEYsS0FBSyxDQUFDLDJCQUEyQixFQUFFQSxLQUFLLENBQUM7SUFDakROLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDbkJDLEtBQUssRUFBRSxxQkFBcUI7TUFDNUJ3QixPQUFPLEVBQUUrRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLGFBQWEsR0FBR3pGLEtBQUssQ0FBQ3dCLE9BQU8sR0FBRyx1QkFBdUI7TUFDekZDLFNBQVMsRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FwQyxNQUFNLENBQUNjLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUNsQy9CLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQ2lDLE9BQU8sQ0FBQyxDQUFDLENBQUNDLGNBQWMsQ0FBQyxDQUFDLENBQ3pDLEVBQUVkLHNCQUFzQixFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzdDLElBQUk7SUFDRixNQUFNO01BQUVrQjtJQUFNLENBQUMsR0FBR25CLEdBQUcsQ0FBQ3JCLElBQUk7O0lBRTFCO0lBQ0EsTUFBTXdFLElBQUksR0FBRyxNQUFNckQsTUFBTSxDQUFDcUQsSUFBSSxDQUFDdUQsVUFBVSxDQUFDO01BQ3hDckQsS0FBSyxFQUFFO1FBQUVsQztNQUFNLENBQUM7TUFDaEJ5SSxPQUFPLEVBQUU7UUFDUEUsdUJBQXVCLEVBQUU7VUFDdkJ6RyxLQUFLLEVBQUU7WUFDTGtCLFNBQVMsRUFBRTtjQUNUd0YsRUFBRSxFQUFFLElBQUl2RixJQUFJLENBQUM7WUFDZjtVQUNGO1FBQ0Y7TUFDRjtJQUNGLENBQUMsQ0FBQztJQUVGLElBQUksQ0FBQ3JCLElBQUksRUFBRTtNQUNULE9BQU9sRCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsZ0JBQWdCO1FBQ3ZCd0IsT0FBTyxFQUFFLDBDQUEwQztRQUNuREMsU0FBUyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxJQUFJbUIsSUFBSSxDQUFDc0MsYUFBYSxFQUFFO01BQ3RCLE9BQU94RixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsa0JBQWtCO1FBQ3pCd0IsT0FBTyxFQUFFLGlDQUFpQztRQUMxQ0MsU0FBUyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNZ0ksV0FBVyxHQUFHN0csSUFBSSxDQUFDMkcsdUJBQXVCLENBQUMsQ0FBQyxDQUFDO0lBQ25ELElBQUlFLFdBQVcsSUFBS3hGLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBR3VGLFdBQVcsQ0FBQ2hHLFNBQVMsQ0FBQ2lHLE9BQU8sQ0FBQyxDQUFDLEdBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUU7TUFDakYsT0FBT2hLLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSxtQkFBbUI7UUFDMUJ3QixPQUFPLEVBQUUsMERBQTBEO1FBQ25FQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLE1BQU1sQyxNQUFNLENBQUM0RSxzQkFBc0IsQ0FBQ3dGLFVBQVUsQ0FBQztNQUM3QzdHLEtBQUssRUFBRTtRQUFFc0IsTUFBTSxFQUFFeEIsSUFBSSxDQUFDWTtNQUFHO0lBQzNCLENBQUMsQ0FBQzs7SUFFRjtJQUNBLE1BQU1NLGlCQUFpQixHQUFHckYsWUFBWSxDQUFDc0YseUJBQXlCLENBQUMsQ0FBQztJQUNsRSxNQUFNQyxTQUFTLEdBQUcsSUFBSUMsSUFBSSxDQUFDQSxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQzs7SUFFOUQ7SUFDQSxNQUFNM0UsTUFBTSxDQUFDNEUsc0JBQXNCLENBQUNmLE1BQU0sQ0FBQztNQUN6Q0MsSUFBSSxFQUFFO1FBQ0plLE1BQU0sRUFBRXhCLElBQUksQ0FBQ1ksRUFBRTtRQUNmYSxLQUFLLEVBQUVQLGlCQUFpQjtRQUN4QkU7TUFDRjtJQUNGLENBQUMsQ0FBQzs7SUFFRjtJQUNBLE1BQU1NLFdBQVcsR0FBRyxNQUFNN0YsWUFBWSxDQUFDOEYscUJBQXFCLENBQzFEM0QsS0FBSyxFQUNMLEdBQUdnQyxJQUFJLENBQUM5QixTQUFTLElBQUk4QixJQUFJLENBQUM3QixRQUFRLEVBQUUsRUFDcEMrQyxpQkFDRixDQUFDO0lBRUQsSUFBSSxDQUFDUSxXQUFXLENBQUNFLE9BQU8sRUFBRTtNQUN4QixPQUFPOUUsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QndCLE9BQU8sRUFBRSw0REFBNEQ7UUFDckVDLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKO0lBRUEvQixHQUFHLENBQUNLLElBQUksQ0FBQztNQUNQeUIsT0FBTyxFQUFFLHNDQUFzQztNQUMvQ0MsU0FBUyxFQUFFLDhCQUE4QjtNQUN6Q2IsS0FBSyxFQUFFQTtJQUNULENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPWixLQUFLLEVBQUU7SUFDZHNGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyw0QkFBNEIsRUFBRUEsS0FBSyxDQUFDO0lBQ2xETixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxLQUFLLEVBQUUsK0JBQStCO01BQ3RDd0IsT0FBTyxFQUFFK0QsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxhQUFhLEdBQUd6RixLQUFLLENBQUN3QixPQUFPLEdBQUcsdUJBQXVCO01BQ3pGQyxTQUFTLEVBQUU7SUFDYixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBcEMsTUFBTSxDQUFDYyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQ3ZCL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FDaEMsRUFBRW5CLHNCQUFzQixFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzdDLElBQUk7SUFDRixNQUFNO01BQUV3QjtJQUFNLENBQUMsR0FBR3pCLEdBQUcsQ0FBQ3JCLElBQUk7O0lBRTFCO0lBQ0EsTUFBTW1FLGVBQWUsR0FBR3ZELHNCQUFzQixDQUFDd0Qsa0JBQWtCLENBQUN0QixLQUFLLEVBQUUsS0FBSyxDQUFDO0lBQy9FLElBQUksQ0FBQ3FCLGVBQWUsQ0FBQ1YsT0FBTyxFQUFFO01BQzVCLE9BQU9uQyxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsc0JBQXNCO1FBQzdCd0IsT0FBTyxFQUFFZSxlQUFlLENBQUN2QyxLQUFLO1FBQzlCeUIsU0FBUyxFQUFFYyxlQUFlLENBQUNFLE9BQU87UUFDbENDLElBQUksRUFBRUgsZUFBZSxDQUFDRztNQUN4QixDQUFDLENBQUM7SUFDSjtJQUVBLE1BQU1NLGVBQWUsR0FBR1QsZUFBZSxDQUFDUyxlQUFlOztJQUV2RDtJQUNBLE1BQU00RyxVQUFVLEdBQUcsTUFBTWpMLFVBQVUsQ0FBQ2tMLGVBQWUsQ0FBQzdHLGVBQWUsQ0FBQztJQUNwRSxJQUFJNEcsVUFBVSxFQUFFO01BQ2QsT0FBT2xLLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSx3QkFBd0I7UUFDL0J3QixPQUFPLEVBQUUsc0RBQXNEO1FBQy9EQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLE1BQU1rRCxTQUFTLEdBQUcsTUFBTWhHLFVBQVUsQ0FBQ2lHLGdCQUFnQixDQUFDNUIsZUFBZSxDQUFDO0lBRXBFLElBQUksQ0FBQzJCLFNBQVMsQ0FBQ0gsT0FBTyxFQUFFO01BQ3RCLE9BQU85RSxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsb0JBQW9CO1FBQzNCd0IsT0FBTyxFQUFFbUQsU0FBUyxDQUFDM0UsS0FBSztRQUN4QnlCLFNBQVMsRUFBRWtELFNBQVMsQ0FBQ2xDLE9BQU87UUFDNUJDLElBQUksRUFBRWlDLFNBQVMsQ0FBQ2pDO01BQ2xCLENBQUMsQ0FBQztJQUNKO0lBRUFoRCxHQUFHLENBQUNLLElBQUksQ0FBQztNQUNQeUIsT0FBTyxFQUFFLHVCQUF1QjtNQUNoQ0MsU0FBUyxFQUFFLHVCQUF1QjtNQUNsQ1AsS0FBSyxFQUFFOEIsZUFBZTtNQUN0QjhCLFFBQVEsRUFBRUgsU0FBUyxDQUFDRyxRQUFRO01BQzVCQyxlQUFlLEVBQUVKLFNBQVMsQ0FBQ0ksZUFBZTtNQUMxQ2YsU0FBUyxFQUFFVyxTQUFTLENBQUNYLFNBQVM7TUFDOUI4RixJQUFJLEVBQUVuRixTQUFTLENBQUNtRixJQUFJLElBQUk7SUFDMUIsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU85SixLQUFLLEVBQUU7SUFDZHNGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyxpQkFBaUIsRUFBRUEsS0FBSyxDQUFDO0lBQ3ZDTixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxLQUFLLEVBQUUsb0JBQW9CO01BQzNCd0IsT0FBTyxFQUFFK0QsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxhQUFhLEdBQUd6RixLQUFLLENBQUN3QixPQUFPLEdBQUcsdUJBQXVCO01BQ3pGQyxTQUFTLEVBQUU7SUFDYixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBcEMsTUFBTSxDQUFDYyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQ3pCL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsRUFDL0J2QyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUNzQyxRQUFRLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUFDSixRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUUsQ0FBQyxDQUFDLENBQzNELEVBQUVqQixzQkFBc0IsRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUM3QyxJQUFJO0lBQ0YsTUFBTTtNQUFFd0IsS0FBSztNQUFFNkk7SUFBSSxDQUFDLEdBQUd0SyxHQUFHLENBQUNyQixJQUFJOztJQUUvQjtJQUNBLE1BQU1tRSxlQUFlLEdBQUd2RCxzQkFBc0IsQ0FBQ3dELGtCQUFrQixDQUFDdEIsS0FBSyxFQUFFLEtBQUssQ0FBQztJQUMvRSxJQUFJLENBQUNxQixlQUFlLENBQUNWLE9BQU8sRUFBRTtNQUM1QixPQUFPbkMsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QndCLE9BQU8sRUFBRWUsZUFBZSxDQUFDdkMsS0FBSztRQUM5QnlCLFNBQVMsRUFBRWMsZUFBZSxDQUFDRSxPQUFPO1FBQ2xDQyxJQUFJLEVBQUVILGVBQWUsQ0FBQ0c7TUFDeEIsQ0FBQyxDQUFDO0lBQ0o7SUFFQSxNQUFNTSxlQUFlLEdBQUdULGVBQWUsQ0FBQ1MsZUFBZTs7SUFFdkQ7SUFDQSxNQUFNZ0gsWUFBWSxHQUFHLE1BQU1yTCxVQUFVLENBQUNzTCxjQUFjLENBQUNqSCxlQUFlLEVBQUUrRyxHQUFHLENBQUM7SUFFMUUsSUFBSSxDQUFDQyxZQUFZLENBQUN4RixPQUFPLEVBQUU7TUFDekIsT0FBTzlFLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSx5QkFBeUI7UUFDaEN3QixPQUFPLEVBQUV3SSxZQUFZLENBQUNoSyxLQUFLO1FBQzNCeUIsU0FBUyxFQUFFdUksWUFBWSxDQUFDdkgsT0FBTztRQUMvQkMsSUFBSSxFQUFFc0gsWUFBWSxDQUFDdEg7TUFDckIsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxJQUFJc0gsWUFBWSxDQUFDNUYsTUFBTSxFQUFFO01BQ3ZCLE1BQU14QixJQUFJLEdBQUcsTUFBTXJELE1BQU0sQ0FBQ3FELElBQUksQ0FBQ3VELFVBQVUsQ0FBQztRQUN4Q3JELEtBQUssRUFBRTtVQUFFVSxFQUFFLEVBQUV3RyxZQUFZLENBQUM1RjtRQUFPLENBQUM7UUFDbENiLE1BQU0sRUFBRTtVQUNOQyxFQUFFLEVBQUUsSUFBSTtVQUNSNUMsS0FBSyxFQUFFLElBQUk7VUFDWEUsU0FBUyxFQUFFLElBQUk7VUFDZkMsUUFBUSxFQUFFLElBQUk7VUFDZEcsS0FBSyxFQUFFLElBQUk7VUFDWG9DLElBQUksRUFBRSxJQUFJO1VBQ1Z4RCxNQUFNLEVBQUUsSUFBSTtVQUNacUYsYUFBYSxFQUFFO1FBQ2pCO01BQ0YsQ0FBQyxDQUFDO01BRUYsSUFBSXZDLElBQUksRUFBRTtRQUNSLE9BQU9sRCxHQUFHLENBQUNLLElBQUksQ0FBQztVQUNkeUIsT0FBTyxFQUFFLHFEQUFxRDtVQUM5REMsU0FBUyxFQUFFLCtDQUErQztVQUMxRG1CLElBQUk7VUFDSnNILFVBQVUsRUFBRUYsWUFBWSxDQUFDRTtRQUMzQixDQUFDLENBQUM7TUFDSjtJQUNGO0lBRUF4SyxHQUFHLENBQUNLLElBQUksQ0FBQztNQUNQeUIsT0FBTyxFQUFFLDJCQUEyQjtNQUNwQ0MsU0FBUyxFQUFFLHNCQUFzQjtNQUNqQ1AsS0FBSyxFQUFFOEIsZUFBZTtNQUN0QmtILFVBQVUsRUFBRUYsWUFBWSxDQUFDRTtJQUMzQixDQUFDLENBQUM7RUFFSixDQUFDLENBQUMsT0FBT2xLLEtBQUssRUFBRTtJQUNkc0YsT0FBTyxDQUFDdEYsS0FBSyxDQUFDLG1CQUFtQixFQUFFQSxLQUFLLENBQUM7SUFDekNOLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDbkJDLEtBQUssRUFBRSx5QkFBeUI7TUFDaEN3QixPQUFPLEVBQUUrRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLGFBQWEsR0FBR3pGLEtBQUssQ0FBQ3dCLE9BQU8sR0FBRyx1QkFBdUI7TUFDekZDLFNBQVMsRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FwQyxNQUFNLENBQUNjLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FDekIvQixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUNzQyxRQUFRLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUNoQyxFQUFFbkIsc0JBQXNCLEVBQUUsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDN0MsSUFBSTtJQUNGLE1BQU07TUFBRXdCO0lBQU0sQ0FBQyxHQUFHekIsR0FBRyxDQUFDckIsSUFBSTs7SUFFMUI7SUFDQSxNQUFNbUUsZUFBZSxHQUFHdkQsc0JBQXNCLENBQUN3RCxrQkFBa0IsQ0FBQ3RCLEtBQUssRUFBRSxLQUFLLENBQUM7SUFDL0UsSUFBSSxDQUFDcUIsZUFBZSxDQUFDVixPQUFPLEVBQUU7TUFDNUIsT0FBT25DLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSxzQkFBc0I7UUFDN0J3QixPQUFPLEVBQUVlLGVBQWUsQ0FBQ3ZDLEtBQUs7UUFDOUJ5QixTQUFTLEVBQUVjLGVBQWUsQ0FBQ0UsT0FBTztRQUNsQ0MsSUFBSSxFQUFFSCxlQUFlLENBQUNHO01BQ3hCLENBQUMsQ0FBQztJQUNKO0lBRUEsTUFBTU0sZUFBZSxHQUFHVCxlQUFlLENBQUNTLGVBQWU7O0lBRXZEO0lBQ0EsTUFBTW1ILFlBQVksR0FBRyxNQUFNeEwsVUFBVSxDQUFDeUwsY0FBYyxDQUFDcEgsZUFBZSxDQUFDO0lBRXJFLElBQUksQ0FBQ21ILFlBQVksQ0FBQzNGLE9BQU8sRUFBRTtNQUN6QixPQUFPOUUsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QndCLE9BQU8sRUFBRTJJLFlBQVksQ0FBQ25LLEtBQUs7UUFDM0J5QixTQUFTLEVBQUUwSSxZQUFZLENBQUMxSCxPQUFPO1FBQy9CQyxJQUFJLEVBQUV5SCxZQUFZLENBQUN6SCxJQUFJO1FBQ3ZCMkgsUUFBUSxFQUFFRixZQUFZLENBQUNFO01BQ3pCLENBQUMsQ0FBQztJQUNKO0lBRUEzSyxHQUFHLENBQUNLLElBQUksQ0FBQztNQUNQeUIsT0FBTyxFQUFFLHlCQUF5QjtNQUNsQ0MsU0FBUyxFQUFFLDRCQUE0QjtNQUN2Q1AsS0FBSyxFQUFFOEIsZUFBZTtNQUN0QjhCLFFBQVEsRUFBRXFGLFlBQVksQ0FBQ3JGLFFBQVE7TUFDL0JDLGVBQWUsRUFBRW9GLFlBQVksQ0FBQ3BGLGVBQWU7TUFDN0NmLFNBQVMsRUFBRW1HLFlBQVksQ0FBQ25HLFNBQVM7TUFDakM4RixJQUFJLEVBQUVLLFlBQVksQ0FBQ0wsSUFBSSxJQUFJO0lBQzdCLENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPOUosS0FBSyxFQUFFO0lBQ2RzRixPQUFPLENBQUN0RixLQUFLLENBQUMsbUJBQW1CLEVBQUVBLEtBQUssQ0FBQztJQUN6Q04sR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNuQkMsS0FBSyxFQUFFLHNCQUFzQjtNQUM3QndCLE9BQU8sRUFBRStELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxHQUFHekYsS0FBSyxDQUFDd0IsT0FBTyxHQUFHLHVCQUF1QjtNQUN6RkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQXBDLE1BQU0sQ0FBQ2MsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQzlCdkIsY0FBYyxDQUFDMEwsWUFBWSxDQUFDLENBQUMsRUFDN0JsTSxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQ3NDLFFBQVEsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLEVBQ3pDdkMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDbUMsUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFJLENBQUMsQ0FBQyxFQUNsRHJDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FDMUMsRUFBRW5CLHNCQUFzQixFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzdDLElBQUk7SUFDRixNQUFNO01BQUU2SyxlQUFlO01BQUVDLFdBQVc7TUFBRXBKO0lBQWdCLENBQUMsR0FBRzNCLEdBQUcsQ0FBQ3JCLElBQUk7SUFDbEUsTUFBTWdHLE1BQU0sR0FBRzNFLEdBQUcsQ0FBQ21ELElBQUksQ0FBQ1ksRUFBRTs7SUFFMUI7SUFDQSxJQUFJZ0gsV0FBVyxLQUFLcEosZUFBZSxFQUFFO01BQ25DLE9BQU8xQixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsd0JBQXdCO1FBQy9Cd0IsT0FBTyxFQUFFLHFEQUFxRDtRQUM5REMsU0FBUyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNbUIsSUFBSSxHQUFHLE1BQU1yRCxNQUFNLENBQUNxRCxJQUFJLENBQUN1RCxVQUFVLENBQUM7TUFDeENyRCxLQUFLLEVBQUU7UUFBRVUsRUFBRSxFQUFFWTtNQUFPLENBQUM7TUFDckJiLE1BQU0sRUFBRTtRQUNOQyxFQUFFLEVBQUUsSUFBSTtRQUNSNUMsS0FBSyxFQUFFLElBQUk7UUFDWEUsU0FBUyxFQUFFLElBQUk7UUFDZkMsUUFBUSxFQUFFLElBQUk7UUFDZEcsS0FBSyxFQUFFLElBQUk7UUFDWEwsUUFBUSxFQUFFO01BQ1o7SUFDRixDQUFDLENBQUM7SUFFRixJQUFJLENBQUMrQixJQUFJLEVBQUU7TUFDVCxPQUFPbEQsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLGdCQUFnQjtRQUN2QndCLE9BQU8sRUFBRSx3QkFBd0I7UUFDakNDLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTWdKLHNCQUFzQixHQUFHLE1BQU0xTCxlQUFlLENBQUMyTCxjQUFjLENBQUNILGVBQWUsRUFBRTNILElBQUksQ0FBQy9CLFFBQVEsQ0FBQztJQUNuRyxJQUFJLENBQUM0SixzQkFBc0IsRUFBRTtNQUMzQixPQUFPL0ssR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLDBCQUEwQjtRQUNqQ3dCLE9BQU8sRUFBRSwrQ0FBK0M7UUFDeERDLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTWtKLGVBQWUsR0FBRyxNQUFNNUwsZUFBZSxDQUFDMkwsY0FBYyxDQUFDRixXQUFXLEVBQUU1SCxJQUFJLENBQUMvQixRQUFRLENBQUM7SUFDeEYsSUFBSThKLGVBQWUsRUFBRTtNQUNuQixPQUFPakwsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLGVBQWU7UUFDdEJ3QixPQUFPLEVBQUUsc0RBQXNEO1FBQy9EQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLE1BQU1DLFFBQVEsR0FBRztNQUNmWixTQUFTLEVBQUU4QixJQUFJLENBQUM5QixTQUFTO01BQ3pCQyxRQUFRLEVBQUU2QixJQUFJLENBQUM3QixRQUFRO01BQ3ZCSCxLQUFLLEVBQUVnQyxJQUFJLENBQUNoQyxLQUFLO01BQ2pCTSxLQUFLLEVBQUUwQixJQUFJLENBQUMxQjtJQUNkLENBQUM7SUFDRCxNQUFNUyxrQkFBa0IsR0FBRzVDLGVBQWUsQ0FBQzZDLHdCQUF3QixDQUFDNEksV0FBVyxFQUFFOUksUUFBUSxDQUFDO0lBRTFGLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNFLE9BQU8sRUFBRTtNQUMvQixPQUFPbkMsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLHFDQUFxQztRQUM1Q3dCLE9BQU8sRUFBRSxpRUFBaUU7UUFDMUVDLFNBQVMsRUFBRSw2Q0FBNkM7UUFDeER4QixPQUFPLEVBQUU7VUFDUDZCLFFBQVEsRUFBRUgsa0JBQWtCLENBQUNHLFFBQVE7VUFDckNDLEtBQUssRUFBRUosa0JBQWtCLENBQUNJLEtBQUs7VUFDL0JDLFFBQVEsRUFBRUwsa0JBQWtCLENBQUNLLFFBQVE7VUFDckNDLFFBQVEsRUFBRU4sa0JBQWtCLENBQUNNLFFBQVE7VUFDckNDLFdBQVcsRUFBRVAsa0JBQWtCLENBQUNPLFdBQVc7VUFDM0NDLGNBQWMsRUFBRXBELGVBQWUsQ0FBQ3FELGlCQUFpQixDQUFDO1FBQ3BEO01BQ0YsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNd0ksZ0JBQWdCLEdBQUcsTUFBTTdMLGVBQWUsQ0FBQzZMLGdCQUFnQixDQUFDeEcsTUFBTSxFQUFFb0csV0FBVyxDQUFDO0lBQ3BGLElBQUlJLGdCQUFnQixFQUFFO01BQ3BCLE9BQU9sTCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsdUJBQXVCO1FBQzlCd0IsT0FBTyxFQUFFLHNFQUFzRTtRQUMvRUMsU0FBUyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNb0osaUJBQWlCLEdBQUcsTUFBTTlMLGVBQWUsQ0FBQ29FLFlBQVksQ0FBQ3FILFdBQVcsQ0FBQzs7SUFFekU7SUFDQSxNQUFNakwsTUFBTSxDQUFDcUQsSUFBSSxDQUFDcUMsTUFBTSxDQUFDO01BQ3ZCbkMsS0FBSyxFQUFFO1FBQUVVLEVBQUUsRUFBRVk7TUFBTyxDQUFDO01BQ3JCZixJQUFJLEVBQUU7UUFBRXhDLFFBQVEsRUFBRWdLO01BQWtCO0lBQ3RDLENBQUMsQ0FBQzs7SUFFRjtJQUNBLE1BQU05TCxlQUFlLENBQUMyRSxxQkFBcUIsQ0FBQ1UsTUFBTSxFQUFFeUcsaUJBQWlCLENBQUM7O0lBRXRFO0lBQ0F2RixPQUFPLENBQUN3RixHQUFHLENBQUMsNkJBQTZCMUcsTUFBTSxPQUFPLElBQUlILElBQUksQ0FBQyxDQUFDLENBQUM4RyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFFakZyTCxHQUFHLENBQUNLLElBQUksQ0FBQztNQUNQeUIsT0FBTyxFQUFFLCtCQUErQjtNQUN4Q0MsU0FBUyxFQUFFLHVCQUF1QjtNQUNsQ3VKLFNBQVMsRUFBRSxJQUFJL0csSUFBSSxDQUFDLENBQUMsQ0FBQzhHLFdBQVcsQ0FBQztJQUNwQyxDQUFDLENBQUM7RUFFSixDQUFDLENBQUMsT0FBTy9LLEtBQUssRUFBRTtJQUNkc0YsT0FBTyxDQUFDdEYsS0FBSyxDQUFDLHdCQUF3QixFQUFFQSxLQUFLLENBQUM7SUFDOUNOLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDbkJDLEtBQUssRUFBRSx3QkFBd0I7TUFDL0J3QixPQUFPLEVBQUUrRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLGFBQWEsR0FBR3pGLEtBQUssQ0FBQ3dCLE9BQU8sR0FBRyx1QkFBdUI7TUFDekZDLFNBQVMsRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FwQyxNQUFNLENBQUNjLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUM5Qi9CLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQ2lDLE9BQU8sQ0FBQyxDQUFDLENBQUNDLGNBQWMsQ0FBQyxDQUFDLENBQ3pDLEVBQUVkLHNCQUFzQixFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzdDLElBQUk7SUFDRixNQUFNO01BQUVrQjtJQUFNLENBQUMsR0FBR25CLEdBQUcsQ0FBQ3JCLElBQUk7O0lBRTFCO0lBQ0EsTUFBTXdFLElBQUksR0FBRyxNQUFNckQsTUFBTSxDQUFDcUQsSUFBSSxDQUFDdUQsVUFBVSxDQUFDO01BQ3hDckQsS0FBSyxFQUFFO1FBQUVsQztNQUFNO0lBQ2pCLENBQUMsQ0FBQztJQUVGLElBQUksQ0FBQ2dDLElBQUksRUFBRTtNQUNUO01BQ0EsT0FBT2xELEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO1FBQ2R5QixPQUFPLEVBQUUsMkVBQTJFO1FBQ3BGQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLE1BQU13SixVQUFVLEdBQUd4TSxZQUFZLENBQUNzRix5QkFBeUIsQ0FBQyxDQUFDO0lBQzNELE1BQU1DLFNBQVMsR0FBRyxJQUFJQyxJQUFJLENBQUNBLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDOztJQUU3RDtJQUNBLE1BQU0zRSxNQUFNLENBQUM0RSxzQkFBc0IsQ0FBQ2YsTUFBTSxDQUFDO01BQ3pDQyxJQUFJLEVBQUU7UUFDSmUsTUFBTSxFQUFFeEIsSUFBSSxDQUFDWSxFQUFFO1FBQ2ZhLEtBQUssRUFBRTRHLFVBQVU7UUFDakJqSDtNQUNGO0lBQ0YsQ0FBQyxDQUFDOztJQUVGO0lBQ0EsTUFBTWtILGlCQUFpQixHQUFHbk0sZUFBZSxDQUFDb00sc0JBQXNCLENBQUMsRUFBRSxDQUFDO0lBQ3BFLE1BQU1DLGtCQUFrQixHQUFHLE1BQU1yTSxlQUFlLENBQUNvRSxZQUFZLENBQUMrSCxpQkFBaUIsQ0FBQzs7SUFFaEY7SUFDQSxNQUFNM0wsTUFBTSxDQUFDcUQsSUFBSSxDQUFDcUMsTUFBTSxDQUFDO01BQ3ZCbkMsS0FBSyxFQUFFO1FBQUVVLEVBQUUsRUFBRVosSUFBSSxDQUFDWTtNQUFHLENBQUM7TUFDdEJILElBQUksRUFBRTtRQUFFeEMsUUFBUSxFQUFFdUs7TUFBbUI7SUFDdkMsQ0FBQyxDQUFDOztJQUVGO0lBQ0EsTUFBTXJNLGVBQWUsQ0FBQzJFLHFCQUFxQixDQUFDZCxJQUFJLENBQUNZLEVBQUUsRUFBRTRILGtCQUFrQixDQUFDOztJQUV4RTtJQUNBLE1BQU05RyxXQUFXLEdBQUcsTUFBTTdGLFlBQVksQ0FBQzRNLHNCQUFzQixDQUMzRHpLLEtBQUssRUFDTCxHQUFHZ0MsSUFBSSxDQUFDOUIsU0FBUyxJQUFJOEIsSUFBSSxDQUFDN0IsUUFBUSxFQUFFLEVBQ3BDbUssaUJBQWlCLEVBQ2pCRCxVQUNGLENBQUM7SUFFRCxJQUFJLENBQUMzRyxXQUFXLENBQUNFLE9BQU8sRUFBRTtNQUN4QixPQUFPOUUsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLDRCQUE0QjtRQUNuQ3dCLE9BQU8sRUFBRSw4REFBOEQ7UUFDdkVDLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKO0lBRUEvQixHQUFHLENBQUNLLElBQUksQ0FBQztNQUNQeUIsT0FBTyxFQUFFLHdDQUF3QztNQUNqREMsU0FBUyxFQUFFLHlDQUF5QztNQUNwRGIsS0FBSyxFQUFFQTtJQUNULENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPWixLQUFLLEVBQUU7SUFDZHNGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyx3QkFBd0IsRUFBRUEsS0FBSyxDQUFDO0lBQzlDTixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxLQUFLLEVBQUUsdUJBQXVCO01BQzlCd0IsT0FBTyxFQUFFK0QsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxhQUFhLEdBQUd6RixLQUFLLENBQUN3QixPQUFPLEdBQUcsdUJBQXVCO01BQ3pGQyxTQUFTLEVBQUU7SUFDYixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBcEMsTUFBTSxDQUFDYyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FDN0IvQixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUNzQyxRQUFRLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUMvQnZDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQ21DLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBSSxDQUFDLENBQUMsRUFDbERyQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQ3NDLFFBQVEsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQzFDLEVBQUVuQixzQkFBc0IsRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUM3QyxJQUFJO0lBQ0YsTUFBTTtNQUFFMkUsS0FBSztNQUFFbUcsV0FBVztNQUFFcEo7SUFBZ0IsQ0FBQyxHQUFHM0IsR0FBRyxDQUFDckIsSUFBSTs7SUFFeEQ7SUFDQSxJQUFJb00sV0FBVyxLQUFLcEosZUFBZSxFQUFFO01BQ25DLE9BQU8xQixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsd0JBQXdCO1FBQy9Cd0IsT0FBTyxFQUFFLHFEQUFxRDtRQUM5REMsU0FBUyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNd0osVUFBVSxHQUFHLE1BQU0xTCxNQUFNLENBQUM0RSxzQkFBc0IsQ0FBQ2dDLFVBQVUsQ0FBQztNQUNoRXJELEtBQUssRUFBRTtRQUFFdUI7TUFBTSxDQUFDO01BQ2hCZ0YsT0FBTyxFQUFFO1FBQ1B6RyxJQUFJLEVBQUU7TUFDUjtJQUNGLENBQUMsQ0FBQztJQUVGLElBQUksQ0FBQ3FJLFVBQVUsRUFBRTtNQUNmLE9BQU92TCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsZUFBZTtRQUN0QndCLE9BQU8sRUFBRSxrREFBa0Q7UUFDM0RDLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsSUFBSXdKLFVBQVUsQ0FBQ2pILFNBQVMsR0FBRyxJQUFJQyxJQUFJLENBQUMsQ0FBQyxFQUFFO01BQ3JDO01BQ0EsTUFBTTFFLE1BQU0sQ0FBQzRFLHNCQUFzQixDQUFDTSxNQUFNLENBQUM7UUFDekMzQixLQUFLLEVBQUU7VUFBRVUsRUFBRSxFQUFFeUgsVUFBVSxDQUFDekg7UUFBRztNQUM3QixDQUFDLENBQUM7TUFFRixPQUFPOUQsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLGVBQWU7UUFDdEJ3QixPQUFPLEVBQUUsNkRBQTZEO1FBQ3RFQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLE1BQU1DLFFBQVEsR0FBRztNQUNmWixTQUFTLEVBQUVtSyxVQUFVLENBQUNySSxJQUFJLENBQUM5QixTQUFTO01BQ3BDQyxRQUFRLEVBQUVrSyxVQUFVLENBQUNySSxJQUFJLENBQUM3QixRQUFRO01BQ2xDSCxLQUFLLEVBQUVxSyxVQUFVLENBQUNySSxJQUFJLENBQUNoQyxLQUFLO01BQzVCTSxLQUFLLEVBQUUrSixVQUFVLENBQUNySSxJQUFJLENBQUMxQjtJQUN6QixDQUFDO0lBQ0QsTUFBTVMsa0JBQWtCLEdBQUc1QyxlQUFlLENBQUM2Qyx3QkFBd0IsQ0FBQzRJLFdBQVcsRUFBRTlJLFFBQVEsQ0FBQztJQUUxRixJQUFJLENBQUNDLGtCQUFrQixDQUFDRSxPQUFPLEVBQUU7TUFDL0IsT0FBT25DLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSxxQ0FBcUM7UUFDNUN3QixPQUFPLEVBQUUsaUVBQWlFO1FBQzFFQyxTQUFTLEVBQUUsNkNBQTZDO1FBQ3hEeEIsT0FBTyxFQUFFO1VBQ1A2QixRQUFRLEVBQUVILGtCQUFrQixDQUFDRyxRQUFRO1VBQ3JDQyxLQUFLLEVBQUVKLGtCQUFrQixDQUFDSSxLQUFLO1VBQy9CQyxRQUFRLEVBQUVMLGtCQUFrQixDQUFDSyxRQUFRO1VBQ3JDQyxRQUFRLEVBQUVOLGtCQUFrQixDQUFDTSxRQUFRO1VBQ3JDQyxXQUFXLEVBQUVQLGtCQUFrQixDQUFDTyxXQUFXO1VBQzNDQyxjQUFjLEVBQUVwRCxlQUFlLENBQUNxRCxpQkFBaUIsQ0FBQztRQUNwRDtNQUNGLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTXdJLGdCQUFnQixHQUFHLE1BQU03TCxlQUFlLENBQUM2TCxnQkFBZ0IsQ0FBQ0ssVUFBVSxDQUFDN0csTUFBTSxFQUFFb0csV0FBVyxDQUFDO0lBQy9GLElBQUlJLGdCQUFnQixFQUFFO01BQ3BCLE9BQU9sTCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsdUJBQXVCO1FBQzlCd0IsT0FBTyxFQUFFLHNFQUFzRTtRQUMvRUMsU0FBUyxFQUFFO01BQ2IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNb0osaUJBQWlCLEdBQUcsTUFBTTlMLGVBQWUsQ0FBQ29FLFlBQVksQ0FBQ3FILFdBQVcsQ0FBQzs7SUFFekU7SUFDQSxNQUFNakwsTUFBTSxDQUFDcUQsSUFBSSxDQUFDcUMsTUFBTSxDQUFDO01BQ3ZCbkMsS0FBSyxFQUFFO1FBQUVVLEVBQUUsRUFBRXlILFVBQVUsQ0FBQzdHO01BQU8sQ0FBQztNQUNoQ2YsSUFBSSxFQUFFO1FBQUV4QyxRQUFRLEVBQUVnSztNQUFrQjtJQUN0QyxDQUFDLENBQUM7O0lBRUY7SUFDQSxNQUFNOUwsZUFBZSxDQUFDMkUscUJBQXFCLENBQUN1SCxVQUFVLENBQUM3RyxNQUFNLEVBQUV5RyxpQkFBaUIsQ0FBQzs7SUFFakY7SUFDQSxNQUFNdEwsTUFBTSxDQUFDNEUsc0JBQXNCLENBQUNNLE1BQU0sQ0FBQztNQUN6QzNCLEtBQUssRUFBRTtRQUFFVSxFQUFFLEVBQUV5SCxVQUFVLENBQUN6SDtNQUFHO0lBQzdCLENBQUMsQ0FBQzs7SUFFRjtJQUNBLElBQUl5SCxVQUFVLENBQUNySSxJQUFJLENBQUM5QyxNQUFNLEtBQUssU0FBUyxFQUFFO01BQ3hDLE1BQU1QLE1BQU0sQ0FBQ3FELElBQUksQ0FBQ3FDLE1BQU0sQ0FBQztRQUN2Qm5DLEtBQUssRUFBRTtVQUFFVSxFQUFFLEVBQUV5SCxVQUFVLENBQUM3RztRQUFPLENBQUM7UUFDaENmLElBQUksRUFBRTtVQUFFdkQsTUFBTSxFQUFFO1FBQVM7TUFDM0IsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQXdGLE9BQU8sQ0FBQ3dGLEdBQUcsQ0FBQywyQkFBMkJHLFVBQVUsQ0FBQzdHLE1BQU0sT0FBTyxJQUFJSCxJQUFJLENBQUMsQ0FBQyxDQUFDOEcsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRTFGckwsR0FBRyxDQUFDSyxJQUFJLENBQUM7TUFDUHlCLE9BQU8sRUFBRSw2QkFBNkI7TUFDdENDLFNBQVMsRUFBRSx1QkFBdUI7TUFDbEN1SixTQUFTLEVBQUUsSUFBSS9HLElBQUksQ0FBQyxDQUFDLENBQUM4RyxXQUFXLENBQUM7SUFDcEMsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU8vSyxLQUFLLEVBQUU7SUFDZHNGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyx1QkFBdUIsRUFBRUEsS0FBSyxDQUFDO0lBQzdDTixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxLQUFLLEVBQUUsdUJBQXVCO01BQzlCd0IsT0FBTyxFQUFFK0QsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxhQUFhLEdBQUd6RixLQUFLLENBQUN3QixPQUFPLEdBQUcsdUJBQXVCO01BQ3pGQyxTQUFTLEVBQUU7SUFDYixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBcEMsTUFBTSxDQUFDaU0sR0FBRyxDQUFDLGtCQUFrQixFQUFFLE9BQU83TCxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNqRCxJQUFJO0lBQ0YsTUFBTTZMLE1BQU0sR0FBR3hNLGVBQWUsQ0FBQ3FELGlCQUFpQixDQUFDLENBQUM7SUFFbEQxQyxHQUFHLENBQUNLLElBQUksQ0FBQztNQUNQd0wsTUFBTTtNQUNOL0osT0FBTyxFQUFFLHNDQUFzQztNQUMvQ0MsU0FBUyxFQUFFO0lBQ2IsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU96QixLQUFLLEVBQUU7SUFDZHNGLE9BQU8sQ0FBQ3RGLEtBQUssQ0FBQyw0QkFBNEIsRUFBRUEsS0FBSyxDQUFDO0lBQ2xETixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxLQUFLLEVBQUUsK0JBQStCO01BQ3RDd0IsT0FBTyxFQUFFK0QsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxhQUFhLEdBQUd6RixLQUFLLENBQUN3QixPQUFPLEdBQUcsdUJBQXVCO01BQ3pGQyxTQUFTLEVBQUU7SUFDYixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBcEMsTUFBTSxDQUFDYyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FDN0IvQixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUNzQyxRQUFRLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUNoQyxFQUFFbkIsc0JBQXNCLEVBQUUsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDN0MsSUFBSTtJQUNGLE1BQU07TUFBRXdCO0lBQU0sQ0FBQyxHQUFHekIsR0FBRyxDQUFDckIsSUFBSTtJQUUxQixNQUFNa0ssVUFBVSxHQUFHdEosc0JBQXNCLENBQUN3TSw2QkFBNkIsQ0FBQ3RLLEtBQUssQ0FBQztJQUU5RXhCLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO01BQ1B1SSxVQUFVO01BQ1Y5RyxPQUFPLEVBQUU4RyxVQUFVLENBQUN6RyxPQUFPLEdBQUcsb0JBQW9CLEdBQUcsc0JBQXNCO01BQzNFSixTQUFTLEVBQUU2RyxVQUFVLENBQUN6RyxPQUFPLEdBQUcsZUFBZSxHQUFHO0lBQ3BELENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPN0IsS0FBSyxFQUFFO0lBQ2RzRixPQUFPLENBQUN0RixLQUFLLENBQUMseUJBQXlCLEVBQUVBLEtBQUssQ0FBQztJQUMvQ04sR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNuQkMsS0FBSyxFQUFFLG1CQUFtQjtNQUMxQndCLE9BQU8sRUFBRStELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxHQUFHekYsS0FBSyxDQUFDd0IsT0FBTyxHQUFHLHVCQUF1QjtNQUN6RkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQXBDLE1BQU0sQ0FBQ2lNLEdBQUcsQ0FBQyxZQUFZLEVBQUUsT0FBTzdMLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzNDLElBQUk7SUFDRixNQUFNK0wsU0FBUyxHQUFHek0sc0JBQXNCLENBQUMwTSxxQkFBcUIsQ0FBQyxDQUFDO0lBRWhFaE0sR0FBRyxDQUFDSyxJQUFJLENBQUM7TUFDUDBMLFNBQVM7TUFDVGpLLE9BQU8sRUFBRSw0QkFBNEI7TUFDckNDLFNBQVMsRUFBRTtJQUNiLENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPekIsS0FBSyxFQUFFO0lBQ2RzRixPQUFPLENBQUN0RixLQUFLLENBQUMsc0JBQXNCLEVBQUVBLEtBQUssQ0FBQztJQUM1Q04sR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNuQkMsS0FBSyxFQUFFLHlCQUF5QjtNQUNoQ3dCLE9BQU8sRUFBRStELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxHQUFHekYsS0FBSyxDQUFDd0IsT0FBTyxHQUFHLHVCQUF1QjtNQUN6RkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQXBDLE1BQU0sQ0FBQ2MsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQ25DL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FDaEMsRUFBRW5CLHNCQUFzQixFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzdDLElBQUk7SUFDRixNQUFNO01BQUUyRTtJQUFNLENBQUMsR0FBRzVFLEdBQUcsQ0FBQ3JCLElBQUk7SUFFMUIsSUFBSSxDQUFDaUcsS0FBSyxFQUFFO01BQ1YsT0FBTzNFLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSxnQkFBZ0I7UUFDdkJ3QixPQUFPLEVBQUUsK0JBQStCO1FBQ3hDQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLE1BQU02RyxVQUFVLEdBQUcsTUFBTXhKLGNBQWMsQ0FBQzZNLHVCQUF1QixDQUFDdEgsS0FBSyxDQUFDO0lBRXRFLElBQUksQ0FBQ2lFLFVBQVUsQ0FBQ0UsS0FBSyxFQUFFO01BQ3JCLE9BQU85SSxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxLQUFLLEVBQUUsZUFBZTtRQUN0QndCLE9BQU8sRUFBRThHLFVBQVUsQ0FBQ1EsTUFBTSxJQUFJLHlDQUF5QztRQUN2RXJILFNBQVMsRUFBRTZHLFVBQVUsQ0FBQ1EsTUFBTSxJQUFJO01BQ2xDLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTWxHLElBQUksR0FBRyxNQUFNckQsTUFBTSxDQUFDcUQsSUFBSSxDQUFDdUQsVUFBVSxDQUFDO01BQ3hDckQsS0FBSyxFQUFFO1FBQUVVLEVBQUUsRUFBRThFLFVBQVUsQ0FBQ2xFO01BQU8sQ0FBQztNQUNoQ2IsTUFBTSxFQUFFO1FBQ05DLEVBQUUsRUFBRSxJQUFJO1FBQ1I1QyxLQUFLLEVBQUUsSUFBSTtRQUNYRSxTQUFTLEVBQUUsSUFBSTtRQUNmQyxRQUFRLEVBQUUsSUFBSTtRQUNkRyxLQUFLLEVBQUUsSUFBSTtRQUNYb0MsSUFBSSxFQUFFLElBQUk7UUFDVnhELE1BQU0sRUFBRTtNQUNWO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDOEMsSUFBSSxFQUFFO01BQ1QsT0FBT2xELEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSxnQkFBZ0I7UUFDdkJ3QixPQUFPLEVBQUUsd0JBQXdCO1FBQ2pDQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjtJQUVBL0IsR0FBRyxDQUFDSyxJQUFJLENBQUM7TUFDUHlCLE9BQU8sRUFBRSw0QkFBNEI7TUFDckNDLFNBQVMsRUFBRSx3QkFBd0I7TUFDbkNtQixJQUFJO01BQ0pnSixVQUFVLEVBQUUsSUFBSTtNQUNoQm5JLFNBQVMsRUFBRTZFLFVBQVUsQ0FBQzdFO0lBQ3hCLENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPekQsS0FBSyxFQUFFO0lBQ2RzRixPQUFPLENBQUN0RixLQUFLLENBQUMscUNBQXFDLEVBQUVBLEtBQUssQ0FBQztJQUMzRE4sR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNuQkMsS0FBSyxFQUFFLG1CQUFtQjtNQUMxQndCLE9BQU8sRUFBRStELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxHQUFHekYsS0FBSyxDQUFDd0IsT0FBTyxHQUFHLHVCQUF1QjtNQUN6RkMsU0FBUyxFQUFFO0lBQ2IsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQXBDLE1BQU0sQ0FBQ2MsSUFBSSxDQUFDLDJCQUEyQixFQUFFLENBQ3ZDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FDaEMsRUFBRW5CLHNCQUFzQixFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzdDLElBQUk7SUFDRixNQUFNO01BQUUyRTtJQUFNLENBQUMsR0FBRzVFLEdBQUcsQ0FBQ3JCLElBQUk7SUFFMUIsSUFBSSxDQUFDaUcsS0FBSyxFQUFFO01BQ1YsT0FBTzNFLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLEtBQUssRUFBRSxnQkFBZ0I7UUFDdkJ3QixPQUFPLEVBQUUsK0JBQStCO1FBQ3hDQyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLE1BQU1vSyxhQUFhLEdBQUcsTUFBTS9NLGNBQWMsQ0FBQ2dOLDBCQUEwQixDQUFDekgsS0FBSyxFQUFFNUUsR0FBRyxDQUFDO0lBRWpGLElBQUksQ0FBQ29NLGFBQWEsQ0FBQ3JILE9BQU8sRUFBRTtNQUMxQixPQUFPOUUsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLHdCQUF3QjtRQUMvQndCLE9BQU8sRUFBRXFLLGFBQWEsQ0FBQy9DLE1BQU0sSUFBSSxrREFBa0Q7UUFDbkZySCxTQUFTLEVBQUVvSyxhQUFhLENBQUMvQyxNQUFNLElBQUk7TUFDckMsQ0FBQyxDQUFDO0lBQ0o7O0lBRUE7SUFDQSxNQUFNbEcsSUFBSSxHQUFHLE1BQU1yRCxNQUFNLENBQUNxRCxJQUFJLENBQUN1RCxVQUFVLENBQUM7TUFDeENyRCxLQUFLLEVBQUU7UUFBRVUsRUFBRSxFQUFFcUksYUFBYSxDQUFDekg7TUFBTyxDQUFDO01BQ25DYixNQUFNLEVBQUU7UUFDTkMsRUFBRSxFQUFFLElBQUk7UUFDUjVDLEtBQUssRUFBRSxJQUFJO1FBQ1hFLFNBQVMsRUFBRSxJQUFJO1FBQ2ZDLFFBQVEsRUFBRSxJQUFJO1FBQ2RHLEtBQUssRUFBRSxJQUFJO1FBQ1hvQyxJQUFJLEVBQUUsSUFBSTtRQUNWeEQsTUFBTSxFQUFFO01BQ1Y7SUFDRixDQUFDLENBQUM7SUFFRixJQUFJLENBQUM4QyxJQUFJLEVBQUU7TUFDVCxPQUFPbEQsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsS0FBSyxFQUFFLGdCQUFnQjtRQUN2QndCLE9BQU8sRUFBRSx3QkFBd0I7UUFDakNDLFNBQVMsRUFBRTtNQUNiLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0E1QyxpQkFBaUIsQ0FBQ2tJLGdCQUFnQixDQUFDckgsR0FBRyxFQUFFbU0sYUFBYSxDQUFDL0UsU0FBUyxFQUFFO01BQy9ERCxNQUFNLEVBQUVnRixhQUFhLENBQUNoRixNQUFNO01BQzVCZixVQUFVLEVBQUU7SUFDZCxDQUFDLENBQUM7O0lBRUY7SUFDQSxNQUFNa0IsY0FBYyxHQUFHbkksaUJBQWlCLENBQUNtSSxjQUFjLENBQUM2RSxhQUFhLENBQUM7SUFDdEU1RSxNQUFNLENBQUNDLElBQUksQ0FBQ0YsY0FBYyxDQUFDLENBQUNHLE9BQU8sQ0FBQ0MsR0FBRyxJQUFJO01BQ3pDMUgsR0FBRyxDQUFDMkgsR0FBRyxDQUFDRCxHQUFHLEVBQUVKLGNBQWMsQ0FBQ0ksR0FBRyxDQUFDLENBQUM7SUFDbkMsQ0FBQyxDQUFDOztJQUVGO0lBQ0EsTUFBTUUsY0FBYyxHQUFHL0IsT0FBTyxDQUFDQyxHQUFHLENBQUMrQixVQUFVO0lBQzdDLElBQUksQ0FBQ0QsY0FBYyxFQUFFO01BQ25CLE1BQU0sSUFBSUUsS0FBSyxDQUFDLDZDQUE2QyxDQUFDO0lBQ2hFO0lBRUEsTUFBTXVFLFFBQVEsR0FBR3hOLEdBQUcsQ0FBQ2tKLElBQUksQ0FDdkI7TUFDRXJELE1BQU0sRUFBRXhCLElBQUksQ0FBQ1ksRUFBRTtNQUNmNUMsS0FBSyxFQUFFZ0MsSUFBSSxDQUFDaEMsS0FBSztNQUNqQk0sS0FBSyxFQUFFMEIsSUFBSSxDQUFDMUIsS0FBSztNQUNqQm9DLElBQUksRUFBRVYsSUFBSSxDQUFDVSxJQUFJO01BQ2Z3RCxTQUFTLEVBQUUrRSxhQUFhLENBQUMvRTtJQUMzQixDQUFDLEVBQ0RRLGNBQWMsRUFDZDtNQUFFSSxTQUFTLEVBQUVuQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ21DLGNBQWMsSUFBSTtJQUFNLENBQ25ELENBQUM7SUFFRGpJLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO01BQ1B5QixPQUFPLEVBQUUsZ0NBQWdDO01BQ3pDQyxTQUFTLEVBQUUsaUJBQWlCO01BQzVCbUIsSUFBSTtNQUNKeUIsS0FBSyxFQUFFMEgsUUFBUTtNQUNmakYsU0FBUyxFQUFFK0UsYUFBYSxDQUFDL0UsU0FBUztNQUNsQzlDLFNBQVMsRUFBRTZILGFBQWEsQ0FBQzdILFNBQVM7TUFDbEM2QyxNQUFNLEVBQUVnRixhQUFhLENBQUNoRixNQUFNO01BQzVCZixVQUFVLEVBQUUsSUFBSTtNQUNoQmtHLGFBQWEsRUFBRTtJQUNqQixDQUFDLENBQUM7RUFFSixDQUFDLENBQUMsT0FBT2hNLEtBQUssRUFBRTtJQUNkc0YsT0FBTyxDQUFDdEYsS0FBSyxDQUFDLG9DQUFvQyxFQUFFQSxLQUFLLENBQUM7SUFDMUROLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDbkJDLEtBQUssRUFBRSx3QkFBd0I7TUFDL0J3QixPQUFPLEVBQUUrRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLGFBQWEsR0FBR3pGLEtBQUssQ0FBQ3dCLE9BQU8sR0FBRyx1QkFBdUI7TUFDekZDLFNBQVMsRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FwQyxNQUFNLENBQUNjLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUNsQ3ZCLGNBQWMsQ0FBQzBMLFlBQVksQ0FBQyxDQUFDLEVBQzdCbE0sSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDZ0MsUUFBUSxDQUFDLENBQUMsQ0FBQ3NGLFNBQVMsQ0FBQyxDQUFDLENBQzFDLEVBQUVsRyxzQkFBc0IsRUFBRSxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUM3QyxJQUFJO0lBQ0YsTUFBTTtNQUFFMEk7SUFBVyxDQUFDLEdBQUczSSxHQUFHLENBQUNyQixJQUFJO0lBQy9CLE1BQU1nRyxNQUFNLEdBQUczRSxHQUFHLENBQUNtRCxJQUFJLENBQUNZLEVBQUU7SUFDMUIsTUFBTXlJLGdCQUFnQixHQUFHeE0sR0FBRyxDQUFDcUgsU0FBUztJQUV0QyxJQUFJc0IsVUFBVSxFQUFFO01BQ2Q7TUFDQSxNQUFNTyxNQUFNLEdBQUcsTUFBTTdKLGNBQWMsQ0FBQzhKLHNCQUFzQixDQUFDeEUsTUFBTSxFQUFFNkgsZ0JBQWdCLENBQUM7O01BRXBGO01BQ0F2TSxHQUFHLENBQUN3TSxXQUFXLENBQUMsWUFBWSxDQUFDO01BQzdCeE0sR0FBRyxDQUFDd00sV0FBVyxDQUFDLG1CQUFtQixDQUFDO01BRXBDeE0sR0FBRyxDQUFDSyxJQUFJLENBQUM7UUFDUHlCLE9BQU8sRUFBRSxxQ0FBcUM7UUFDOUNDLFNBQVMsRUFBRSwrQ0FBK0M7UUFDMUQyRyxVQUFVLEVBQUUsSUFBSTtRQUNoQlcsY0FBYyxFQUFFSixNQUFNLENBQUNJO01BQ3pCLENBQUMsQ0FBQztJQUNKLENBQUMsTUFBTTtNQUNMO01BQ0EsTUFBTUosTUFBTSxHQUFHLE1BQU03SixjQUFjLENBQUMrSixjQUFjLENBQUNvRCxnQkFBZ0IsRUFBRSxxQkFBcUIsQ0FBQzs7TUFFM0Y7TUFDQXZNLEdBQUcsQ0FBQ3dNLFdBQVcsQ0FBQyxZQUFZLENBQUM7TUFDN0J4TSxHQUFHLENBQUN3TSxXQUFXLENBQUMsbUJBQW1CLENBQUM7TUFFcEN4TSxHQUFHLENBQUNLLElBQUksQ0FBQztRQUNQeUIsT0FBTyxFQUFFLHdDQUF3QztRQUNqREMsU0FBUyxFQUFFLG9EQUFvRDtRQUMvRDJHLFVBQVUsRUFBRSxLQUFLO1FBQ2pCVyxjQUFjLEVBQUU7TUFDbEIsQ0FBQyxDQUFDO0lBQ0o7RUFFRixDQUFDLENBQUMsT0FBTy9JLEtBQUssRUFBRTtJQUNkc0YsT0FBTyxDQUFDdEYsS0FBSyxDQUFDLDRCQUE0QixFQUFFQSxLQUFLLENBQUM7SUFDbEROLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDbkJDLEtBQUssRUFBRSwrQkFBK0I7TUFDdEN3QixPQUFPLEVBQUUrRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLGFBQWEsR0FBR3pGLEtBQUssQ0FBQ3dCLE9BQU8sR0FBRyx1QkFBdUI7TUFDekZDLFNBQVMsRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDO0FBRUYwSyxNQUFNLENBQUNDLE9BQU8sR0FBRy9NLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=